(()=>{function Li(e,t,r){return r?`${e}_${t}_${r}`:`${e}_${t}`}function Sf(e,t={},r){let o=[e];r&&o.push(r);let n=o.slice();for(let s of Object.keys(t)){let i=t[s];for(let a of o)if(typeof i=="boolean")i&&n.push(Li(a,s,null));else if(typeof i=="string")n.push(Li(a,s,i));else throw new Error(`modifier '${s}' has invalid type`)}return n.join(" ")}window.__getCssClass=Sf;var d=class{static log(t,...r){console.log(t,...r)}static warn(t,...r){console.warn(t,...r)}static error(t,...r){console.error(t,...r)}static assert(t,r){t||d.error("Assertion failed"+(r?": "+r:""))}};function m(e,t){return d.assert(e,t),e}function re(e){return e!==void 0}function Xr(e){let t=typeof e;return t=="object"&&e!=null||t=="function"}function ts(e){return typeof e=="function"}function rt(e){return typeof e=="string"}function Ki(e){return Array.isArray(e)}var jr=e=>e!=null,A=(e,t=`Unhandled value: ${JSON.stringify(e,null," ")}`)=>d.error(t);function Hi(e,t,r){return function(...o){r&&r(...o);let n=e(...o);return t(this,n,...o),n}}var kf=0,Zr=class{constructor(t,r,o,n,s=null){this.listener=t,this.src=r,this.type=o,this.capture=!!n,this.handler=s,this.key=++kf}};var Jr=class extends Zr{constructor(t,r,o,n,s,i){super(t,o,n,s,i),this.proxy=r,this.callOnce=!1,this.removed=!1}markAsRemoved(){this.removed=!0,this.listener=null,this.proxy=null,this.src=null,this.handler=null}};function Vi(e,t,r){for(let o in e)if(t.call(r,e[o],o,e))return!0;return!1}function Ui(e,t,r){if(e){for(let o in e)if(t.call(r,e[o],o,e))return o}}function to(e,t){for(let r in e)if(!(r in t)||e[r]!==t[r])return!1;for(let r in t)if(!(r in e))return!1;return!0}function Wi(e,t,r){let o={};if(e)for(let n in e)t.call(r,e[n],n,e)&&(o[n]=e[n]);return o}function ro(e,t,r){for(let o in e)e.hasOwnProperty(o)&&t.call(r,e[o],o,e)}function zi(e,t){let r={};for(let o of Object.keys(e))r[o]=t(e[o]);return r}function eo(e,t){let r=t(e);if(r!==void 0)return r;if(typeof e!="object"||e==null)return e;if(Array.isArray(e))return e.map(n=>eo(n,t));let o={};for(let n of Object.keys(e))o[n]=eo(e[n],t);return o}function Gi(e,t){for(let r of Object.keys(t))e[r]=t[r]}var Ar=class{constructor(t){this.src=t,this.listeners={},this._typeCount=0}getTypeCount(){return this._typeCount}getListenerCount(){let t=0;for(let r of Object.keys(this.listeners))t+=this.listeners[r].length;return t}add(t,r,o,n,s){let i=t.toString(),a=this.listeners[i];a||(a=this.listeners[i]=[],this._typeCount++);let c,l=this._findListenerIndex(a,r,n,s);return l>-1?(c=a[l],o||(c.callOnce=!1)):(c=new Jr(r,null,this.src,i,!!n,s),c.callOnce=o,a.push(c)),c}remove(t,r,o,n){let s=t.toString();if(!(s in this.listeners))return!1;let i=this.listeners[s],a=this._findListenerIndex(i,r,o,n);return a>-1?(i[a].markAsRemoved(),i.splice(a,1),i.length==0&&(delete this.listeners[s],this._typeCount--),!0):!1}removeByKey(t){let r=t.type;if(!(r in this.listeners))return!1;let o=this.listeners[r],n=o.indexOf(t),s=n>=0;return s&&(o.splice(n,1),t.markAsRemoved(),this.listeners[r].length==0&&(delete this.listeners[r],--this._typeCount)),s}getListeners(t,r){let o=this.listeners[t.toString()],n=[];if(o)for(let s=0;s<o.length;++s){let i=o[s];i.capture==r&&n.push(i)}return n}getListener(t,r,o,n){let s=this.listeners[t.toString()],i=-1;return s&&(i=this._findListenerIndex(s,r,o,n)),i>-1?s[i]:null}hasListener(t="",r){let o=re(t),n=o?t.toString():"",s=re(r);return Vi(this.listeners,i=>{for(let a=0;a<i.length;++a)if((!o||i[a].type==n)&&(!s||i[a].capture==r))return!0;return!1})}_findListenerIndex(t,r,o,n){for(let s=0;s<t.length;++s){let i=t[s];if(!i.removed&&i.listener==r&&i.capture==!!o&&i.handler==n)return s}return-1}};var os="ispring_lm_"+(Math.random()*1e6|0),rs;function wf(){if(!ae.addEventListener||!Object.defineProperty)return!1;let e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});return ae.addEventListener("test",Function.prototype,t),ae.removeEventListener("test",Function.prototype,t),e}function Ef(){return re(rs)||(rs=wf()),rs}function ns(e){let t=e[os];return t instanceof Ar?t:null}function Ue(e){let t=e;if(!t||t.removed)return!1;let r=t.src,o=t.type,n=t.proxy;r.removeEventListener&&r.removeEventListener(o,n,t.capture);let s=ns(r);return s?(s.removeByKey(t),s.getTypeCount()==0&&(r[os]=null)):t.markAsRemoved(),!0}function bf(e){let{listener:t,handler:r,callOnce:o}=e,n=r?t.bind(r):t;return o?(...s)=>{n(...s),Ue(e)}:n}function Fe(e,t,r,o,n=null){let s=Xr(o)?m(o).capture:!!o,i=ns(e);i||(i=new Ar(e),e[os]=i);let a=!!(o&&o.once),c=i.add(t,r,a,s,n);if(c.proxy)return c;let l=bf(c);if(c.proxy=l,e.addEventListener){let u=Ef()?o:s;re(u)||(u=!1),e.addEventListener(t.toString(),l,u)}else throw new Error("addEventListener is unavailable.");return c}function Qi(e,t,r,o,n){o=!!o;let s=ns(e);return s?s.getListener(t,r,o,n):null}var oo=class{dispose(){}};var vf=0,dt=class extends oo{constructor(){super(),this._listenersKeys=null,this._activeSignals=null,this._disposables=null,this._customDestructHandlers=null}addDestructHandler(t){this._customDestructHandlers=this._customDestructHandlers||[],this._customDestructHandlers.push(t)}dispose(){if(this._destruct(),this._customDestructHandlers)for(let t of this._customDestructHandlers)t();if(this._disposables)for(let t of this._disposables)ss(t);if(this._listenersKeys){for(let t of this._listenersKeys)Ue(t);this._listenersKeys=null}if(this._activeSignals)for(let t of Object.keys(this._activeSignals))this._removeSignalByKey(t)}_listen(t,r,o,n){this._listenersKeys=this._listenersKeys||[];let s=Fe(this._getEventTarget(t),r,o,n,this);return this._listenersKeys.push(s),s}_unlisten(t,r,o){let n=Qi(this._getEventTarget(t),r,o,!1);return!!n&&this._unlistenByKey(n)}_unlistenByKey(t){let r=m(this._listenersKeys),o=r.indexOf(t);return o>=0&&r.splice(o,1),Ue(t)}_addSignal(t,r,o){this._activeSignals=this._activeSignals||{},t.add(r,this,o);let n=++vf;return this._activeSignals[n]={dispatcher:t,fn:r,priority:o},n}_addSignalCallOnce(t,r,o){let n=(...s)=>{r.apply(this,s),this._removeSignal(t,n,o)};this._addSignal(t,n,o)}_removeSignal(t,r,o){let n=Ui(this._activeSignals,s=>to(s,{dispatcher:t,fn:r,priority:o}));n?this._removeSignalByKey(n):!1&&d.warn("unknown signal")}_removeSignalByKey(t){if(!(this._activeSignals&&this._activeSignals[t])){d.warn("unknown signal key");return}let{dispatcher:r,fn:o,priority:n}=this._activeSignals[t];r.remove(o,this,n),delete this._activeSignals[t]}_removeAllEvents(t){if(!!t){if(this._activeSignals){let r=Wi(this._activeSignals,o=>o.dispatcher.eventOwner()==t);for(let o of Object.keys(r))this._removeSignalByKey(o)}if(this._listenersKeys){let r=this._getEventTarget(t),o=this._listenersKeys.filter(n=>n.src==r);for(let n of o)this._unlistenByKey(n)}}}_name(){let t=this,r=t.owner,o=`[${this.constructor.name}]`;return r&&(o+=` in [${r.constructor.name}].${t.ownerPropertyName()}`),o}_addDisposable(t){if(this._disposables=this._disposables||[],!t||this._disposables.includes(t))return t;if(!1){let r=t;m(this._disposables.indexOf(t)<0),m(!r.owner),r.owner=this,r.ownerPropertyName=()=>{let o=this;for(let n of Object.keys(o))if(o[n]==r)return n;return"unknown"}}return this._disposables.push(t),t}_removeDisposable(...t){if(!!this._disposables){for(let r of t)if(r){this._cleanItemDependencies(r);let o=this._disposables.indexOf(r);o>=0&&(this._disposables.splice(o,1),ss(r))}}}_cleanItemDependencies(t){this._removeAllEvents(t)}_cleanDependencies(...t){for(let r of t)r&&this._cleanItemDependencies(r)}_getEventTarget(t){return t}_destruct(){}};function is(e,t){return e>t?1:e<t?-1:0}function Yi(e,t){if(!e)return!1;let r=e.indexOf(t),o=r>=0;return o&&e.splice(r,1),o}function Tf(e,t,r,o,n){let s=0,i=e.length,a;for(;s<i;){let c=s+i>>1,l;r?l=t.call(n,e[c],c,e):l=t(o,e[c]),l>0?s=c+1:(i=c,a=!l)}return a?s:~s}function Rf(e,t,r=is){return Tf(e,r,!1,t)}function qi(e,t,r){let o=Rf(e,t,r);return o<0?(e.splice(-(o+1),0,t),!0):!1}function as(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}var no=class{constructor(){this._priorities=null,this._values=null,this._zeroPriorityValues=null}push(t,r){this._addPriority(r);let o=this._getPriorityValues(r);o?o.push(t):d.warn("Priority array values are zero")}remove(t,r){let o=this._getPriorityValues(r);o&&Yi(o,t)}removeAt(t,r){let o=this._getPriorityValues(r);o&&o.splice(t,1)}getValuesWithPriority(t){if(t==0)return this._zeroPriorityValues||[];if(!this._values)return d.warn("Priority array values are zero"),[];if(!(t in this._values))return[];let r=this._getPriorityValues(t);return r||(d.warn("Priority array values are zero"),[])}getAllValues(){if(!this._values)return this._zeroPriorityValues?this._zeroPriorityValues.slice():[];let t=[],r=m(this._priorities);for(let o=0;o<r.length;++o){let n=r[o],s=this._getPriorityValues(n);s&&t.push(...s)}return t}_addPriority(t){if(t==0){this._zeroPriorityValues=this._zeroPriorityValues||[];return}this._priorities=this._priorities||[0],this._values=this._values||{},t in this._values||(this._values[t]=[],qi(this._priorities,t))}_getPriorityValues(t){return t==0?this._zeroPriorityValues:m(this._values)[t]}};var Ce=class extends dt{constructor(t=null){super(),this._handlers=null,this._owner=t}eventOwner(){return this._owner}add(t,r,o=0){this._handlers=this._handlers||new no,this._handlers.push({fn:t,context:r},o)}addCallOnce(t,r,o=0){let n=s=>{t.call(r,s),this.remove(n,r,o)};this.add(n,r,o)}remove(t,r,o=0){if(!this._handlers){d.warn("Signal has no handlers!");return}let n=this._handlers.getValuesWithPriority(o),s=n.length;for(let i=0;i<s;++i){let a=n[i];if(a.fn==t&&a.context==r){this._handlers.removeAt(i,o);break}}}has(t,r,o=0){if(!this._handlers)return!1;let n=this._handlers.getValuesWithPriority(o),s=n.length;for(let i=0;i<s;++i){let a=n[i];if(a.fn==t&&a.context==r)return!0}return!1}dispatch(t){if(!this._handlers)return;let r=this._handlers.getAllValues(),o=r.length;for(let n=0;n<o;++n){let s=r[n];if(this._handlers.getAllValues().indexOf(s)!=-1)if(!1)s.fn.apply(s.context,[t]);else try{s.fn.apply(s.context,[t])}catch(i){cs(i,!0)}}}toFn(){return t=>this.dispatch(t)}handlersCount(){return this._handlers?this._handlers.getAllValues().length:0}};var ae=Function("return this")(),Bf=()=>!0;function so(e,t){if(!!Bf()){if(t){d.error(e);return}d.warn(e)}}function cs(e,t){let r=e.stack||e.toString();String(r).indexOf(e.message)<0&&so(e.message,t),so(r,t)}var Df=Object.getPrototypeOf({});function ss(e){!e||(m(!e.disposed),!1&&setTimeout(()=>{let t=e.owner?e.owner.constructor.name:null,r=e.owner?e.ownerPropertyName():null;if(e.owner=null,e.ownerPropertyName=null,e instanceof Ce){let s=t?`[${t}].${r} have active signals`:void 0;m(e.handlersCount()==0,s)}let o=e,n=new Set;for(;(o=m(Object.getPrototypeOf(o)))!=Df;)Object.getOwnPropertyNames(o).forEach(s=>{s!="constructor"&&n.add(s)});n.forEach(s=>{ts(e[s])&&(e[s]=Hi(e[s].bind(e),()=>{so(`using method ${s} from disposed object ${e.constructor.name}`,!0)}))})},100),ts(e.dispose)&&e.dispose(),e.disposed=!0)}function Xi(e,t){let r=e.split("."),o=ae;!(r[0]in o)&&typeof o.execScript!="undefined"&&o.execScript("var "+r[0]);for(let n;r.length&&(n=r.shift());)!r.length&&re(t)?o[n]=t:o[n]&&o[n]!==Object.prototype[n]?o=o[n]:o=o[n]={}}!1||(ae.onerror=function(...e){let[t,,,,r]=e;return r?cs(r,!0):so(t,!0),!0});function ot(e,t,r){return Math.max(t,Math.min(r,e))}function Af(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function If(e,t,r,o="g"){return e.replace(new RegExp(Af(t),o),r)}function Of(e,t,r,o){return e.substr(0,r)+t+e.substr(o)}function ji(e,t){let r=e;return t.sort((o,n)=>n.startIndex-o.startIndex).forEach(({text:o,startIndex:n,endIndex:s})=>{r=Of(r,o,n,s)}),r}function Zi(e,t,r){let o=e;for(let n of Object.keys(t)){let s=t[n],i=r(n);o=If(o,i,s)}return o}function Ji(e,t){return e.slice(0,t).replace(/[^\s]*\s*$/,"").length}function ea(e,t){let r=/^\s*[^\s]*/i.exec(e.slice(t)),o=r?r[0].length:0;return t+o}function ls(e,t={}){return new Promise((r,o)=>{let n=new XMLHttpRequest;m(t),n.open(t.method||"get",e,!0);for(let i in t.headers)t.headers.hasOwnProperty(i)&&n.setRequestHeader(i,t.headers[i]);n.withCredentials=t.credentials=="include",n.onload=()=>{r(s())},n.onerror=o,n.send(t.body);function s(){let i=[],a=[],c={},l;return n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(u,f,g)=>(i.push(f=f.toLowerCase()),a.push([f,g]),l=c[f],c[f]=l?`${l},${g}`:g,"")),{ok:(n.status/100|0)==2,status:n.status,statusText:n.statusText,url:n.responseURL,clone:s,text:()=>Promise.resolve(n.responseText),json:()=>Promise.resolve(n.responseText).then(u=>JSON.parse(u)),blob:()=>Promise.resolve(new Blob([n.response])),headers:{keys:()=>i,entries:()=>a,get:u=>c[u.toLowerCase()],has:u=>u.toLowerCase()in c}}}})}async function us(e){let t=await ls(e);return t.ok?t.json():null}function ta(e){return new Promise((t,r)=>{let o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=function(){let n=o.response;t(new Blob([n]))},o.onerror=r,o.send(null)})}async function ra(e){let t=await ls(e);return t.ok?t.text():""}function Mf(e){return window.path.normalize(e).replace(/\\/g,"/")}function Pf(e,t){return t?`@media ${t} {${e}}`:e}function Nf(e,t,r){let o=new RegExp(/@import ['"]([./\w-_]+)['"]\s*(.+)?;/gi),n=o.exec(t),s=[];for(;n;){let i=n.index,a=i+n[0].length,c=window.path,l=n[2],u=Mf(c.join(c.dirname(e),n[1])),f=ms(u).then(g=>({text:Pf(g,l),startIndex:i,endIndex:a}));s.push(f),n=o.exec(t)}return Promise.all(s)}async function Ff(e,t){let r=await ra(e);r=r.replace(/(url\()([^/])/g,`$1${t}$2`);let o=await Nf(e,r,t);return ji(r,o)}async function ms(e){if(window.path){let r=window.path;return Ff(e,r.dirname(e)+"/")}let t=await ra(e);return t.includes("@import")&&console.error('import is not supported without "browser-path" dependency'),t}var nt="data-root";function oa(e){return new Promise(t=>{let r=document.createElement("style");r.onload=()=>t(),r.innerHTML=e,m(m(document).head).appendChild(r),r.sheet.cssRules[0].type!==CSSRule.IMPORT_RULE&&t()})}var fs=0,io=[],na=null;function $f(e,t,r={},o){return!1&&[t,...Object.keys(r),...Object.values(r).filter(s=>typeof s=="string")].some(s=>s.includes("_"))&&console.error('css className should not contain "_" character'),__getCssClass(e+t,r,o)}function Lf(e,t){e.includes("@import")&&console.error("import is not supported");let r=`[${nt}]`,o=/^\s*\w*\..*[{,]/gm;return e.replace(o,n=>n.replace(/\.([a-zA-Z_])/g,`.${t}$1`).replace(/^\s*(\.[\w-]+)(.*)([{,])$/m,`${r} $1$2, $1${r}$2$3`))}var sa="";function Kf(e){return sa=Hf(Uf(Wf(Vf(e),8*e.length))),sa.toLowerCase()}function Hf(e){for(var t,r="0123456789ABCDEF",o="",n=0;n<e.length;n++)t=e.charCodeAt(n),o+=r.charAt(t>>>4&15)+r.charAt(15&t);return o}function Vf(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}function Uf(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t}function Wf(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,o=-271733879,n=-1732584194,s=271733878,i=0;i<e.length;i+=16){var a=r,c=o,l=n,u=s;o=fe(o=fe(o=fe(o=fe(o=me(o=me(o=me(o=me(o=ue(o=ue(o=ue(o=ue(o=le(o=le(o=le(o=le(o,n=le(n,s=le(s,r=le(r,o,n,s,e[i+0],7,-680876936),o,n,e[i+1],12,-389564586),r,o,e[i+2],17,606105819),s,r,e[i+3],22,-1044525330),n=le(n,s=le(s,r=le(r,o,n,s,e[i+4],7,-176418897),o,n,e[i+5],12,1200080426),r,o,e[i+6],17,-1473231341),s,r,e[i+7],22,-45705983),n=le(n,s=le(s,r=le(r,o,n,s,e[i+8],7,1770035416),o,n,e[i+9],12,-1958414417),r,o,e[i+10],17,-42063),s,r,e[i+11],22,-1990404162),n=le(n,s=le(s,r=le(r,o,n,s,e[i+12],7,1804603682),o,n,e[i+13],12,-40341101),r,o,e[i+14],17,-1502002290),s,r,e[i+15],22,1236535329),n=ue(n,s=ue(s,r=ue(r,o,n,s,e[i+1],5,-165796510),o,n,e[i+6],9,-1069501632),r,o,e[i+11],14,643717713),s,r,e[i+0],20,-373897302),n=ue(n,s=ue(s,r=ue(r,o,n,s,e[i+5],5,-701558691),o,n,e[i+10],9,38016083),r,o,e[i+15],14,-660478335),s,r,e[i+4],20,-405537848),n=ue(n,s=ue(s,r=ue(r,o,n,s,e[i+9],5,568446438),o,n,e[i+14],9,-1019803690),r,o,e[i+3],14,-187363961),s,r,e[i+8],20,1163531501),n=ue(n,s=ue(s,r=ue(r,o,n,s,e[i+13],5,-1444681467),o,n,e[i+2],9,-51403784),r,o,e[i+7],14,1735328473),s,r,e[i+12],20,-1926607734),n=me(n,s=me(s,r=me(r,o,n,s,e[i+5],4,-378558),o,n,e[i+8],11,-2022574463),r,o,e[i+11],16,1839030562),s,r,e[i+14],23,-35309556),n=me(n,s=me(s,r=me(r,o,n,s,e[i+1],4,-1530992060),o,n,e[i+4],11,1272893353),r,o,e[i+7],16,-155497632),s,r,e[i+10],23,-1094730640),n=me(n,s=me(s,r=me(r,o,n,s,e[i+13],4,681279174),o,n,e[i+0],11,-358537222),r,o,e[i+3],16,-722521979),s,r,e[i+6],23,76029189),n=me(n,s=me(s,r=me(r,o,n,s,e[i+9],4,-640364487),o,n,e[i+12],11,-421815835),r,o,e[i+15],16,530742520),s,r,e[i+2],23,-995338651),n=fe(n,s=fe(s,r=fe(r,o,n,s,e[i+0],6,-198630844),o,n,e[i+7],10,1126891415),r,o,e[i+14],15,-1416354905),s,r,e[i+5],21,-57434055),n=fe(n,s=fe(s,r=fe(r,o,n,s,e[i+12],6,1700485571),o,n,e[i+3],10,-1894986606),r,o,e[i+10],15,-1051523),s,r,e[i+1],21,-2054922799),n=fe(n,s=fe(s,r=fe(r,o,n,s,e[i+8],6,1873313359),o,n,e[i+15],10,-30611744),r,o,e[i+6],15,-1560198380),s,r,e[i+13],21,1309151649),n=fe(n,s=fe(s,r=fe(r,o,n,s,e[i+4],6,-145523070),o,n,e[i+11],10,-1120210379),r,o,e[i+2],15,718787259),s,r,e[i+9],21,-343485551),r=pt(r,a),o=pt(o,c),n=pt(n,l),s=pt(s,u)}return Array(r,o,n,s)}function ao(e,t,r,o,n,s){return pt(zf(pt(pt(t,e),pt(o,s)),n),r)}function le(e,t,r,o,n,s,i){return ao(t&r|~t&o,e,t,n,s,i)}function ue(e,t,r,o,n,s,i){return ao(t&o|r&~o,e,t,n,s,i)}function me(e,t,r,o,n,s,i){return ao(t^r^o,e,t,n,s,i)}function fe(e,t,r,o,n,s,i){return ao(r^(t|~o),e,t,n,s,i)}function pt(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function zf(e,t){return e<<t|e>>>32-t}function Gf(e){let t=`x${Kf(e).slice(0,5)}__`;function r(n){io[o]=Lf(n,t),--fs,fs||(oa(io.join(`
`)),na&&na())}let o=io.length;if(io.push(""),!1){++fs;let n=window.rootPath||"";ms(n+e).then(r).catch(()=>{r(e)})}return t}function ne(e){let t=e[0],r=Gf(t);return{getCssClass:$f.bind(null,r)}}var ia={};function aa(e,t){ia[e]=t}function tr(e){return ia[e]||document.body}var ca={topLayer:"xced93__top-layer",popupLayer:"xced93__popup-layer"};function Qf(e,t){let r=[ca.topLayer];e==="popup"&&r.push(ca.popupLayer),t.classList.add(...r)}function ds(e){let t=document.createElement("div");return t.setAttribute(nt,""),Qf(e,t),aa(e,t),t}var se={LATO:"Lato",ROBOTO:"Roboto",OPEN_SANS:"Open Sans",MERRIWEATHER:"Merriweather",ROBOTO_SLAB:"Roboto Slab",EXO_2:"Exo 2",MONTSERRAT:"Montserrat",PT_SERIF:"PT Serif"};function ps(e){return`${Ir(e)}, ${Yf(e)}`}function Ir(e){switch(e){case se.LATO:return"Lato";case se.ROBOTO:return"roboto";case se.OPEN_SANS:return"open-sans";case se.MERRIWEATHER:return"merriweather";case se.ROBOTO_SLAB:return"roboto-slab";case se.EXO_2:return"exo-2";case se.MONTSERRAT:return"montserrat";case se.PT_SERIF:return"pt-serif";default:return""}}function Yf(e){switch(e){case se.LATO:case se.ROBOTO:case se.OPEN_SANS:case se.EXO_2:case se.MONTSERRAT:return"sans-serif";case se.MERRIWEATHER:case se.ROBOTO_SLAB:case se.PT_SERIF:return"serif";default:return""}}function hs(){return!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)}function co(){return/Firefox/.test(navigator.userAgent)}function lo(){return window.navigator.userAgent.includes("MSIE")||window.navigator.userAgent.includes("Trident")}var qf=['link[href*="bundle"]','link[href*="legacy_components_customization"]'],Xf={include:qf.join(","),silent:!0};var la={};function ua(e,t,r){ma(e,{[t]:r})}function ma(e,t){(e instanceof HTMLElement||e instanceof SVGElement)&&(lo()?(Object.keys(t).forEach(r=>{let o=t[r];o=o===null?"":o.toString(),la[r]=o}),cssVars({...Xf,variables:la})):Object.keys(t).forEach(r=>{let o=t[r];o!=null&&(o=o.toString()),e.style.setProperty(r,o)}))}function Mt(e){ma(document.documentElement,e)}function gs(e){return m(getComputedStyle(document.documentElement)).getPropertyValue(e)}function uo(e){let t=window.getComputedStyle(e),r=t&&t.transform?t.transform:"";return r=="none"&&(r=""),r}function mo(e){let t=0,r=0,o=e.style;if(o&&o.transform&&o.transform!="none"){let n=o.transform.match(/translate(.*)/);if(n){let s=m(n[0].match(/-?\d(.\d+)?/g));t=parseFloat(s[0])||0,r=parseFloat(s[1])||0}}return{x:t,y:r}}function xe(...e){return e.filter(t=>t).join(" ")}var fo=class extends dt{addDisposable(t){return this._addDisposable(t)}addSignal(t,r,o){return this._addSignal(t,r,o)}addSignalCallOnce(t,r,o){return this._addSignalCallOnce(t,r,o)}listen(t,r,o,n){return this._listen(t,r,o,n)}};var We=class extends dt{_createDependencyGroup(){return this._addDisposable(new fo)}_createSignal(t){let r=new Ce(this);if(this._addDisposable(r),t)if(Array.isArray(t))for(let o of t)this._addSignal(o,n=>r.dispatch(n));else this._addSignal(t,o=>r.dispatch(o));return r}_createSignalProxy({signal:t,checkDispatchFn:r,modifyDataFn:o}){let n=new Ce(this);return this._addDisposable(n),this._addSignal(t,s=>{if(!r||r(s)){let i=o?o(s):s;n.dispatch(i)}}),n}};var fa=["Learn.Reports.SendReportOnSchedulePopup.Schedule.Month.Day","Learn.EditContent.CompletionTab.ReenrollmentAfterCourseCompletion.Part1","Learn.EditContent.CompletionTab.ReenrollmentBeforeCertExpires.Part1","Learn.EditContent.CompletionTab.ReenrollmentAfterCourseCompletion.Part2","Studio.SideBar.StorageBar.Progress.Part1","Studio.SideBar.StorageBar.Progress.Part2"];var po=class extends We{constructor(t){super(),this._messages=t}addMessages(t){this._messages={...this._messages,...t}}getMessage(t,r){if(!this._messages.hasOwnProperty(t))return d.warn(`unknown message id: ${t}`),t;let o=m(this._messages[t]||fa.includes(t));return typeof o!="string"&&(o=""),r&&(o=Zi(o,r,this._generateKey)),o}messages(){return this._messages}hasMessage(t){return this._messages.hasOwnProperty(t)}_generateKey(t){return"{"+t.toLowerCase()+"}"}};var rr,ys=null;function jf(e){if(rr){d.warn("i18n has already been declared");return}rr=e}function da(e){if(rr){rr.addMessages(e);return}let t=new po(e);jf(t)}function E(e,t){let r=typeof e=="string"?e:e.value;return rr?rr.getMessage(r,t):(d.warn("i18n is not initialized"),r)}function pa(e){return{value:e}}function Zf(e,t,r){let o=e/255,n=t/255,s=r/255,i=Math.max(o,n,s),a=Math.min(o,n,s),c=0,l=0,u=.5*(i+a);return i!=a&&(i==o?c=60*(n-s)/(i-a):i==n?c=60*(s-o)/(i-a)+120:i==s&&(c=60*(o-n)/(i-a)+240),u>0&&u<=.5?l=(i-a)/(2*u):l=(i-a)/(2-2*u)),[Math.round(c+360)%360,l,u]}function $e(e){let t=parseInt(e.substr(1,2),16),r=parseInt(e.substr(3,2),16),o=parseInt(e.substr(5,2),16);return[t,r,o]}function ho(e){let t=$e(e);return Zf(t[0],t[1],t[2])}var ht={accent:"#2972E0",link:"#2972E0",topPanelBackground:"#FFFFFF",topPanelText:"#42484E"};function Or(e,t){let[r,o,n]=$e(e);return`rgba(${r}, ${o}, ${n}, ${t})`}function ha(e,t){let[r,o,n]=ho(e);return`hsl(${r}, ${o*100}%, ${(n+t)*100}%)`}function ga(e=ht){return{"--color-accent-default":e.accent,"--color-accent-8":Or(e.accent,.08),"--color-accent-16":Or(e.accent,.16),"--color-accent-30":Or(e.accent,.3),"--color-accent-60":Or(e.accent,.6),"--color-accent-80":Or(e.accent,.8),"--color-accent-dark":ha(e.accent,-.08),"--color-link-default":e.link,"--color-link-dark":ha(e.link,-.08),"--color-top-panel-background-default":e.topPanelBackground,"--color-top-panel-text-default":e.topPanelText}}var _s={headerFontFamily:"Roboto",contentFontFamily:"Roboto"};function ya(e=_s){return{"--header-font-family":e.headerFontFamily,"--content-font-family":e.contentFontFamily}}var z=null;function _a(e){z={...e,actionCriticalDefault:"#EB5B47",actionCriticalDisabled:"#FCB6AC",actionCriticalHovered:"#E2422C",actionCriticalPressed:"#CB3420",actionPrimaryDefault:e.customAccent,actionPrimaryDisabled:"#C4C7CA",actionPrimaryHovered:gt(e.customAccent,0,-1,-4),actionPrimaryPressed:gt(e.customAccent,0,-1,-8),actionSliderDefault:"#32353729",actionSliderDisabled:"#C4C7CA",actionToggleDepressedDefault:"#D6D7D7",actionToggleDepressedDisabled:"#EFEFEF",actionToggleDepressedHovered:"#BDBEBF",actionTogglePressedDisabled:Pt(e.customAccent,.36),actionWarningDefault:"#FB8B28",actionWarningDisabled:"#FEC897",actionWarningHovered:"#EE7B17",actionWarningPressed:"#DF6316",backgroundActive:"#3235370F",backgroundDefault:"#F6F6F7",backgroundHovered:"#3235370A",borderAccentDefault:e.customAccent,borderAccentDisabled:"#C4C7CA",borderAccentHovered:gt(e.customAccent,0,-1,-4),borderAccentPressed:gt(e.customAccent,0,-1,-8),borderCritical:"#EB5B47",borderDefault:"#D6D7D7",borderDisabled:"#E6E6E7",borderHovered:"#BDBEBF",borderMediaDefault:"#3235371F",borderMediaDisabled:"#32353714",borderMediaHovered:"#32353729",customPanelHovered:Pt(e.customTextDefault,.12),customPanelSubdued:Pt(e.customTextDefault,.08),customTextSubdued:Pt(e.customTextDefault,.72),decorativeChartEight:"#323537",decorativeChartEleven:"#517CE9",decorativeChartFive:"#CB3420",decorativeChartFour:"#983484",decorativeChartFourteen:"#BDBEBF",decorativeChartNine:"#5DC9B5",decorativeChartOne:"#2984E0",decorativeChartSeven:"#EE5091",decorativeChartSix:"#745CDE",decorativeChartStatusBackground:"#EFEFEF",decorativeChartStatusBackgroundHovered:"#DEDEDFB8",decorativeChartStatusCritical:"#E2422C",decorativeChartStatusCriticalHovered:"#E2422C3D",decorativeChartStatusInProgress:"#2985E0",decorativeChartStatusInProgressHovered:"#2985E03D",decorativeChartStatusSuccess:"#3CB46E",decorativeChartStatusSuccessHovered:"#3CB46E3D",decorativeChartStatusWarning:"#FFC252",decorativeChartStatusWarningHovered:"#FFC2527A",decorativeChartTen:"#EEA811",decorativeChartThirteen:"#33AFBD",decorativeChartThree:"#80B43C",decorativeChartTwelve:"#3CB46E",decorativeChartTwo:"#FB8B28",decorativeCollaborationEight:"#503AB0",decorativeCollaborationFive:"#80B43C",decorativeCollaborationFour:"#983484",decorativeCollaborationNine:"#EEA811",decorativeCollaborationOne:"#1F4198",decorativeCollaborationSeven:"#FB8B28",decorativeCollaborationSix:"#B8195B",decorativeCollaborationTen:"#5C247A",decorativeCollaborationThree:"#EE5091",decorativeCollaborationTwo:"#745CDE",decorativeReactionsOne:"#FEE9F1",dividerBackground:"#3235371F",dividerDefault:"#E6E6E7",focusCritical:"#FFD6D1",focusDefault:Pt(e.customAccent,.4),focusOncolor:"#FFFFFF",focusWarning:"#FFDEC2",iconAccentDefault:e.customAccent,iconAccentHovered:gt(e.customAccent,0,-1,-4),iconAccentPressed:gt(e.customAccent,0,-1,-8),iconAlphaDefault:"#323537",iconAlphaDisabled:"#32353752",iconAlphaPlaceholder:"#32353799",iconAlphaSubdued:"#030E1B94",iconCritical:"#E2422C",iconDefault:"#323537",iconDisabled:"#BDBEBF",iconInfo:"#2078CF",iconNew:"#654BD8",iconOncolorDefault:"#FFFFFF",iconOncolorDisabled:"#FFFFFF66",iconPlaceholder:"#848687",iconSubdued:"#6C737B",iconSuccess:"#389F62",iconWarning:"#FB8B28",overlayBg:"#32353766",overlayBgDark:"#323537DE",overlayBgDefault:"#32353766",overlayBgHovered:"#32353799",overlayBgLight:"#FFFFFFE5",overlayCritical:"#CB3420",overlayDark:"#323537",overlayHovered:"#FFFFFF66",overlayNew:"#654BD8",overlayPressed:"#FFFFFF",overlaySemidark:"#323537DE",overlaySubdued:"#FFFFFF33",surfaceAccentDefault:Pt(e.customAccent,.12),surfaceAccentHovered:Pt(e.customAccent,.2),surfaceCriticalDefault:"#FEE4DF",surfaceCriticalHovered:"#FFD6D1",surfaceCriticalSubdued:"#FFF5F5",surfaceDefault:"#FFFFFF",surfaceDisabled:"#3235370A",surfaceHovered:"#3235371F",surfaceInfoDefault:"#D8ECFF",surfaceInfoHovered:"#C7E3FF",surfaceInfoSubdued:"#ECF5FF",surfaceNeutralDefault:"#EFEFEF",surfaceNeutralHovered:"#E6E6E7",surfaceNeutralSubdued:"#F7F7F7",surfaceNewDefault:"#E7E2FE",surfaceNewHovered:"#DED6FC",surfaceNewSubdued:"#F3F0FF",surfacePressed:"#32353729",surfaceSubdued:"#32353714",surfaceSuccessDefault:"#DFF4E8",surfaceSuccessHovered:"#C5ECD5",surfaceSuccessSubdued:"#EFF9F3",surfaceWarningDefault:"#FFEED4",surfaceWarningHovered:"#FFE6C1",surfaceWarningSubdued:"#FFF6E9",textAccentDefault:e.customAccent,textAccentHovered:gt(e.customAccent,0,-1,-4),textAccentPressed:gt(e.customAccent,0,-1,-8),textAlphaDefault:"#323537",textAlphaDisabled:"#32353752",textAlphaPlaceholder:"#32353766",textAlphaSubdued:"#030E1B94",textCritical:"#E2422C",textDefault:"#323537",textDisabled:"#BDBEBF",textLinkDefault:"#295DE0",textLinkPressed:"#214FC4",textOncolorDefault:"#FFFFFF",textOncolorDisabled:"#FFFFFF66",textOncolorSecondary:"#FFFFFFA3",textPlaceholder:"#ADAEAF",textSubdued:"#6C737B",textSuccess:"#389F63",textWarning:"#FB8B28"},Mt({"--color-action-primary-default":z.actionPrimaryDefault,"--color-action-primary-hovered":z.actionPrimaryHovered,"--color-action-primary-pressed":z.actionPrimaryPressed,"--color-action-toggle-pressed-disabled":z.actionTogglePressedDisabled,"--color-border-accent-default":z.borderAccentDefault,"--color-border-accent-hovered":z.borderAccentHovered,"--color-border-accent-pressed":z.borderAccentPressed,"--color-custom-accent":z.customAccent,"--color-custom-panel-default":z.customPanelDefault,"--color-custom-panel-hovered":z.customPanelHovered,"--color-custom-panel-subdued":z.customPanelSubdued,"--color-custom-text-default":z.customTextDefault,"--color-custom-text-subdued":z.customTextSubdued,"--color-focus-default":z.focusDefault,"--color-icon-accent-default":z.iconAccentDefault,"--color-icon-accent-hovered":z.iconAccentHovered,"--color-icon-accent-pressed":z.iconAccentPressed,"--color-surface-accent-default":z.surfaceAccentDefault,"--color-surface-accent-hovered":z.surfaceAccentHovered,"--color-text-accent-default":z.textAccentDefault,"--color-text-accent-hovered":z.textAccentHovered,"--color-text-accent-pressed":z.textAccentPressed})}function Pt(e,t){let[r,o,n]=$e(e);return`rgba(${r}, ${o}, ${n}, ${t})`}function gt(e,t,r,o){let[n,s,i]=ho(e),a=(n+t).toFixed(2),c=(s*100+r).toFixed(2),l=(i*100+o).toFixed(2);return`hsl(${a}, ${c}%, ${l}%)`}var go={accent:ht.accent,link:ht.link,topPanelBackground:ht.topPanelBackground,topPanelText:ht.topPanelText};function Ca(e){go.accent=e.accent,go.link=e.link,go.topPanelBackground=e.topPanelBackground,go.topPanelText=e.topPanelText}function Jf(e){let t={...ht,...e};Mt(ga(t)),Ca(t),_a({customAccent:t.accent,customPanelDefault:t.topPanelBackground,customTextDefault:t.topPanelText})}function ed(e=_s){Mt(ya(e))}function xa(e){ed(e&&e.baseFonts),Jf(e&&e.baseColors)}function td(){return{order:[],blocks:{}}}function Sa(e,t){let r=td();for(let o of e){let n=t(o);r.order.push(n),r.blocks[n]=o}return r}function rd(e,t){if(t<0||t>=e.order.length)return null;let r=e.order[t];return e.blocks[r]}function or(e){return rd(e,0)}function nr(e,t){if(t<0||t>=e.order.length)return null;let r=e.order[t];return e.blocks[r]}function ka(e){return nr(e,0)}function wa(e){return nr(e,e.order.length-1)}function Ea(e,t){let r=e.order.indexOf(t);return nr(e,r-1)}function ba(e,t){let r=e.order.indexOf(t);return nr(e,r+1)}function va(e,t){e.order.forEach(r=>{t(e.blocks[r])})}function Ta({settings:e,i18nData:t,topPanelColors:r}){let o={accent:e.design.accentColor};r&&(o.topPanelBackground=r.topPanelBackground,o.topPanelText=r.topPanelText),Mt({"--roll-player-accent-color":e.design.accentColor,"--player-main-font":ps(e.design.headerFont),"--content-font":ps(e.design.contentFont)}),xa({baseColors:o}),da(t)}var O={CLICK:"click",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",CHANGE:"change",SELECTION_CHANGE:"selectionchange",INPUT:"input",TEXT_INPUT:"textInput",KEY_DOWN:"keydown",KEY_PRESS:"keypress",PASTE:"paste",CUT:"cut",COPY:"copy",BLUR:"blur",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",LOAD:"load",LOAD_END:"loadend",UNLOAD:"unload",BEFOREUNLOAD:"beforeunload",ERROR:"error",DRAG_START:"dragstart",DRAG_OVER:"dragover",DRAG_END:"dragend",RESIZE:"resize",SCROLL:"scroll",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",ORIENTATIONCHANGE:"orientationchange",CUSTOM_CONNECTED:"connected",CUSTOM_DISCONNECTED:"disconnected",TRANSITIONEND:"transitionend",TOUCHSTART:"touchstart",VISIBILITYCHANGE:"visibilitychange"};var yt=class{constructor(t){this.Type=t}};function Ba(e,t){return new Promise((r,o)=>{if(e=e,typeof e.arrayBuffer=="undefined"){let n=new FileReader;Fe(n,O.LOAD_END,()=>{n.result||o();let s=n.result;r(Ra(s,t))}),Fe(n,O.ERROR,o),n.readAsArrayBuffer(e)}else e.arrayBuffer().then(n=>r(Ra(n,t))).catch(o)})}function Ra(e,t){let r=new Uint32Array(e.slice(0,Uint32Array.BYTES_PER_ELEMENT))[0],o=new Uint8Array(e.slice(Uint32Array.BYTES_PER_ELEMENT)),{Type:n}=t(r),s=n.decode(o),i=n.toObject(s);return{version:r,data:i}}function Da(e,t,r){let o=t[e];return o?rt(o)?{keyValue:o,newKeys:t}:{keyValue:(Cs(o)||o)._,newKeys:o}:(d.error(`key not found: ${e}, path: ${r.join(".")}`),{keyValue:e,newKeys:t})}function Aa(e,t,r){for(let o of Object.keys(t)){let{keyValue:n,newKeys:s}=Da(o,t,r);if(n===e&&o!=="_")return{key:o,newKeys:s}}return d.error(`cant find value: ${e}, path: ${r.join(".")}`),{key:e,newKeys:t}}var yo=class{constructor(t){this.keys=t}};function G(e){return new yo(e)}function Cs(e){return e instanceof yo?e.keys:null}function Nt(e,t,r){if(Ki(e))return e.map(n=>Nt(n,t,r));let o=Cs(t);if(o)return zi(e,n=>Nt(n,m(o),r));if(Xr(e)){let n={};return ro(e,(s,i)=>{let{key:a,newKeys:c}=Aa(i,t,r);n[a]=Nt(s,c,[...r,a])}),n}return e}var Le={TOOLTIP:"tooltip",PLAYER_MAIN:"playerMain",CONTENT:"content"};var od="$",Te={create(e){return e},add(e,t){let r=e.findIndex(n=>n.name===t.name),o=e.slice();switch(t.name){case"bold":case"italic":case"underline":case"strikethrough":if(r>=0)return e;o.push(t);break;case"fontSize":case"fontColor":case"textHighlightColor":case"textHighlightOpacity":r>=0?o[r]=t:o.push(t);break;default:throw A(t),new Error(`Unknown text style type: ${t}`)}return Te.create(o)},compareTextStyles(e,t){return Te.serializeStyles(e)===Te.serializeStyles(t)},serializeStyles(e){return[...e].sort((t,r)=>is(t.name,r.name)).map(t=>JSON.stringify(t)).join(od)},remove(e,t){let r=e.filter(o=>!t.includes(o.name));return Te.create(r)},has(e,t){return e.findIndex(o=>o.name===t)>=0}};var K={create(e={}){let{url:t=null,style:r=Te.create([])}=e;return{url:t,style:r}},applyStyle(e,t){return K.create({...e,style:Te.add(e.style,t)})},removeStyles(e,t){return K.create({...e,style:Te.remove(e.style,t)})},hasStyle(e,t){return Te.has(e.style,t)},compare(e,t){return e.url===t.url&&Te.compareTextStyles(e.style,t.style)},setUrl(e,t){return K.create({...e,url:t})},removeUrl(e){return K.create({...e,url:null})}};var Co="#",Ia={[Co]:Co},nd=1,sd=2,id=4,ad=8,_o={FONT_SIZE:2,FONT_COLOR:3,TEXT_HIGHLIGHT_COLOR:4,TEXT_HIGHLIGHT_OPACITY:5},cd="#";function _t(e){return e===cd}function Oa(e){if(typeof e=="object"&&e&&e.hasOwnProperty(Co)){let t=e[Co],r=[],o=t.length&&!_t(t[0])&&typeof t[0]=="number"&&!isNaN(t[0])?t[0]:void 0,n=t.length&&!_t(t[0])&&rt(t[0])?t[0]:t.length>1&&!_t(t[1])&&rt(t[1])?t[1]:void 0,s=t[_o.FONT_SIZE],i=t[_o.FONT_COLOR],a=t[_o.TEXT_HIGHLIGHT_COLOR],c=t[_o.TEXT_HIGHLIGHT_OPACITY];return!_t(o)&&typeof o=="number"&&!isNaN(o)&&(o&nd&&r.push({name:"bold"}),o&sd&&r.push({name:"italic"}),o&id&&r.push({name:"underline"}),o&ad&&r.push({name:"strikethrough"})),!_t(s)&&typeof s=="number"&&!isNaN(s)&&r.push({name:"fontSize",size:s}),!_t(i)&&rt(i)&&r.push({name:"fontColor",color:i}),!_t(a)&&rt(a)&&r.push({name:"textHighlightColor",color:a}),!_t(c)&&typeof c=="number"&&!isNaN(c)&&r.push({name:"textHighlightOpacity",opacity:c}),K.create({style:Te.create(r),url:n})}}var xo={text:"t",meta:{_:"m",...Ia},length:"l"},de={key:"k",type:"t",viewType:"v",textAlign:"tA",characters:{_:"c",...xo},isOrderedListFirstItem:"iO"},sr={type:"t",src:"s",key:"k",width:"w",height:"h",alignment:"a",characters:{_:"c",...xo},isBlob:"iB"},Re={type:"t",src:"s",key:"k",width:"w",height:"h",alignment:"a",characters:{_:"c",...xo}},Be={type:"t",src:"s",key:"k",fileName:"fn",fileExtension:"fe",fileSize:"fs",isLoading:"iL"},So={key:"k",type:"t",characters:{_:"c",...xo},noteType:"nT"};var ko={crop:{_:"cp",top:"tp",left:"lf",right:"rt",bottom:"bm"}};var ld={...sr,parentCollageKey:"cK"},wo={type:"t",key:"k",alignment:"a",images:{_:"is",...ld,length:"l"}},Ct={...wo,images:{...wo.images,...ko}};var ir={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:G({_:"B",...de})}};var ud={type:"t",width:"w",height:"h",src:"s"},md={choices:{_:"ch",key:"k",content:{_:"c",...ir},correct:"cr",length:"l"}},fd={caseSensitive:"cs",answers:{_:"a",key:"k",text:"t",length:"l"}},dd={type:"t",correct:{_:"c",...ir},incorrect:{_:"i",...ir},answered:{_:"a",...ir}},pd={key:"k",type:"t",description:{_:"d",...ir},attachment:{_:"a",...ud},content:{_:"c",...md,...fd},feedback:{_:"f",...dd}},Ft={type:"t",key:"k",settings:{_:"ss",includeInProgress:"iip",shuffleAnswers:"sa",showCorrectAnswers:"sca"},questions:{_:"q",...pd}},Mr={...Ft,questions:{...Ft.questions,attachment:{...Ft.questions.attachment,...ko}}},ar={...Mr,questions:{...Mr.questions,attachment:{...Mr.questions.attachment,title:"tl",previewSrc:"pws"}}};var hd={name:"n",color:"c",opacity:"o"},gd={key:"k",content:{_:"C",...de,...sr},meta:{_:"m",...hd}},yd={colsMap:G({_:"cM",...gd})},Ma={key:"k",type:"t",alignment:"a",colsOrder:"cO",rowsOrder:"rO",rowsMap:G({_:"rM",...yd}),meta:{_:"m",isHeaderColumnFrozen:"iH"}};var Pa={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:G({_:"B",...de,...sr,...Re,...Be,...Ft})}},_d={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Pa}},Cd={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Pa}},Na={intro:{_:"i",..._d},chapters:{_:"c",order:{_:"o",length:"l"},blocks:G({_:"B",...Cd})}},Eo={main:{_:"m",navigationType:"nT",numberingEnabled:"nE",nextButtonEnabled:"nbE",copyingEnabled:"cE"},design:{_:"d",accentColor:"aC",headerFont:"hF",contentFont:"cF"}};var Fa={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:G({_:"B",...de,...Re,...Be,...wo,...Ft})}},xd={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Fa}},Sd={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Fa}},$a={intro:{_:"i",...xd},chapters:{_:"c",order:{_:"o",length:"l"},blocks:G({_:"B",...Sd})}},bo=Eo;var La={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:G({_:"B",...de,...Re,...Be,...Ct,...Mr})}},kd={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...La}},wd={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...La}},Ka={intro:{_:"i",...kd},chapters:{_:"c",order:{_:"o",length:"l"},blocks:G({_:"B",...wd})}},vo=bo;var Ha={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:G({_:"B",...de,...Re,...Be,...Ct,...ar})}},Ed={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Ha}},bd={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Ha}},Va={intro:{_:"i",...Ed},chapters:{_:"c",order:{_:"o",length:"l"},blocks:G({_:"B",...bd})}},To=vo;var Ua={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:G({_:"B",...de,...Re,...Be,...Ct,...ar,...So})}},vd={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Ua}},Td={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Ua}},Wa={intro:{_:"i",...vd},chapters:{_:"c",order:{_:"o",length:"l"},blocks:G({_:"B",...Td})}},Ro=To;var za={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:G({_:"B",...de,...Re,...Be,...Ct,...ar,...So,...Ma})}},Rd={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...za}},Bd={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...za}},Bo={intro:{_:"i",...Rd},chapters:{_:"c",order:{_:"o",length:"l"},blocks:G({_:"B",...Bd})}},Pr=Ro;var Ga=Bo,Qa={...Pr,main:{...Pr.main,longreadType:"lT"}};function Ad(e){switch(e){case 4:return Eo;case 5:return bo;case 6:return vo;case 7:return To;case 8:return Ro;case 9:return Pr;case 10:return Qa;default:throw Error(`cannot decode json document with version ${e}`)}}function Ya(e,t){let r=Ad(t);return Nt(e,r,[])}var Do=class{static create({itemKey:t,captionSelected:r}){return{collageSelectedItemKey:t||"",collageItemCaptionSelected:r||!1}}};var Ao=class{static create(t={}){return{noteTextSelected:t.noteTextSelected||!1}}static textSelected(t){return t.customSelection&&t.customSelection.noteTextSelected}};var De=class{static createCellSelection(t){return{type:"cell",cellKey:t.cellKey,rowKey:t.rowKey,colKey:t.colKey}}static createRowSelection(t){return{type:"row",rowKey:t.rowKey}}static createColumnSelection(t){return{type:"column",colKey:t.columnKey}}static createTableSelection(){return{type:"table"}}static isCellSelected(t){return t.customSelection&&t.customSelection.type==="cell"}static isColumnSelected(t){return t.customSelection&&t.customSelection.type==="column"}static isRowSelected(t){return t.customSelection&&t.customSelection.type==="row"}static isTableSelected(t){return t.customSelection&&t.customSelection.type==="table"}};var ze={isCollapsed(e){return e.startKey==e.endKey&&e.startOffset==e.endOffset},isEqual(e,t){return e==t?!0:!e||!t?!1:e.startKey==t.startKey&&e.startOffset==t.startOffset&&e.endKey==t.endKey&&e.endOffset==t.endOffset&&e.isBackward==t.isBackward&&JSON.stringify(e.customSelection)==JSON.stringify(t.customSelection)},create(e={}){return{startKey:e.startKey||"",startOffset:e.startOffset||0,endKey:e.endKey||"",endOffset:e.endOffset||0,isBackward:e.isBackward||!1,customSelection:e.customSelection||null}},createCollapsed({key:e,offset:t,customSelection:r}){return ze.create({startKey:e,startOffset:t,endKey:e,endOffset:t,customSelection:r})},createAttachmentBlockSelection(e){return ze.create({startKey:e,startOffset:0,endKey:e,endOffset:0})},createMediaBlockSelection(e){return ze.create({startKey:e,startOffset:0,endKey:e,endOffset:0,customSelection:{captionSelected:!1}})},createCollageBlockSelection(e){return ze.create({startKey:e,startOffset:0,endKey:e,endOffset:0,customSelection:Do.create({})})},createNoteBlockSelection(e){return ze.create({startKey:e,startOffset:0,endKey:e,endOffset:0,customSelection:Ao.create()})},createTableBlockSelection(e){return ze.create({startKey:e,startOffset:0,endKey:e,endOffset:0,customSelection:De.createTableSelection()})},createTableRowSelection(e,t){return ze.create({startKey:e,startOffset:0,endKey:e,endOffset:0,customSelection:De.createRowSelection({rowKey:t})})},createTableColumnSelection(e,t){return ze.create({startKey:e,startOffset:0,endKey:e,endOffset:0,customSelection:De.createColumnSelection({columnKey:t})})}};var qa={},Id=Math.pow(2,24);function Ss(){let e;for(;e===void 0||qa.hasOwnProperty(e)||!isNaN(+e);)e=Math.floor(Math.random()*Id).toString(32);return qa[e]=!0,e}var xs=new WeakMap;function Xa(e){return xs.has(e)||xs.set(e,Ss()),xs.get(e)}function v(){return Ss()}var p={PARAGRAPH:"p",IMAGE:"i",COLLAGE:"c",EMBED:"e",EXERCISE:"E",ATTACHMENT:"a",NOTE:"n",TABLE:"t"};var $t={create({key:e,fileName:t,fileExtension:r,fileSize:o,src:n,isLoading:s}){return{key:e||v(),type:p.ATTACHMENT,fileName:t||"",fileExtension:r||"pdf",fileSize:o||0,src:n,isLoading:s||!1}},toAttachmentBlock(e){return e&&e.type===p.ATTACHMENT?e:null},getBlockType(e){return"attachment"}};var cr={getBlockByIndex(e,t){return nr(e,t)},getFirstBlock(e){return m(ka(e))},getLastBlock(e){return m(wa(e))},getBlockBefore(e,t){return Ea(e,t)},getBlockAfter(e,t){return ba(e,t)},forEach(e,t){va(e,t)},getBlocksArray(e){return e.order.map(t=>e.blocks[t])},hasBlock(e,t){return e.blocks.hasOwnProperty(t)}};function $(e){return!e||e.type!==p.PARAGRAPH?null:e}var Od="collage",pe={create({key:e,images:t=[],alignment:r}){let o=e||v(),n=t.map(s=>({...s,parentCollageKey:o}));return{key:o,type:p.COLLAGE,images:n,alignment:r||"inner"}},clone(e){let t=v();return{...e,key:t,images:e.images.map(r=>({...r,key:v(),parentCollageKey:t}))}},toCollageBlock(e){return e&&e.type===p.COLLAGE?e:null},getBlockType(e){return Od},isCollageBlock(e){return!!e&&e.type===p.COLLAGE},getCollagedImage(e,t){return e.images.find(r=>r.key===t)||null},getCollagedImageIndex(e,t){return e.images.findIndex(r=>r.key===t)}};var Nr={create(e={}){return{type:"",key:e.key||v(),alignment:e.alignment||"inner"}},toAbstractMediaBlock(e){let t=e;return!e||t.type!==p.EMBED&&t.type!==p.IMAGE&&t.type!==p.COLLAGE&&t.type!==p.TABLE?null:t},getBlockType(e){return e.type===p.COLLAGE?`collage-${e.alignment}`:`media-${e.alignment}`}};function ja(e){return e.length===2}function Za({offset:e,textLength:t,getCharacterByIndex:r}){let o=0,n=0;for(;o<t;++o,++n)if(ja(r(o))&&++n,n>=e)return o;return o}function Ja({offset:e,textLength:t,getCharacterByIndex:r}){let o=0,n=0;for(;o<t;++o,++n){if(o>=e)return n;ja(r(o))&&++n}return n}var ec=["ul","ol"],tc=["blockquote","pullquote"],rc=["header","subheader"],Md=[...rc,...tc,...ec,"text"];function ks(e,t){return e[t].meta.url}var D={create(e={}){!1&&m(e.viewType==null||Md.includes(e.viewType));let t=e.characters||[];return typeof t=="string"&&(t=D.createCharacters(t,K.create())),e.viewType=="ol"?{type:p.PARAGRAPH,key:e.key||v(),viewType:e.viewType,textAlign:e.textAlign||"left",characters:t,isOrderedListFirstItem:e.isOrderedListFirstItem||!1}:{type:p.PARAGRAPH,key:e.key||v(),viewType:e.viewType||"text",textAlign:e.textAlign||"left",characters:t}},createCharacters(e,t){return[...e].map(r=>({text:r,meta:t}))},extendHyperlinksSelection(e,t,r=e.characters.length){let{characters:o}=e,n=ks.bind(null,o),s=n(t);if(s)for(;t>0&&s==n(t-1);)--t;let i=n(r-1);if(i)for(;r<o.length&&i==n(r);)++r;return{start:t,end:r}},hasHyperlink(e,t,r=e.characters.length){for(let o=t;o<r;++o)if(ks(e.characters,o))return!0;return!1},getHyperlinksInfo(e){let t=[],r=null;for(let o=0;o<e.length;++o){let n=ks(e,o);r&&r.url!=n&&(t.push({start:r.start,end:o,url:r.url}),r=null),n&&!r&&(r={start:o,url:n})}return r&&t.push({start:r.start,end:e.length,url:r.url}),t},getParagraphText(e){return e.characters.reduce((t,r)=>t+r.text,"")},getCharacters(e){return e.characters.map(t=>t.text)},getWordStartIndex(e,t){return Ji(D.getParagraphText(e),t)},getWordEndIndex(e,t){return ea(D.getParagraphText(e),t)},isList(e){let t=$(e);return!!t&&ec.includes(t.viewType)},isQuote(e){let t=$(e);return!!t&&tc.includes(t.viewType)},isHeading(e){let t=$(e);return!!t&&rc.includes(t.viewType)},isEmptyParagraph(e){let t=$(e);return!!t&&t.characters.length==0},getTextRuns(e,t){t||(t=n=>n);let r=e.characters;if(r.length==0)return[];let o=[{text:r[0].text,styles:t(r[0].meta),isLast:!1}];for(let n=1;n<r.length;++n){let s=r[n],i=t(s.meta),a=o.length-1,c=o[a].styles;K.compare(i,c)?o[a].text+=s.text:o.push({text:s.text,styles:i,isLast:!1})}return o[o.length-1].isLast=!0,o},convertBrowserToModelOffset(e,t){return Za({offset:t,textLength:e.characters.length,getCharacterByIndex:r=>e.characters[r].text})},convertModelToBrowserOffset(e,t){return Ja({offset:t,textLength:e.characters.length,getCharacterByIndex:r=>e.characters[r].text})}};var Ge={create(e={}){let t=e.characters||[];return typeof t=="string"&&(t=D.createCharacters(t,K.create())),{...Nr.create(e),width:e.width||0,height:e.height||0,characters:t}},toMediaBlock(e){return!e||e.type!==p.IMAGE&&e.type!==p.EMBED?null:e},getBlockType(e){return`media-${e.alignment}`}};var st={create(e={}){let t=e.characters||[];return typeof t=="string"&&(t=D.createCharacters(t,K.create())),{type:p.NOTE,key:e.key||v(),noteType:e.noteType||"info",characters:t}},toNoteBlock(e){return e&&e.type===p.NOTE?e:null},getBlockType(e){return"note"}};var lr={create(e){return{...D.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign,isOrderedListFirstItem:e.isOrderedListFirstItem}),tableKey:e.tableKey,rowKey:e.rowKey,colKey:e.colKey,cellKey:e.cellKey}},toCellParagraph(e){if(e&&e.type===p.PARAGRAPH){let t=e;if(t.tableKey&&t.rowKey&&t.colKey&&t.cellKey)return e}return null}};function Pd(e,t){let r={};for(let o of e){r[o]={colsMap:{}};let s=r[o].colsMap;for(let i of t)s[i]=W.createCell()}return r}function oc(e,t,r){let o=v();e.rowsOrder.splice(t,0,o);let n={};for(let s of e.colsOrder)n[s]=W.createCell({meta:r?r(s):[]});e.rowsMap[o]={colsMap:n}}function Nd(e,t,r){if(t.length!==e.rowsOrder.length)throw new Error("new rows count must be equal to original table rows count");let o={};for(let n=0;n<e.rowsOrder.length;n++){let s=t[n],i=e.rowsOrder[n];o[s]={colsMap:sc(e,i,r)}}return o}function sc(e,t,r){if(r.length!==e.colsOrder.length)throw new Error("new cols count must be equal to original table cols count");let o={};for(let n=0;n<e.colsOrder.length;n++){let s=r[n],i=e.colsOrder[n],a=e.rowsMap[t].colsMap[i];o[s]=W.cloneCell(a)}return o}function nc(e,t,r){let o=v();e.colsOrder.splice(t,0,o);for(let n of e.rowsOrder){let s=e.rowsMap[n];s.colsMap[o]=W.createCell({meta:r?r(n):[]})}return o}var W={create(e={}){let t=e.rowsOrder||[v(),v(),v()],r=e.colsOrder||[v(),v(),v()];if(!r.length||!t.length)throw new Error("try to create table with 0 length of rowsCount or colsCount");return{type:p.TABLE,key:e.key||v(),alignment:"inner",rowsOrder:t,colsOrder:r,rowsMap:e.rowsMap||Pd(t,r),meta:[]}},addColumnBefore(e,t){let r=e.colsOrder.indexOf(t);return nc(e,r,o=>this.getCell(e,o,t).meta)},addColumnAfter(e,t){let r=e.colsOrder.indexOf(t);return nc(e,r+1,o=>this.getCell(e,o,t).meta)},addLastColumn(e){let t=e.colsOrder[e.colsOrder.length-1];this.addColumnAfter(e,t)},addRowBefore(e,t){let r=e.rowsOrder.indexOf(t);oc(e,r,o=>this.getCell(e,t,o).meta)},addRowAfter(e,t){let r=e.rowsOrder.indexOf(t)+1;oc(e,r,o=>this.getCell(e,t,o).meta)},addLastRow(e){let t=e.rowsOrder[e.rowsOrder.length-1];this.addRowAfter(e,t)},duplicateRow(e,t){let r=e.rowsOrder.indexOf(t)+1,o=v();return e.rowsMap[o]={colsMap:sc(e,t,e.colsOrder)},e.rowsOrder.splice(r,0,o),o},moveColumnLeft(e,t){let r=e.colsOrder.indexOf(t);if(r<=0)return;let o=r-1,n=e.colsOrder;[n[r],n[o]]=[n[o],n[r]]},moveColumnRight(e,t){let r=e.colsOrder.indexOf(t);if(r>=e.colsOrder.length-1)return;let o=r+1,n=e.colsOrder;[n[r],n[o]]=[n[o],n[r]]},removeColumn(e,t){e.colsOrder=e.colsOrder.filter(r=>r!==t),e.rowsOrder.forEach(r=>{delete e.rowsMap[r].colsMap[t]})},moveRowUp(e,t){let r=e.rowsOrder.indexOf(t);if(r<=0)return;let o=r-1,n=e.rowsOrder;[n[r],n[o]]=[n[o],n[r]]},moveRowDown(e,t){let r=e.rowsOrder.indexOf(t);if(r>=e.rowsOrder.length-1)return;let o=r+1,n=e.rowsOrder;[n[r],n[o]]=[n[o],n[r]]},duplicateColumn(e,t){let r=e.colsOrder.indexOf(t)+1,o=v();for(let n of e.rowsOrder){let s=e.rowsMap[n],i=s.colsMap[t];s.colsMap[o]=W.cloneCell(i)}return e.colsOrder.splice(r,0,o),o},removeRow(e,t){e.rowsOrder=e.rowsOrder.filter(r=>r!==t),delete e.rowsMap[t]},createCell(e={}){return{key:e.key||v(),content:e.paragraph||D.create(),meta:e.meta||[]}},toTableBlock(e){return e&&e.type===p.TABLE?e:null},getBlockType(e){return"table"},getCell(e,t,r){return e.rowsMap[t].colsMap[r]},getCellParagraph(e,t,r){let o=W.getCell(e,t,r);return $(o.content)},cloneTable(e){let t=v(),r=[];for(let s=0;s<e.rowsOrder.length;s++)r.push(v());let o=[];for(let s=0;s<e.colsOrder.length;s++)o.push(v());let n=Nd(e,r,o);return{type:p.TABLE,key:t,alignment:e.alignment,rowsOrder:r,colsOrder:o,rowsMap:n,meta:e.meta}},cloneCell(e){return{key:v(),content:{...e.content,key:v()},meta:e.meta}},addCellMeta(e,t){let r=e.meta.findIndex(o=>o.name===t.name);r>=0?e.meta[r]=t:e.meta.push(t)}};function Ke(e,t){let r=$(e);if(r)return r;let o=Ge.toMediaBlock(e);if(o)return o;let n=st.toNoteBlock(e);if(n)return n;let s=pe.toCollageBlock(e);if(s&&t&&t.customSelection&&t.customSelection.collageItemCaptionSelected){let a=m(t.customSelection),c=pe.getCollagedImage(s,a.collageSelectedItemKey);if(c)return c}let i=W.toTableBlock(e);if(i&&t&&De.isCellSelected(t)){let a=t.customSelection,c=W.getCell(i,a.rowKey,a.colKey),l=$(c.content);if(l)return lr.create({...l,tableKey:i.key,colKey:a.colKey,rowKey:a.rowKey,cellKey:c.key})}return null}function ws(e){return Fd(e)||$d(e)}function Fd({contentState:e,selection:t}){let{startKey:r,customSelection:o}=t;return!!Ge.toMediaBlock(e.blockMap.blocks[r])&&!!o&&o.captionSelected}function $d({contentState:e,selection:t}){let{startKey:r,customSelection:o}=t;return!!pe.toCollageBlock(e.blockMap.blocks[r])&&!!o&&o.collageItemCaptionSelected}var Io=class{static create(t){return{captionSelected:t}}};var L={createBlocks(e){let t={order:[],blocks:{}};for(let r of e)t.order.push(r.key),t.blocks[r.key]=r;return t},cloneBlock(e){let t=pe.toCollageBlock(e);if(t)return pe.clone(t);let r=W.toTableBlock(e);return r?W.cloneTable(r):{...e,key:v()}},replaceBlocksFragment(e,t,r,o=[]){let n=e.order.indexOf(t),s=e.order.indexOf(r);if(n<0||s<0){d.warn("incorrect block keys");return}let i=[...e.order],a=i.splice(n,s-n+1);for(let l of a)delete e.blocks[l];let c=[];for(let l of o)c.push(l.key),e.blocks[l.key]=l;i.splice(n,0,...c),e.order.splice(0,e.order.length,...i)},replaceBlockWithFragment(e,t,r){return L.replaceBlocksFragment(e,t,t,r)},updateBlockWithKey(e,t,r){let o=e.blockMap.blocks[t];!o||Gi(o,r)},updateCollageBlockWithKey(e,t,r){let o=pe.toCollageBlock(e.blockMap.blocks[t]);if(o){let n=pe.getCollagedImage(o,r.key);if(!n)return;for(let s of Object.keys(r))n[s]=r[s]}},removeBlocks(e,t){for(let r of t)L.replaceBlockWithFragment(e.blockMap,r)},create(e=[D.create()]){return{blockMap:L.createBlocks(e)}},createFromBlockMap(e){return e},getDefaultSelection(e){let t=e.blockMap.order[0],r=e.blockMap.blocks[t],o=null;return Ge.toMediaBlock(r)&&(o=Io.create(!1)),ze.create({startKey:r.key,startOffset:0,endKey:r.key,endOffset:0,customSelection:o})},getAllBlocksFromSelection(e,t){let{startKey:r,endKey:o}=t,{order:n,blocks:s}=e.blockMap,i=n.indexOf(r),a=n.indexOf(o);return i<0||a<0?(d.warn("incorrect selection"),[]):n.slice(i,a+1).map(c=>s[c])},getParagraphsFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(r=>!!Ke(r,t))},getAllTableCellsCharactersBlocks(e){let t=[];return e.rowsOrder.forEach(r=>{e.colsOrder.forEach(o=>{let n=W.getCell(e,r,o),s=n&&$(n.content);s&&t.push(lr.create({...s,tableKey:e.key,colKey:o,rowKey:r,cellKey:n.key}))})}),t},getTableRowCellsCharactersBlocks(e,t){let r=[];return e.colsOrder.forEach(o=>{let n=W.getCell(e,t,o),s=n&&$(n.content);s&&r.push(lr.create({...s,tableKey:e.key,colKey:o,rowKey:t,cellKey:n.key}))}),r},getTableColumnCellsCharactersBlocks(e,t){let r=[];return e.rowsOrder.forEach(o=>{let n=W.getCell(e,o,t),s=n&&$(n.content);s&&r.push(lr.create({...s,tableKey:e.key,colKey:t,rowKey:o,cellKey:n.key}))}),r},getTableCharactersBlocks(e,t){if(De.isCellSelected(t))return[m(Ke(e,t))];if(De.isRowSelected(t)){let{rowKey:r}=t.customSelection;return L.getTableRowCellsCharactersBlocks(e,r)}if(De.isColumnSelected(t)){let{colKey:r}=t.customSelection;return L.getTableColumnCellsCharactersBlocks(e,r)}return L.getAllTableCellsCharactersBlocks(e)},getCharactersBlockFromSelection(e,t){let r=L.getAllBlocksFromSelection(e,t).filter(n=>!!Ke(n,t)||!!pe.toCollageBlock(n)||!!W.toTableBlock(n)),o=[];for(let n=0;n<r.length;n++){let s=pe.toCollageBlock(r[n]);if(s&&ws({contentState:e,selection:t})){let c,l=t.customSelection.collageSelectedItemKey,u=pe.getCollagedImage(s,l);u&&(c=Ke(u)),o.push(c||r[n]);continue}if(s&&!ws({contentState:e,selection:t})){s.images.forEach(c=>{let l=m(Ke(c));o.push(l)});continue}let i=st.toNoteBlock(r[n]);if(i){let c=m(Ke(i));o.push(c);continue}let a=W.toTableBlock(r[n]);if(a){o.push(...this.getTableCharactersBlocks(a,t));continue}o.push(r[n])}return o},getMediaBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(r=>!!Ge.toMediaBlock(r))},getCollageBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(r=>!!pe.toCollageBlock(r))},getTableBlockFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(r=>!!W.toTableBlock(r))},getAttachmentBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(r=>!!$t.toAttachmentBlock(r))},getNoteBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(r=>!!st.toNoteBlock(r))},getTableBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(r=>!!W.toTableBlock(r))},getOnlyParagraphsFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(r=>!!$(r))},getConvertableBlocksFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(r=>!!st.toNoteBlock(r)||$(r))},getBlockBefore(e,t){let{order:r,blocks:o}=e.blockMap,n=r.indexOf(t);if(n<0)return d.warn("incorrect key"),null;if(n==0)return null;let s=r[n-1];return o[s]},getBlockAfter(e,t){let r=e.blockMap.order,o=e.blockMap.blocks,n=r.indexOf(t);if(n<0)return d.warn("incorrect key"),null;if(n==r.length-1)return null;let s=r[n+1];return o[s]},getExercisesFromSelection(e,t){return L.getAllBlocksFromSelection(e,t).filter(n=>!!it.toExerciseBlock(n))},atLeastOneNotEmptyCharactersBlockSelected(e,t){return L.getCharactersBlockFromSelection(e,t).some(r=>r.characters.length>0)},isOneNoteBlockSelected(e,t){return L.getNoteBlocksFromSelection(e,t).length===1},convertBrowserToModelSelection(e,t){let r=e.blockMap.blocks,o=Ke(r[t.startKey]),n=o?D.convertBrowserToModelOffset(o,t.startOffset):t.startOffset,s=Ke(e.blockMap.blocks[t.endKey]),i=s?D.convertBrowserToModelOffset(s,t.endOffset):t.endOffset;return{...t,startOffset:n,endOffset:i}},convertModelToBrowserSelection(e,t){let r=Ke(e.blockMap.blocks[t.startKey],t),o=r?D.convertModelToBrowserOffset(r,t.startOffset):t.startOffset,n=Ke(e.blockMap.blocks[t.endKey],t),s=n?D.convertModelToBrowserOffset(n,t.endOffset):t.endOffset;return{...t,startOffset:o,endOffset:s}},isValidSelection(e,t){return[t.startKey,t.endKey].every(r=>cr.hasBlock(e.blockMap,r))}};var ic={create({type:e,width:t,height:r,src:o,crop:n,title:s,previewSrc:i}){let a={type:e,width:t,height:r,src:o};return n&&(a={...a,crop:n}),s&&(a={...a,title:s}),i&&(a={...a,previewSrc:i}),a}};function Oo(e){let t=[];for(let r of e)t.push({text:r,meta:K.create()});return t}function Mo(e){let t=$(or(e.blockMap));return t?D.getParagraphText(t):(d.error("first block is not text pararaph"),"")}var ur={create(e={}){let{key:t=v(),correct:r=!1,text:o=[]}=e;return{key:t,correct:r,content:L.create([D.create({characters:o})])}},getChoiceText(e){return m(Mo(e.content))}};var Po={create(e={}){let{choices:t=[ur.create({correct:!0,text:Oo(`${E("Roll.Exercise.Question.Content.PossibleAnswer")} 1`)}),ur.create({text:Oo(`${E("Roll.Exercise.Question.Content.PossibleAnswer")} 2`)}),ur.create({text:Oo(`${E("Roll.Exercise.Question.Content.PossibleAnswer")} 3`)})]}=e;return{choices:t}}};var No={create(e={}){let{key:t=v(),text:r=""}=e;return{key:t,text:r}}};var Fo={create(e={}){let{caseSensitive:t=!1,answers:r=[No.create({text:`${E("Roll.Exercise.TypeIn.Answer")} 1`})]}=e;return{caseSensitive:t,answers:r}}};var Es={ANSWERED:"answered",CORRECT_INCORRECT:"correctIncorrect"};var xt={create(e={}){let{type:t=Es.CORRECT_INCORRECT,answered:r=[],correct:o=[],incorrect:n=[]}=e;return{type:t,answered:L.create([D.create({characters:r})]),correct:L.create([D.create({characters:o})]),incorrect:L.create([D.create({characters:n})])}},getFeedbackText(e,t){let r=e.type==Es.ANSWERED?e.answered:t?e.correct:e.incorrect,o=$(or(r.blockMap));return m(o)}};function Ld(e){switch(e){case"mc":case"mr":return Po.create();case"ti":return Fo.create();default:throw A(e),new Error(`Unknown question type: ${e}`)}}var $o={create(e){let{key:t=v(),type:r,attachment:o=null,description:n="",content:s=Ld(e.type),feedback:i=xt.create()}=e;return{key:t,type:r,attachment:o,description:L.create([D.create({characters:n})]),content:s,feedback:i}},getDescriptionText(e){return Mo(e.description)}};var Lo={create(e={}){let{includeInProgress:t=!1,shuffleAnswers:r=!1,showCorrectAnswers:o=!0}=e;return{includeInProgress:t,shuffleAnswers:r,showCorrectAnswers:o}}};var it={create(e={}){let{key:t=v(),settings:r=Lo.create(),questions:o=[$o.create({type:"mc"})]}=e;return{key:t,type:p.EXERCISE,settings:r,questions:o}},toExerciseBlock(e){return e&&e.type===p.EXERCISE?e:null},getBlockType(e){return"exercise"}};function Kd(e){switch(e){case 4:return Na;case 5:return $a;case 6:return Ka;case 7:return Va;case 8:return Wa;case 9:return Bo;case 10:return Ga;default:throw Error(`cannot decode json document with version ${e}`)}}function ac(e,t){let r=Kd(t),o=Nt(e,r,[]);return eo(o,Oa)}var cc=protobuf.Type,Fr=protobuf.Field,Hd=protobuf.Root;var Ko={string:"string",int:"int32",float:"float",bool:"bool"},Vd=0,he={String:e=>k(e,Ko.string),Int:e=>k(e,Ko.int),Bool:e=>k(e,Ko.bool),Float:e=>k(e,Ko.float)},Ud=new Hd;function _(e,t){t=t||`Type${++Vd}`;let r=new cc(t);for(let o of Object.keys(e)){let n=e[o],s=n.ref;if(typeof s=="string")r=r.add(new Fr(o,n.id,s,n.rule));else if(s instanceof cc){let i=s;r=r.add(new Fr(o,n.id,i.name,n.rule))}else{let i=_(s);r=r.add(new Fr(o,n.id,i.name,n.rule))}}return Ud.add(r),r}function k(e,t,r="required"){return{id:e,ref:t,rule:r}}function B(e,t){return typeof t=="function"&&(t=t(e).ref),k(e,t,"repeated")}function P(e,t){return typeof t=="function"&&(t=t(e).ref),k(e,t,"optional")}function Se(e){let t="type",r=_({}),o=_({}).add(new Fr(t,0,"string","required"));for(let n of Object.keys(e))e[n]=e[n].add(new Fr(t,0,"string","required"));return r.fromObject=function(n){return e[n[t]].fromObject(n)},r.toObject=function(n){return e[n[t]].toObject(n)},r.encode=function(n,s){return e[n[t]].encode(n,s)},r.decode=function(n,...s){if(n instanceof protobuf.Reader){let i=n.pos,a=o.decode(n,...s),c=e[a[t]];return n.pos=i,c.decode(n,...s)}throw new Error("top level union is not supported")},r.verify=function(n){let s=e[n[t]];return s?s.verify(n):`unknown type ${n[t]}`},r}var Qe={ACCENT_COLOR:"ACCENT_COLOR",PLAYER_MAIN_FONT:"PLAYER_MAIN_FONT",CONTENT_FONT:"CONTENT_FONT"};var{String:be,Int:St,Bool:$r}=he,Wd=_({start:St(1),end:St(2),style:be(3)}),zd=_({start:St(1),end:St(2),url:be(3)}),Lt=_({text:be(1),inlineStyleRanges:B(2,Wd),urls:B(3,zd)}),Gd=_({src:be(1),width:St(2),height:St(3)}),Qd=_({src:be(1),width:St(2),height:St(3)}),bs=Se({i:Qd,e:Gd}),lc=_({key:be(1),text:k(2,Lt),correct:$r(3)}),Yd=_({choices:B(1,lc)}),qd=_({choices:B(1,lc)}),Xd=_({key:be(1),text:be(2)}),jd=_({caseSensitive:$r(1),answers:B(2,Xd)}),vs=_({type:be(1),correct:k(2,Lt),incorrect:k(3,Lt),answered:k(4,Lt)}),Zd=_({includeInProgress:$r(1),shuffleAnswers:$r(2),showCorrectAnswers:$r(3)}),Jd=_({key:be(1),description:k(2,Lt),attachment:P(3,bs),content:k(4,Yd),feedback:k(5,vs)}),ep=_({key:be(1),description:k(2,Lt),attachment:P(3,bs),content:k(4,qd),feedback:k(5,vs)}),tp=_({key:be(1),description:k(2,Lt),attachment:P(3,bs),content:k(4,jd),feedback:k(5,vs)}),rp=Se({mc:Jd,mr:ep,ti:tp}),uc=_({key:be(1),settings:k(2,Zd),questions:B(3,rp)});var{String:te,Int:Ye,Float:op}=he,Kt=_({start:Ye(1),end:Ye(2),url:te(3)}),Ts=_({start:Ye(1),end:Ye(2),style:te(3)}),np=_({key:te(1),text:te(2),viewType:te(3),inlineStyleRanges:B(4,Ts),urls:B(5,Kt)}),sp=_({key:te(1),src:te(2),width:Ye(3),height:Ye(4),alignment:te(5),text:te(6),inlineStyleRanges:B(7,Ts),urls:B(8,Kt)}),ip=_({key:te(1),src:te(2),width:Ye(3),height:Ye(4),alignment:te(5),text:te(6),inlineStyleRanges:B(7,Ts),urls:B(8,Kt)}),mc=Se({[p.PARAGRAPH]:np,[p.IMAGE]:sp,[p.EMBED]:ip,[p.EXERCISE]:uc}),fc=_({intro:k(1,{kicker:te(1),title:te(2),coverSrc:P(3,te),coverWidth:P(4,Ye),coverHeight:P(5,Ye),blocks:B(6,mc),coverColor:P(7,te),coverOpacity:P(8,op)}),chapters:B(2,{key:te(1),title:te(2),blocks:B(3,mc)})});var{String:Ht,Bool:Ho}=he,ap=_({content:k(1,fc),publishSettings:k(2,{navigationType:Ht(1),searchEnabled:Ho(2),numberingEnabled:Ho(3),nextButtonEnabled:Ho(4),copyingEnabled:P(6,Ho),fonts:k(5,{[Le.TOOLTIP]:Ht(1),[Le.PLAYER_MAIN]:Ht(2),[Le.CONTENT]:Ht(3)})}),cssReplacements:k(3,{[Qe.ACCENT_COLOR]:Ht(1),[Qe.CONTENT_FONT]:Ht(2),[Qe.PLAYER_MAIN_FONT]:Ht(3)})}),Vo=new yt(ap);var dc=Vo;var{String:ke,Int:at,Bool:Lr,Float:cp}=he,lp=_({start:at(1),end:at(2),style:k(3,{name:ke(1),size:P(2,at),color:P(3,ke),opacity:P(4,cp)})}),up=_({start:at(1),end:at(2),url:ke(3)}),Vt=_({text:ke(1),inlineStyleRanges:B(2,lp),urls:B(3,up)}),mp=_({src:ke(1),width:at(2),height:at(3)}),fp=_({src:ke(1),width:at(2),height:at(3)}),Rs=Se({i:fp,e:mp}),pc=_({key:ke(1),text:k(2,Vt),correct:Lr(3)}),dp=_({choices:B(1,pc)}),pp=_({choices:B(1,pc)}),hp=_({key:ke(1),text:ke(2)}),gp=_({caseSensitive:Lr(1),answers:B(2,hp)}),Bs=_({type:ke(1),correct:k(2,Vt),incorrect:k(3,Vt),answered:k(4,Vt)}),yp=_({includeInProgress:Lr(1),shuffleAnswers:Lr(2),showCorrectAnswers:Lr(3)}),_p=_({key:ke(1),description:k(2,Vt),attachment:P(3,Rs),content:k(4,dp),feedback:k(5,Bs)}),Cp=_({key:ke(1),description:k(2,Vt),attachment:P(3,Rs),content:k(4,pp),feedback:k(5,Bs)}),xp=_({key:ke(1),description:k(2,Vt),attachment:P(3,Rs),content:k(4,gp),feedback:k(5,Bs)}),Sp=Se({mc:_p,mr:Cp,ti:xp}),hc=_({key:ke(1),settings:k(2,yp),questions:B(3,Sp)});var{String:Q,Int:qe,Float:yc,Bool:kp}=he,Ds=_({start:qe(1),end:qe(2),style:k(3,{name:Q(1),size:P(2,qe),color:P(3,Q),opacity:P(4,yc)})}),wp=_({key:Q(1),text:Q(2),viewType:Q(3),inlineStyleRanges:B(4,Ds),urls:B(5,Kt),textAlign:P(6,Q),isOrderedListFirstItem:P(7,kp)}),Ep=_({key:Q(1),src:Q(2),width:qe(3),height:qe(4),alignment:Q(5),text:Q(6),inlineStyleRanges:B(7,Ds),urls:B(8,Kt)}),bp=_({key:Q(1),src:Q(2),width:qe(3),height:qe(4),alignment:Q(5),text:Q(6),inlineStyleRanges:B(7,Ds),urls:B(8,Kt)}),vp=_({key:Q(1),fileName:Q(2),fileExtension:Q(3),fileSize:qe(4)}),gc=Se({[p.PARAGRAPH]:wp,[p.IMAGE]:Ep,[p.EMBED]:bp,[p.EXERCISE]:hc,[p.ATTACHMENT]:vp}),_c=_({intro:k(1,{kicker:Q(1),title:Q(2),coverSrc:P(3,Q),coverWidth:P(4,qe),coverHeight:P(5,qe),blocks:B(6,gc),coverColor:P(7,Q),coverOpacity:P(8,yc)}),chapters:B(2,{key:Q(1),title:Q(2),blocks:B(3,gc)})});var{String:Ut,Bool:Uo}=he,Tp=_({content:k(1,_c),publishSettings:k(2,{navigationType:Ut(1),searchEnabled:Uo(2),numberingEnabled:Uo(3),nextButtonEnabled:Uo(4),copyingEnabled:P(6,Uo),fonts:k(5,{[Le.TOOLTIP]:Ut(1),[Le.PLAYER_MAIN]:Ut(2),[Le.CONTENT]:Ut(3)})}),cssReplacements:k(3,{[Qe.ACCENT_COLOR]:Ut(1),[Qe.CONTENT_FONT]:Ut(2),[Qe.PLAYER_MAIN_FONT]:Ut(3)})}),Cc=new yt(Tp);var Wo=class{constructor({initialVersion:t,upgraders:r,fixers:o=[]}){this._initialVersion=t,this._upgraders=new Map,r.forEach((n,s)=>{this._validateUpgrader(t,n,s),this._upgraders.set(n.targetVersion,n.upgradeFn)}),this._fixers=new Map,o.forEach(n=>this._fixers.set(n.targetVersion,n.fixFn))}upgradeDocument(t,r){let o=!1;if(r.from==r.to){let s=this._fixDocument(t,r.to);return{upgradedDocument:s.document,isDocumentFixed:s.fixed}}if(r.from<this._initialVersion||r.to>this._initialVersion+this._upgraders.size)throw new Error;let n=this._fixDocument(t,r.from);t=n.document,o=n.fixed;for(let s=r.from+1;s<=r.to;++s)t=m(this._upgraders.get(s))(t),n=this._fixDocument(t,s),t=n.document,o=o||n.fixed;return{upgradedDocument:t,isDocumentFixed:o}}_fixDocument(t,r){let o=this._fixers.get(r),n={document:t,fixed:!1};return o&&(n=o(t)),{document:n.document,fixed:n.fixed}}_validateUpgrader(t,{targetVersion:r},o){if(t!=r-o-1)throw new Error}};var xc="data-1.bin",Sc="data-1.json";function kc(e){return e.publishSettings.copyingEnabled=!0,e}function kt(e){e.inlineStyleRanges&&e.inlineStyleRanges.forEach(t=>{t.style={name:t.style}}),e.urls&&e.urls.forEach(t=>{let r={start:t.start,end:t.end,style:{name:"underline"}};e.inlineStyleRanges?e.inlineStyleRanges.push(r):e.inlineStyleRanges=[r]})}function Rp(e){kt(e),e.textAlign=e.viewType==="pullquote"?"center":"left"}function As(e){let t=null;e.forEach(r=>{if(r.type===p.PARAGRAPH){Rp(r);let o=r;o.viewType==="ol"&&(!t||t!=="ol")&&(o.isOrderedListFirstItem=!0),t=o.viewType}else if(r.type===p.IMAGE)kt(r),t=null;else if(r.type===p.EMBED)kt(r),t=null;else if(r.type===p.EXERCISE){let o=r;o.questions&&o.questions.forEach(n=>{kt(n.description),(n.type==="mc"||n.type==="mr")&&n.content.choices&&n.content.choices.forEach(s=>kt(s.text)),kt(n.feedback.answered),kt(n.feedback.correct),kt(n.feedback.incorrect)}),t=null}else t=null})}function wc(e){return As(e.content.intro.blocks),e.content.chapters&&e.content.chapters.forEach(t=>{As(t.blocks)}),e}function mr({text:e,inlineStyleRanges:t,urls:r}){let o=K.create(),n=[...e].map(s=>({text:s,meta:o}));return t&&t.forEach(s=>{for(let i=s.start;i<s.end;++i){if(i>=n.length){d.warn("incorrect style ranges");break}n[i].meta=K.applyStyle(n[i].meta,s.style)}}),r&&r.forEach(s=>{for(let i=s.start;i<s.end;++i){if(i>=n.length){d.warn("incorrect url ranges");break}n[i].meta=K.setUrl(n[i].meta,s.url)}}),n}function Ec(e,t=!1){let r=e.questions,o=r?Dp(r,t):[];return it.create({key:t?v():e.key,settings:Bp(e.settings),questions:o})}function Bp(e){return Lo.create({includeInProgress:e.includeInProgress,showCorrectAnswers:e.showCorrectAnswers,shuffleAnswers:e.shuffleAnswers})}function Dp(e,t){return e.map(r=>Ap(r,t))}function Ap(e,t){let r=e.type,o=e.attachment;return $o.create({key:t?v():e.key,type:r,description:Kr(e.description),attachment:o?Ip(o):void 0,content:Mp(r,e.content,t),feedback:Op(e.feedback)})}function Ip(e){let t={crop:e.crop||void 0,title:e.title||void 0,previewSrc:e.previewSrc||void 0};return ic.create({type:e.type,width:e.width,height:e.height,src:e.src,...t})}function Op(e){return xt.create({type:e.type,correct:Kr(e.correct),incorrect:Kr(e.incorrect),answered:Kr(e.answered)})}function Kr(e){return mr({text:e.text,inlineStyleRanges:e.inlineStyleRanges,urls:e.urls})}function Mp(e,t,r){switch(e){case"mc":case"mr":return Pp(t,r);case"ti":return Fp(t,r);default:throw A(e),new Error(`Unknown question type: ${e}`)}}function Pp(e,t){let r=e.choices,o=r?r.map(n=>Np(n,t)):[];return Po.create({choices:o})}function Np(e,t){return ur.create({key:t?v():e.key,text:Kr(e.text),correct:e.correct})}function Fp(e,t){let r=e.answers,o=r?r.map(n=>$p(n,t)):[];return Fo.create({caseSensitive:e.caseSensitive,answers:o})}function $p(e,t){return No.create({key:t?v():e.key,text:e.text})}var zo={create(e={}){return{...Ge.create(e),type:p.EMBED,width:e.width||0,height:e.height||0,src:e.src||"",alignment:e.alignment||"inner"}},toEmbedBlock(e){return e.type!==p.EMBED?null:e}};var Go={create(e={}){return{...Ge.create(e),type:p.IMAGE,src:e.src||"",isBlob:e.isBlob||!1,crop:e.crop||void 0}},toImageBlock(e){return e&&e.type===p.IMAGE?e:null}};function Lp(e){return D.create({key:e.key,viewType:e.viewType,textAlign:e.textAlign,characters:mr({text:e.text,inlineStyleRanges:e.inlineStyleRanges,urls:e.urls}),isOrderedListFirstItem:e.isOrderedListFirstItem})}function Kp(e){let t=e.text||"";return Go.create({key:e.key,characters:mr({text:t,inlineStyleRanges:e.inlineStyleRanges,urls:e.urls}),src:e.src,width:e.width,height:e.height,alignment:e.alignment})}function Hp(e){let t=e.text||"";return zo.create({key:e.key,characters:mr({text:t,inlineStyleRanges:e.inlineStyleRanges||[],urls:e.urls}),src:e.src,width:e.width,height:e.height,alignment:e.alignment})}function Vp(e){return $t.create({key:e.key,fileName:e.fileName,fileSize:e.fileSize,fileExtension:e.fileExtension})}function Up(e){switch(e.type){case p.PARAGRAPH:return Lp(e);case p.IMAGE:return Kp(e);case p.EMBED:return Hp(e);case p.EXERCISE:return Ec(e);case p.ATTACHMENT:return Vp(e)}return d.error(`unknown block type ${e.type}`),null}function bc(e){let t=[];return e.forEach(r=>{let o=Up(r);o&&t.push(o)}),t}function vc(e){let t=bc(e),r={order:[],blocks:{}};for(let o of t)r.order.push(o.key),r.blocks[o.key]=o;return{blockMap:r}}function Wp(e){let t={kicker:e.kicker,title:e.title,coverInfoState:null};return e.coverSrc&&e.coverColor&&e.coverWidth!=null&&e.coverHeight!=null&&e.coverOpacity!=null&&(t.coverInfoState={src:e.coverSrc,width:e.coverWidth,height:e.coverHeight,color:e.coverColor,opacity:e.coverOpacity,isBlob:!1}),{header:{kicker:t.kicker,title:t.title,coverInfoState:t.coverInfoState},contentState:vc(e.blocks)}}function zp(e){return{key:e.key,header:{title:e.title},contentState:vc(e.blocks)}}function Tc(e){let t=Wp(e.intro),r=(e.chapters||[]).map(o=>zp(o));return{intro:t,chapters:Sa(r,o=>o.key)}}function Gp(e,t){return{main:{navigationType:e.navigationType,numberingEnabled:e.numberingEnabled,nextButtonEnabled:e.nextButtonEnabled,copyingEnabled:e.copyingEnabled},design:{accentColor:t[Qe.ACCENT_COLOR],headerFont:e.fonts[Le.PLAYER_MAIN],contentFont:e.fonts[Le.CONTENT]}}}function Rc(e){return{content:Tc(e.content),settings:Gp(e.publishSettings,e.cssReplacements)}}immer.enableAllPlugins();var Qo=immer.produce,_0=immer.applyPatches;!1&&immer.setAutoFreeze(!0);function Bc(e){let t=e.blocks;for(let r of Object.keys(t)){let o=t[r];if(o.type===p.IMAGE){let n=t[r],s={alignment:n.alignment,key:n.key,type:p.COLLAGE,images:[{key:v(),type:n.type,parentCollageKey:n.key,width:n.width,height:n.height,src:n.src,characters:n.characters,isBlob:n.isBlob,alignment:"inner"}]};t[r]=s}else if(o.type===p.EMBED){let n=t[r],s={key:n.key,type:n.type,width:n.width,height:n.height,src:n.src,alignment:n.alignment,characters:n.characters};t[r]=s}else t[r]=o}}function Dc(e){return Qo(e,t=>{Bc(t.intro.contentState.blockMap);for(let r of Object.values(t.chapters.blocks))r&&Bc(r.contentState.blockMap)})}function Ac({content:e,settings:t}){return{content:Dc(e),settings:t}}function Ic(e){return e}function Oc(e){return e}function Mc(e){return e}function Pc(e){return e}function Nc(e){return{...e,main:{...e.main,longreadType:"multiplePage"}}}function Fc(e){return{...e,settings:Nc(e.settings)}}function Is(e,t){return Qp(e,1,t,10,[{targetVersion:2,upgradeFn:kc},{targetVersion:3,upgradeFn:wc},{targetVersion:4,upgradeFn:Rc},{targetVersion:5,upgradeFn:Ac},{targetVersion:6,upgradeFn:Ic},{targetVersion:7,upgradeFn:Oc},{targetVersion:8,upgradeFn:Mc},{targetVersion:9,upgradeFn:Pc},{targetVersion:10,upgradeFn:Fc}]).upgradedDocument}function Qp(e,t,r,o,n){return new Wo({initialVersion:t,upgraders:n}).upgradeDocument(e,{from:r,to:o})}async function Yp(e){let t=await Ba(e,n=>{switch(n){case 1:return Vo;case 2:return dc;case 3:return Cc;default:throw Error("invalid blob document format")}}),{version:r,data:o}=t;return Is(o,r)}function qp(e){return"content"in e&&"settings"in e&&"version"in e?Xp({version:e.version,content:e.content,settings:e.settings}):null}function Xp({version:e,content:t,settings:r}){return Is({content:ac(t,e),settings:Ya(r,e)},e)}async function $c(e){let t;return e instanceof Blob?t=Yp(e):t=qp(e),t}function Lc(e,t){let r;function o(){r&&(clearTimeout(r.id),r=void 0)}function n(){if(r){let a=r.handler;o(),a()}}function s(...a){o();let c=()=>{o(),e(...a)};r={id:setTimeout(c,t),handler:c}}function i(...a){o(),e(...a)}return{isPending:()=>re(r),cancel:o,flush:n,call:s,forceCall:i}}var Wt={FULL:1180,MEDIUM:739};function Yo(){return window.innerWidth>Wt.FULL}function wt(){return window.innerWidth<=Wt.FULL&&window.innerWidth>Wt.MEDIUM}function Xe(){return window.innerWidth<=Wt.MEDIUM}function Hc(e){let t=e.length;if(!t)return 0;let r=0;for(;--t%4>1&&e.charAt(t)==="=";)++r;return Math.ceil(e.length*3)/4-r}var fr=new Array(64),Vc=new Array(123);for(let e=0;e<64;)Vc[fr[e]=e<26?e+65:e<52?e+71:e<62?e-4:e-59|43]=e++;function Uc(e,t=0,r=e.length){var o=null,n=[];let s=0,i=0,a;for(;t<r;){let c=e[t++];switch(i){case 0:n[s++]=fr[c>>2],a=(c&3)<<4,i=1;break;case 1:n[s++]=fr[a|c>>4],a=(c&15)<<2,i=2;break;case 2:n[s++]=fr[a|c>>6],n[s++]=fr[c&63],i=0;break}s>8191&&((o||(o=[])).push(String.fromCharCode(...n)),s=0)}return i&&(n[s++]=fr[a],n[s++]=61,i===1&&(n[s++]=61)),o?(s&&o.push(String.fromCharCode(...n.slice(0,s))),o.join("")):String.fromCharCode(...n.slice(0,s))}var Kc="invalid encoding";function Wc(e,t,r=0){let o=r,n=0,s;for(let i=0;i<e.length;){let a=e.charCodeAt(i++);if(a===61&&n>1)break;if((a=Vc[a])===void 0)throw Error(Kc);switch(n){case 0:s=a,n=1;break;case 1:t[r++]=s<<2|(a&48)>>4,s=a,n=2;break;case 2:t[r++]=(s&15)<<4|(a&60)>>2,s=a,n=3;break;case 3:t[r++]=(s&3)<<6|a,n=0;break}}if(n===1)throw Error(Kc);return r-o}function zc(e,t,r){let{Type:o}=r,n=o.verify(t);if(n)throw new Error(n);let s=o.fromObject(t),i=o.encode(s).finish(),a=new Uint8Array(new Uint32Array([e]).buffer),c=new Uint8Array([...a,...i]);return Uc(c)}function Gc(e,t){let r=new Uint8Array(Hc(e));Wc(e,r);let o=new Uint32Array(r.buffer.slice(0,Uint32Array.BYTES_PER_ELEMENT))[0],n=new Uint8Array(r.buffer.slice(Uint32Array.BYTES_PER_ELEMENT)),{Type:s}=t(o),i=s.decode(n);return s.toObject(i)}function qo(e){return e.type==="mc"||e.type==="mr"?e:null}function Xo(e){return e.type==="ti"?e:null}var Qc={create(e){return{choice:e,selected:!1}}};function jp(e){for(let t=0;t<e.length;++t){let r=Math.floor(Math.random()*t),o=e[t];e[t]=e[r],e[r]=o}}function Zp(e,t){let r=e.map(o=>Qc.create(o));return t&&jp(r),r}var Yc={create(e,t){return{choicesState:Zp(e.choices,t)}}};var qc={create(e){return{typeIn:e,answer:""}}};function Jp(e,t){let r=qo(e);if(r)return Yc.create(r.content,t);let o=Xo(e);if(o)return qc.create(o.content);throw new Error(`Unknown question type: ${e.type}`)}var jo={create(e,t){return{question:e,answered:!1,contentState:Jp(e,t)}}};function eh(e,t){return e.map(r=>jo.create(r,t))}var ge={create(e){let t=eh(e.questions,e.settings.shuffleAnswers),r=t.length>0?0:-1;return{key:e.key,type:p.EXERCISE,exercise:e,questionsState:t,selectedQuestionIndex:r}},toExerciseState(e){return e.type!=p.EXERCISE?null:e},previousQuestionAvailable(e){return e.selectedQuestionIndex>0},nextQuestionAvailable(e){return e.selectedQuestionIndex<e.questionsState.length-1},selectedQuestionState(e){let t=e.selectedQuestionIndex;return t>=0?e.questionsState[t]:null}};function th(e){let t=[];for(let r of e){let o=it.toExerciseBlock(r);o&&t.push(ge.create(o))}return t}var Zo={create(e=[]){return{blockMap:L.createBlocks(e),progress:0,blocksState:th(e)}}};var Jo={create(e={}){return{title:e.title||"",subtitle:e.subtitle||""}}};var Xc={create(e){return{key:e.key||"",header:e.header||Jo.create(),contentState:e.contentState||Zo.create(),index:e.index||0,progress:e.progress||0}}};var jc={create(e={}){return{title:e.title||"",kicker:e.kicker||"",coverInfo:e.coverInfo||null}}};var Zc={create(e){return{key:e.key,header:e.header,contentState:e.contentState,index:-1,progress:e.progress||0}}};function rh(e,t){return(Math.floor(e.progress)+t.reduce((o,n)=>o+Math.floor(n.progress),0))/(t.length+1)}function oh(e,t){let r=t+1;return e[r]||null}var j={sections(e){return[e.intro,...e.chapters]},nextSection(e){return oh(e.chapters,e.selectedSectionIndex)},progress(e){return rh(e.intro,e.chapters)},selectedSection(e){let t=e.selectedSectionIndex;return t==-1?e.intro:e.chapters[t]},create(e,t){return{intro:e,chapters:t,selectedSectionIndex:-1,navigationPanelShowed:!1}}};function Jc(e){let t=[];for(let r of e.blockMap.order)t.push(e.blockMap.blocks[r]);return Zo.create(t)}function nh(e){let t={kicker:e.header.kicker,title:e.header.title,coverInfo:e.header.coverInfoState};return e.header.coverInfoState&&(t.coverInfo={src:e.header.coverInfoState.src,width:e.header.coverInfoState.width,height:e.header.coverInfoState.height,color:e.header.coverInfoState.color,opacity:e.header.coverInfoState.opacity}),Zc.create({key:"intro",header:jc.create(t),contentState:Jc(e.contentState),progress:0})}function sh(e,t){return Xc.create({key:e.key,index:t,header:Jo.create({title:e.header.title}),contentState:Jc(e.contentState)})}function el(e){let t=nh(e.intro),r=e.chapters.order.map((o,n)=>sh(e.chapters.blocks[o],n));return j.create(t,r)}function je(e){return qo(e.question)?e:null}function Ae(e){return Xo(e.question)?e:null}var{Int:ih,Bool:en,String:dr}=he,tl=_({key:dr(1),selected:en(2)}),ah=_({choicesState:B(1,tl)}),ch=_({choicesState:B(1,tl)}),lh=_({answer:dr(1)}),uh=_({key:dr(1),answered:en(2),contentState:k(3,ah)}),mh=_({key:dr(1),answered:en(2),contentState:k(3,ch)}),fh=_({key:dr(1),answered:en(2),contentState:k(3,lh)}),dh=Se({mc:uh,mr:mh,ti:fh}),rl=_({key:dr(1),selectedQuestionIndex:ih(2),questionsState:B(3,dh)});var{Float:ol,Int:ph}=he;var nl=Se({[p.EXERCISE]:rl}),hh=_({intro:k(1,{progress:P(1,ol),blocksState:B(2,nl)}),chapters:B(2,{progress:P(1,ol),blocksState:B(2,nl)}),selectedChapter:P(3,ph)}),tn=new yt(hh);function sl(e,t){let r=t.questionsState;if(!r)return;let o=e.questionsState;for(let s=0;s<o.length;++s){let i=o[s],a=r[s];i.answered=a.answered,gh(i,a.contentState)}let n=t.selectedQuestionIndex;typeof n=="number"&&(e.selectedQuestionIndex=n)}function gh(e,t){let r=je(e);if(r){yh(r.contentState,t);return}let o=Ae(e);if(o){_h(o.contentState,t);return}throw new Error(`Unknown question type: ${e.question.type}`)}function yh(e,t){if(!t.choicesState)return;let r=e.choicesState,o=new Map;for(let s of r)o.set(s.choice.key,s);let n=[];for(let s of t.choicesState){let i=o.get(s.key);i.selected=s.selected,n.push(i)}e.choicesState=n}function _h(e,t){e.answer=t.answer}function al(e,t){let{intro:r,chapters:o,selectedChapter:n}=t;if(r){let{progress:s,blocksState:i}=r;typeof s=="number"&&(e.intro.progress=s),i&&il(e.intro.contentState.blocksState,i)}o&&e.chapters.forEach((s,i)=>{let a=m(o)[i],{progress:c,blocksState:l}=a;c&&(s.progress=c),l&&il(s.contentState.blocksState,l)}),typeof n=="number"&&n>=0&&(e.selectedSectionIndex=n)}function il(e,t){for(let r of t){let o=e.find(s=>r.key==s.key);if(!o)continue;let n=ge.toExerciseState(o);if(n){sl(n,r);continue}throw new Error(`Unexpected block state type: ${o.type}`)}}function cl(e,t){let r=el(e.content);if(t)try{let o=Gc(t,()=>tn);al(r,o)}catch(o){d.warn(o)}return r}function ll(e){let t=e.questionsState,r=e.selectedQuestionIndex;return{key:e.key,type:e.type,selectedQuestionIndex:r,questionsState:Ch(t)}}function Ch(e){return e.map(t=>xh(t))}function xh(e){let t=e.question,r=t.type;return{key:t.key,type:r,answered:e.answered,contentState:Sh(e)}}function Sh(e){let t=je(e);if(t)return kh(t.contentState);let r=Ae(e);if(r)return Eh(r.contentState);throw new Error(`Unknown question type: ${e.question.type}`)}function kh(e){return{choicesState:e.choicesState.map(t=>wh(t))}}function wh(e){return{key:e.choice.key,selected:e.selected}}function Eh(e){return{answer:e.answer}}function ul(e){return e.map(t=>{let r=ge.toExerciseState(t);if(r)return ll(r);throw new Error(`Unexpected block state type: ${t.type}`)})}function ml(e){return{intro:{progress:e.intro.progress,blocksState:ul(e.intro.contentState.blocksState)},chapters:e.chapters.map(t=>({progress:t.progress,blocksState:ul(t.contentState.blocksState)})),selectedChapter:e.selectedSectionIndex}}var rn=class{constructor(t){this.navigationType=t.main.navigationType,this.longreadType=t.main.longreadType,this.searchEnabled=!1,this.numberingEnabled=t.main.numberingEnabled,this.nextButtonEnabled=t.main.nextButtonEnabled,this.copyingEnabled=t.main.copyingEnabled,this.fonts={tooltip:Ir(se.LATO),playerMain:Ir(t.design.headerFont),content:Ir(t.design.contentFont)}}};var Ie=ae.requestAnimationFrame||ae.mozRequestAnimationFrame||ae.webkitRequestAnimationFrame||ae.msRequestAnimationFrame||setTimeout,bh=ae.cancelAnimationFrame||ae.mozCancelAnimationFrame||ae.webkitCancelAnimationFrame||ae.msCancelAnimationFrame||clearTimeout,Tv=ae.requestIdleCallback||vh,Rv=ae.cancelIdleCallback||Th;function vh(e){let t=Date.now();return setTimeout(()=>{e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)}function Th(e){clearTimeout(e)}function fl(e,t){let r=t?e.bind(t):e,o;function n(){bh(o),o=null}function s(){o&&n(),o=Ie(r)}function i(){return o!=null}return{call:s,cancel:n,isSheduled:i}}function ct({reducer:e,timingFn:t,duration:r,abortSignal:o,beforeAnimation:n,afterAnimation:s}){let i=Date.now(),a=!1,c=new Ce;function l(){if(a)return;let f=ot(Date.now()-i,0,r),g=t(f/r);e.animate(g),f<r?Ie(l):(s&&s(),o&&o.remove(u),c.dispatch(!0),Ie(()=>{e.complete()}))}n&&n(),Ie(l);function u(){a=!0,m(o).remove(u),c.dispatch(!1)}return o&&o.add(u),c}function dl(e){return e}function Et(e){return--e*e*e+1}function Os(e,t){return r=>r<t?0:e((r-t)/(1-t))}function on(e){return t=>1-e(t)}function Rh({setScrollValue:e,initialValue:t,delta:r,duration:o}){if(!r)return;ct({duration:o,timingFn:Et,reducer:{animate:s=>{e(t+r*s)},complete:()=>{},changedProperties:[]}})}function pl({element:e,container:t,duration:r,scrollDirection:o,bounds:n}){let s=e.getBoundingClientRect(),i=0;o==="top"&&n.top>s.top?i=s.top-n.top:o==="bottom"&&n.bottom<s.bottom&&(i=s.bottom-n.bottom),Rh({initialValue:t.scrollTop,setScrollValue:a=>{t.scrollTop=a},delta:i,duration:r})}function zt(e,t){let r=window.getComputedStyle(e),o=r&&r.opacity?parseFloat(r.opacity):1;return{animate:n=>{e.style.opacity=`${o-o*n}`},complete:()=>{e.style.opacity=t||""},changedProperties:["opacity"]}}function nn(e){return{animate:t=>{e.forEach(r=>r.animate(t))},complete:()=>{e.forEach(t=>t.complete())},changedProperties:[]}}function Bh({element:e,initialTransform:t,from:r,to:o}){let{x:n,y:s}=mo(e),i=r.x||n,a=r.y||s,c=0,l=0;o.x!==void 0&&(c=o.x-i),o.y!==void 0&&(l=o.y-a);let u=null;return{animate:f=>{u==null&&(u=uo(e)),e.style.transform=`${u} translate(${c*f}px, ${l*f}px)`},complete:()=>{e.style.transform=t||""},changedProperties:["transform"]}}function hl({element:e,initialTransform:t,from:r,to:o}){return Bh({element:e,initialTransform:t,from:{y:r},to:{y:o}})}var gl="renderBinding",C=(e,t=void 0,r=void 0)=>{let o=()=>[e,t,r];return o._meta=gl,o},Gt=(e,t,r=void 0,o=void 0)=>({id:typeof e=="string"?e:Xa(e),binding:C(t,r,o)});function yl(e){return typeof e=="function"&&e._meta==gl}function Dh(e,t){if(typeof e.className=="string"){e.className=t;return}e.className.baseVal=t}function Ah(e){return typeof e.className=="string"?e.className:e.className.baseVal}function Ih(e){if(e.classList)return e.classList;let t=e.className;return rt(t)&&t.match(/\S+/g)||[]}function Oh(e,t){return e.classList?e.classList.contains(t):Ih(e).includes(t)}function _l(e,t){if(e instanceof Element){if(e.classList){e.classList.add(t);return}if(!Oh(e,t)){let r=Ah(e),o="";r&&(o=`${r} `),Dh(e,o+t)}}}var lt=new Map,Ms=null;function Cl(){return Ms||(Ms=new MutationObserver(e=>{for(let t of e){for(let r of t.removedNodes)for(let o of lt.keys()){let n=m(lt.get(o));n.remove&&!!r.contains&&r.contains(o)&&n.remove()}for(let r of t.addedNodes)for(let o of lt.keys()){let n=m(lt.get(o));n.add&&!!r.contains&&r.contains(o)&&n.add()}}})),Ms}function xl(e,t){let r=lt.size==0;return d.assert(!lt.has(e)),lt.set(e,t),r&&Cl().observe(document,{subtree:!0,childList:!0}),()=>{lt.delete(e),lt.size==0&&Cl().disconnect()}}function sn(e){return Object.freeze({initialValue:e})}function an(e,t,r){let o=e.get(t);if(!(o&&o.value===r)){if(Ps.set(t,!0),o){o.value=r;return}e.set(t,{value:r})}}function Sl(e,t){return e.has(t)?e.get(t).value:t.initialValue}function kl(){Ps.clear()}var Ps=new Map;function wl(e){for(let t of e.keys())if(Ps.has(t))return!0;return!1}var El=[],bl=[];function vl(e){for(let t of e){t.clear&&t.clear();try{t.clear=t.callback(),t.clear&&typeof t.clear!="function"&&(d.error("useEffect's callback should return a function"),t.clear=void 0)}catch(r){console.log(r)}}e.length=0}function Tl(){vl(bl)}function cn(){vl(El)}function Rl(e){e.clear&&(e.clear(),e.clear=null),e.sync?El.push(e):bl.push(e)}var Ns=null,$s=new Map;function Ls(){if(!Ns){let{call:e}=fl(Ks);Ns=e}Ns()}var Fs=!1,ln=!1;function Ks(){if(Fs)return;if(Fs=!0,Tl(),Fs=!1,ln){d.error("render was already started"),Ls();return}ln=!0,kl();let e=$s;$s=new Map;for(let t of e.keys())try{t()}catch(r){console.log(r)}cn(),ln=!1}function un(e){$s.set(e,!0),Ls()}function Bl(){return ln}function Hs(e){Rl(e),e.sync||Ls()}var bt=new Map,Qt=[];function Dl(e,t){if(Qt.push({redrawFn:e,contextMap:t}),bt.has(e)){let r=m(bt.get(e));r.hookIndex=0,r.effectIndex=0}}function Al(e){let t=m(Qt.pop()),r=bt.get(t.redrawFn);if(r){if(d.assert(e instanceof Element),r.connected)d.assert(r.firstRenderHooksCount==r.hookData.length,`Incorrect hooks count
expected: ${r.firstRenderHooksCount}
actual: ${r.hookData.length}`),d.assert(r.firstRenderEffectsCount==r.effects.length,`Incorrect effects count
expected: ${r.firstRenderEffectsCount}
actual: ${r.effects.length}`);else{r.connected=!0;for(let o of r.effects)Hs(o);r.firstRenderHooksCount=r.hookData.length,r.firstRenderEffectsCount=r.effects.length}return!0}return!1}function Il(e){let t=bt.get(e);if(t){for(let r of t.effects)r.clear&&r.clear();bt.delete(e)}}function Vs(){if(!Qt.length)throw new Error("Hooks can be used only in render functions");let e=m(Qt[Qt.length-1]).redrawFn;return bt.has(e)||bt.set(e,{hookIndex:0,hookData:[],effectIndex:0,effects:[],redraw:e,connected:!1}),m(bt.get(e))}var H=e=>{!1&&e!=null&&typeof e=="object"&&d.error("useState: you should use lazy initialization for complex types");let t=Vs(),r=t.hookIndex;if(t.hookData.length==r){let o=s=>{typeof s=="function"&&(s=s(t.hookData[r][0])),t.hookData[r][0]=s,un(t.redraw)},n=typeof e=="function"?e():e;!1&&typeof n=="function"&&d.error("useState: do not store functions in state"),t.hookData.push([n,o])}return++t.hookIndex,t.hookData[r]};function b(e){let t=Vs(),r=t.hookIndex;if(t.hookData.length==r){let n={current:e};t.hookData.push(n)}let o=t.hookData[r];return++t.hookIndex,o}function Ol(e,t,r){let o=Vs(),n=o.effectIndex;if(o.effects.length==n){let i={callback:e,sync:r,clear:null,deps:t};o.effects.push(i)}else{let i=o.effects[n];i.callback=e}let s=o.effects[n];o.connected&&(!t||!as(m(s.deps),t))&&Hs(s),s.deps=t,++o.effectIndex}function N(e,t){Ol(e,t,!1)}function Z(e,t){Ol(e,t,!0)}function Mh(e){let t=b();return N(()=>{t.current=e},[e]),t.current}function Oe(e,t){let r=b(),o=Mh(t);return(!o||!as(o,t))&&(r.current=e()),r.current}function q(e,t){return Oe(()=>e,t)}function Ze(e){return Sl(Qt[Qt.length-1].contextMap,e)}function mn(...e){}function Ph(e,t={}){t.current=e}hyperHTML.define("save-ref",Ph);var Ml=new WeakMap;function Nh(e,t){let r=Ml.get(e)||Ml.set(e,{}).get(e);for(let o of Object.keys(t))if(o.slice(0,2)==="on"&&r[o]!==t[o]){let s=o.slice(2);r[o]&&e.removeEventListener(s,r[o]),r[o]=t[o],r[o]&&e.addEventListener(s,r[o],{passive:!0})}return""}hyperHTML.define("passive-events",Nh);var F=hyperHTML.wire;if(!1){let e=new WeakMap;F=(t,r="__default__")=>{t=t||{},e.has(t)||e.set(t,{});let o=e.get(t);if(!o[r]){let n=hyperHTML.wire(t,r),s;o[r]=function(i,...a){return s||(s=i),s!=i&&i.join("_")==s.join("_")&&(i=s),m(o)[r].__tmp.history.push([i,...a]),n(i,...a)},o[r].__tmp={obj:t,id:r,history:[]}}return o[r]}}var fT=hyperHTML.bind;var Us=new Map,fn=new WeakMap;function Fh(e,t){return e===t?!0:typeof e=="object"&&typeof t=="object"&&to(e,t)}function ut(e,t,r=new Map,o,n="html"){let s=t?`${t}`:"__root";Us.has(e)||Us.set(e,{});let i=Us.get(e);if(!i[s]){let a=F(void 0,n),c=0,l=new Map(r),u=0,f=[],g=[],x=null,R=new Map,T=new Map,w=(h,...y)=>{if(yl(h)||h==null){let I=y[0];return w.switch(()=>h,I)}else if(typeof h=="function"){let I=y[0],U=y[1];return w._getHtmlWireResultWithOptimizations(`_c${++c}`,h,I,U)}x&&!Object.is(h,x)&&d.warn("Template literal was changed"),x=h;let S=a(h,...y);return S.__clearCache=()=>{a=F(void 0,n)},w._finishRender(),o&&(o.current=S),S};w.contextMap=r,w.switch=(h,y)=>{f[u]||(f[u]=new Map);let S=f[u],I=g[u],U=h();if(!U)return++u,null;let[X,ve,_e]=U();if(!S.get(X)){let Y=S.has(X)?[...S.keys()].indexOf(X):S.size;S.set(X,zs(X,w._createChild(`_u${u}_${Y}`,n),l,y,_e))}return++u,I&&I.delete(X),m(S.get(X))(ve)},w.renderAll=(h,y)=>{let S=[],I=new Set;return h.forEach((U,X)=>{let ve=y(U,X);if(ve){let{id:_e,binding:Rr}=ve,Y=_e;for(;I.has(_e);)_e=`${_e}_copy`;I.add(_e),Y!=_e&&d.error(`duplicated child id: ${Y}`);let[er,Br,Dr]=Rr();_e||(d.error("unexpected error: empty id in render all"),_e=`_c${++c}`),S.push(w._getHtmlWireResultWithOptimizations(_e,er,Br,Dr))}}),S},w.toSvgMode=()=>{let h=w._createChild(`_c${++c}`,"svg");return w._finishRender(),h},w.setRenderTypeForChildren=h=>{n=h},w._createChild=(h,y)=>ut(e,(t||"")+h,l,void 0,y),w._getHtmlWireResultWithOptimizations=(h,y,S,I)=>{let U=w._createChild(h,n);if(R.has(U))T.delete(U);else{let ve=zs(y,U,l,I);R.set(U,ve)}return m(R.get(U))(S)},w._finishRender=()=>{if(T.size)for(let h of T.keys()){let y=R.get(h);y?(y.clean(),R.delete(h)):d.warn("clean child error")}for(let h=0;h<g.length;++h){let y=g[h];for(let S of y.keys()){let I=y.get(S);I?(I.clean(),f[h].set(S,null)):I!==null&&d.warn("clean child error")}}T=new Map(R),g=f.map(h=>new Map(h)),c=0,u=0},w.renderIf=function(h,y,S){let I=y();return I?w(h,I,S):(++c,null)},w.setContext=(h,y)=>(an(l,h,y),w),w.clean=function(){w.clean=()=>console.log("clean already complete"),i[s]=null;for(let h of R.values())h.clean();for(let h of f)for(let y of h.values())y&&y.clean();R.clear(),T.clear()},i[s]=w}return i[s]}function pr(e,t,r){let[o,n,s]=t(),i=o(e,n);return i instanceof Element&&Ws(i,s),r&&(r.current=i),i}function Ws(e,t){if(!t)return;let r=String(t);if(r.includes(" ")){d.error(`multiple classNames not allowed: ${r}`);return}_l(e,r)}function zs(e,t,r=new Map,o="",n=""){let s,i=null,a=typeof o=="string"||o.___css?{className:String(o)}:o,c=!1;function l(){if(c)return;Dl(l,m(r));let f=e(t,s),g=Al(f);return i&&g?i!=f&&window.console.error(`[${e.name}] dom element was changed`):i=f,i instanceof Element&&(Ws(i,a.className),Ws(i,n)),a.ref&&(a.ref.current=i),f}function u(f){return!wl(m(r))&&Fh(s,f)&&i?i:(s=f,m(l()))}return u.clean=function(){c=!0,Il(l),t.clean()},u}function $h(e,t,r=ut(t),o=new Map){let n=fn.has(r);n||fn.set(r,zs(e,r,o));let s=fn.get(r),i=s(t);if(!n){let a=xl(i,{remove:()=>{document.body.contains(i)||(s.clean(),a(),fn.delete(r))}})}return i.hasAttribute(nt)||i.setAttribute(nt,"true"),Ie(cn),i}function we(e){return(r,o)=>{let n=o&&o.contextMap;return $h(e,r,o,n)}}function Pl(e,t,r=t){let o=we(e),n=ut(r),s=!0;return i=>{if(s){let a=o(i,n);t(a),s=!1}else un(()=>{o(i,n)})}}var Lh="id";function J(e){if(!!e)return typeof e=="string"&&(e={[Lh]:e}),Object.entries(e).filter(([t,r])=>jr(r)).map(([t,r])=>`${t}=${r}`).join(";")}function Nl(e){let[t,r]=H(()=>({width:0,height:0}));return N(()=>{let o=m(e.current),n=new ResizeObserver(([s])=>{r(s.contentRect)});return n.observe(o),()=>{n.disconnect()}},[e]),[t.width,t.height]}var Kh=[];function dn(e,t=Kh){let[r,o]=H(!1),[n,s]=H(!1),[i,a]=Nl(e);return N(()=>{let c=e.current.scrollWidth>e.current.clientWidth;c!=r&&o(c);let l=e.current.scrollHeight>e.current.clientHeight;l!=n&&s(l),mn(i,a,...t)},[e,r,n,i,a,t]),[r,n]}function Fl(e,t){let[r]=dn(e,t);return r}function ie(){return b()}function $l(e){return{x:e.left,y:e.top}}function Ll(e){return{x:e.width,y:e.height}}function Kl(e,t){return{x:e.x/t.x,y:e.y/t.y}}function Hl(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Vl(e){return{x:e,y:e}}function Ul(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Wl(e){return{width:e.right-e.left,height:e.bottom-e.top}}function zl(e){let t=$l(e),r=Wl(e),o=Ll(r);return Hl(t,Kl(o,Vl(2)))}function Hr({elementSize:e={width:0,height:0},popoverSize:t,side:r,align:o,offsetX:n=0,offsetY:s=0}){let i={x:0,y:0};switch(r){case"top":i.y=-t.height-s;break;case"bottom":i.y=e.height+s;break;case"left":i.x=-t.width-n;break;case"right":i.x=e.width+n;break;default:A(r)}switch(o){case"start":switch(r){case"top":case"bottom":i.x=n;break;case"right":case"left":i.y=s;break;default:A(r)}break;case"center":switch(r){case"top":case"bottom":i.x=(e.width-t.width)/2;break;case"right":case"left":i.y=(e.height-t.height)/2;break;default:A(r)}break;case"end":switch(r){case"top":case"bottom":i.x=e.width-t.width-n;break;case"right":case"left":i.y=e.height-t.height-s;break;default:A(r)}break;default:A(o)}return i}function Gs(e,t,r){let o=0;switch(e){case"top":o=r.top-t.top;break;case"right":o=t.right-r.right;break;case"bottom":o=t.bottom-r.bottom;break;case"left":o=r.left-t.left;break;default:A(e)}return Math.max(0,o)}function Qs(e,t,r,o){let n=0;switch(t){case"start":switch(e){case"top":case"bottom":n=r.right-o.right;break;case"right":case"left":n=r.bottom-o.bottom;break;default:A(e)}break;case"center":switch(e){case"top":case"bottom":n=Math.max(r.right-o.right,o.left-r.left);break;case"right":case"left":n=Math.max(r.bottom-o.bottom,o.top-r.top);break;default:A(e)}break;case"end":switch(e){case"top":case"bottom":n=o.left-r.left;break;case"right":case"left":n=o.top-r.top;break;default:A(e)}break;default:A(t)}return Math.max(0,n)}function Gl(e){switch(e){case"top":return"bottom";case"right":return"left";case"bottom":return"top";case"left":return"right";default:throw A(e),new Error}}function Ql(e){switch(e){case"start":return"end";case"center":throw new Error;case"end":return"start";default:throw A(e),new Error}}function Yl(e,t,r){switch(e){case"top":case"bottom":if(t.right>=r.right)return"end";if(t.left<=r.left)return"start";break;case"right":case"left":if(t.bottom>r.bottom)return"end";if(t.top<r.top)return"start";break;default:A(e)}return"center"}function Me(e,t){if(!t.hasOwnProperty(e))throw new Error(`getValueByCheckedKey(${e})`);return t[e]}var ee=(e,t,r)=>{let o=b(r);o.current=r;let n=r===null;N(()=>{if(n)return;let s=Fe(e.current,t,i=>m(o.current)(i));return()=>Ue(s)},[e,t,n])};function hr(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.707 5.707a1 1 0 0 0-1.414-1.414L10 8.586 5.707 4.293a1 1 0 0 0-1.414 1.414L8.586 10l-4.293 4.293a1 1 0 1 0 1.414 1.414L10 11.414l4.293 4.293a1 1 0 0 0 1.414-1.414L11.414 10l4.293-4.293z" fill="currentColor"/></svg>
`}function ql(e,t){Z(()=>{for(let r in t)t.hasOwnProperty(r)&&e.current.setAttributeNS(null,r,t[r].toString())},[e,...Object.keys(t),...Object.keys(t).map(r=>t[r])])}function ce(e){let t=b();return t.current=e,t}var Hh={pointer:{withMods:e=>__getCssClass("x0bad2__pointer",e)}},pn=22;function Vh({targetRect:e,hintRect:t}){if(t.left>=e.right)return"right";if(t.right<=e.left)return"left";if(t.top>=e.bottom)return"bottom";if(t.bottom<=e.top)return"top";throw new Error("Never")}function Uh({hintSide:e,hintRect:t,targetRect:r}){let o=zl(r);switch(e){case"left":case"right":return o.y-t.top-pn/2;case"top":case"bottom":return o.x-t.left-pn/2;default:throw A(e),new Error}}function Wh({hintSide:e,shift:t}){let r={left:"",right:"",top:"",bottom:""},o=Me(e,{left:"top",right:"top",top:"left",bottom:"left"});return{...r,[e]:"calc(100% - 2px)",[o]:`${t}px`}}function zh(e){return Me(e,{left:"translateX(-6px) translateY(6px) rotate(90deg)",right:"translateX(6px) translateY(6px) rotate(-90deg)",top:"scaleY(-1)",bottom:""})}function Xl(e,{color:t,getHintRect:r,getTargetRect:o}){let n=b(),s=ce(r),i=ce(o);return ql(n,{width:pn,height:10,viewBox:`0 0 ${pn} 10`}),Z(()=>{let a=s.current(),c=i.current(),l=Vh({hintRect:a,targetRect:c}),u=Uh({hintSide:l,hintRect:a,targetRect:c}),f=Wh({hintSide:l,shift:u});n.current.style.left=f.left,n.current.style.right=f.right,n.current.style.top=f.top,n.current.style.bottom=f.bottom,n.current.style.transform=zh(l)},[s,i,n]),e`
<svg
	xmlns="http://www.w3.org/2000/svg"
	save-ref=${n}
	class=${Hh.pointer.withMods({color:t})}
>
	<path
		fill-rule="evenodd"
		clip-rule="evenodd"
		d="M10 0C13 0 15.9999 8 20 8H0C3.9749 8 7 0 10 0Z"
	/>
	<rect x="0" y="8" width="20" height="2"></rect>
</svg>
`}var hn={tooltip:{withMods:e=>__getCssClass("x17c2d__tooltip",e)},content:"x17c2d__content",closeButton:"x17c2d__close-button",text:"x17c2d__text"};function jl(e,t){let r=ie(),{onClose:o=null,getPointerTargetRect:n,size:s="small",type:i="default",autotestData:a}=t,c=ie();ee(c,"mousedown",u=>u.stopPropagation());let l=t.contentType==="text"?C(Qh,t.text):t.content;return ee(r,"mousedown",o),e`
<div class=${hn.tooltip.withMods({type:i,text:t.contentType==="text",size:s})}
	save-ref=${c}
	data-at=${J(a)}
>
	${e.renderIf(Xl,()=>n&&{color:Gh(i),getTargetRect:n,getHintRect:()=>c.current.getBoundingClientRect()})}
	${e(l,hn.content)}
	${e.renderIf(hr,()=>!!o,{className:hn.closeButton,ref:r})}
</div>`}function Gh(e){return Me(e,{default:"dark",onboarding:"purple"})}function Qh(e,t){return e`<div class=${hn.text}>${t}</div>`}function Yh(e,t,r,o){e.current!==void 0&&(clearTimeout(e.current),e.current=void 0),o<=0?t(r):e.current=setTimeout(()=>{e.current=void 0,t(r)},o)}function Zl(e){let[t,r]=H(typeof e=="function"?e:()=>e),o=b(void 0),n=q((s,i)=>Yh(o,a=>r(a),s,i),[]);return[t,n]}var qh=!1;function Jl({propName:e,defaultValue:t,units:r,element:o,getCurrentValue:n}){let s=window.getComputedStyle(o),i=s&&s.getPropertyValue(e),a=i?parseFloat(i):t,c=o.style.getPropertyValue(e);return{animate:l=>{o.style.setProperty(e,`${n(l,a)}${r||""}`)},complete:()=>{o.style.setProperty(e,c)},changedProperties:[e]}}function Xh(e,t){return Jl({propName:"opacity",defaultValue:1,element:e,getCurrentValue:t})}function jh(e,t){return Jl({propName:"max-height",defaultValue:0,units:"px",element:e,getCurrentValue:t})}function Zh(e,t,r){let o=e.style.transform,n=uo(e);return{animate:s=>{let i=[n],a=r&&r(s);if(a!=null){let[l,u]=a;i.push(`translate(${l}px, ${u}px)`)}let c=t&&t(s);if(c!=null)if(typeof c=="number")i.push(`scale(${c})`);else{let[l,u]=c;l!=null&&i.push(`scaleX(${l})`),u!=null&&i.push(`scaleY(${u})`)}e.style.transform=i.join(" ")},complete:()=>{e.style.transform=o},changedProperties:["transform"]}}function Jh({reducer:e,duration:t,abortSignal:r,before:o,after:n}){return new Promise(s=>{let i=Date.now(),a=!1,c=r?r.add(()=>{a=!0}):()=>{};function l(){let u=ot(Date.now()-i,0,t),f=u/t;e.animate(f),a||u>=t?(c(),e.complete(),s(),n&&n()):requestAnimationFrame(l)}o&&o(),l()})}function eu({opacity:e,maxHeight:t,scale:r,translate:o,duration:n,before:s,after:i}){return qh?{play:()=>Promise.resolve()}:{play:(a,c)=>Jh({reducer:nn([e?Xh(a,e):null,t?jh(a,t):null,r||o?Zh(a,r,o):null].filter(jr)),duration:n,abortSignal:c,before:s&&(()=>m(s)(a)),after:i&&(()=>m(i)(a))})}}function tu(e,t,r){let o=t-e;return n=>(r&&(n=r(n)),n>=1?t:e+o*n)}function ru(e,t,r){let o=t[0]-e[0],n=t[1]-e[1];return s=>(r&&(s=r(s)),s>=1?t:[e[0]+o*s,e[1]+n*s])}function ou(e,t){let r=e.getBoundingClientRect(),o=!1;function n(){if(o)return;let s=e.getBoundingClientRect();(Math.round(s.top)!=Math.round(r.top)||Math.round(s.left)!=Math.round(r.left)||s.width!=r.width||s.height!=r.height)&&(r=s,t()),requestAnimationFrame(n)}return requestAnimationFrame(n),()=>{o=!0}}function nu({html:e,layer:t,createBinding:r,show:o,appearAnimation:n,hideAnimation:s}){let i=b(null),a=b(null),c=q(()=>{a.current&&(a.current.parentElement==t&&t.removeChild(a.current),a.current=null)},[t]),l=q(()=>{c();let g=i.current;g&&g.parentElement===t&&t.removeChild(g)},[c,t]);N(()=>l,[l]);let u=o?r():null,f=e(u);return Z(()=>{i.current!=f&&(f?(c(),f.style.position="absolute",d.assert(i.current==null),t.appendChild(f),n&&n(f)):i.current&&(a.current=i.current,s?s(i.current).then(c):c()),i.current=f)}),i}function su({getPopoverRect:e,side:t,align:r,rootElementRect:o,args:n,offset:s}){let i=e(s),a=Gs(t,i,o);if(a){let l=Gl(t),u=Hr({...n,side:l}),f=e(u);Gs(l,f,o)<a&&(n.side=l,s=u)}let c=Qs(n.side,r,i,o);if(c){let l=r=="center"?Yl(n.side,i,o):Ql(r),u=Hr({...n,align:l}),f=e(u);Qs(n.side,l,f,o)<c&&(n.align=l,s=u)}return s}function eg(e,t){let r=e?e.getBoundingClientRect():{top:0,right:document.body.scrollHeight-document.body.offsetHeight?document.body.offsetWidth:window.innerWidth,bottom:document.body.offsetHeight,left:0};return{top:r.top+t.y,right:r.right+t.x,bottom:r.bottom+t.y,left:r.left+t.x}}function iu({element:e,popover:t,isTopLayer:r,side:o,align:n,getOffset:s,autoInvert:i,rootElement:a}){let c=r?{x:window.pageXOffset,y:window.pageYOffset}:{x:0,y:0},l=eg(a,c),u=e.getBoundingClientRect(),f={width:u.width,height:u.height},g=Ul(t);function x(h){let y=h.x+u.left+c.x,S=h.y+u.top+c.y;return{left:y,top:S,right:y+g.width,bottom:S+g.height}}let R=s&&s()||{x:0,y:0},T={elementSize:f,popoverSize:g,side:o,align:n,offsetX:R.x,offsetY:R.y},w=Hr(T);return i&&(w=su({getPopoverRect:x,side:o,align:n,rootElementRect:l,args:T,offset:w})),r&&(w.x+=u.left+c.x,w.y+=u.top+c.y),w}var au=500;function tg({tooltipElement:e,elementRef:t,position:r,setVisible:o,ignoreIsElementWithinViewport:n}){if(e.style.left="0",e.style.top="0",e.style.transform=`translateX(${r.x}px) translateY(${r.y}px)`,!n&&!rg(e))return e.style.display="none",o(!1,0),Promise.resolve();let s=r.y>t.current.getBoundingClientRect().top?-5:5;return eu({opacity:tu(0,1),translate:ru([0,s],[0,0]),duration:150}).play(e)}function cu({html:e,elementRef:t,container:r,show:o=!0,stayOnHover:n=!1,side:s="top",align:i="center",offset:a={x:0,y:8},appearDelay:c=au,hideDelay:l=n?au:0,isPreventDefaultClick:u=!1,ignoreIsElementWithinViewport:f=!1}){let g=b(null),x=b(null),[R,T]=Zl(!1);N(()=>{mn(o),o||T(!1,l)},[l,T,o]),ee(t,"mouseover",()=>T(!0,c)),ee(t,"mouseout",()=>T(!1,l)),ee(t,"click",h=>u&&h.preventDefault());let w=nu({html:e,layer:tr("tooltip"),createBinding:()=>r,show:o&&R,appearAnimation:h=>{function y(){return iu({element:t.current,popover:h,side:s,align:i,isTopLayer:!0,getOffset:()=>a,autoInvert:!0})}return g.current=ou(t.current,()=>T(!1,0)),tg({elementRef:t,tooltipElement:h,position:y(),setVisible:T,ignoreIsElementWithinViewport:!!f}).then(()=>{x.current=new ResizeObserver(()=>{let S=y();h.style.transform=`translateX(${S.x}px) translateY(${S.y}px)`}),x.current.observe(h)})},hideAnimation:()=>(g.current&&(g.current(),g.current=null),x.current&&(x.current.disconnect(),x.current=null),Promise.resolve())});return Z(()=>{let h=w.current;if(!n||!h)return;let y=()=>T(!0,0),S=()=>T(!1,l);return h.addEventListener("mouseover",y),h.addEventListener("mouseout",S),()=>{h.removeEventListener("mouseover",y),h.removeEventListener("mouseout",S)}}),{visible:R,setVisible:T}}function rg(e){let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function lu(e){cu({...e,container:C(jl,{contentType:"text",text:e.text,size:e.size,autotestData:e.autotestData})})}function Je(e){lu(e)}var og={text:"x31b75__text"};function uu(e,{text:t,disableTooltip:r,autotestData:o}){let n=ie(),s=Fl(n,[typeof t=="string"?t:t.html]);return Je({html:e,elementRef:n,text:t,show:!r&&s}),e`
<div
	class=${og.text}
	save-ref=${n}
	data-at=${J(o)}
>
	${t}
</div>`}var Ys="data-focus-visible-added",qs="focus-visible";function mu(e,{focused:t,onFocusedChange:r}){if(re(t)&&!re(r))throw new Error("useFocusProps: `focused` requires `onFocusedChange`");N(()=>{if(!re(t))return;let o=e.current,n=o===document.activeElement;t&&!n?(o.focus(),o.setAttribute(Ys,""),o.classList.add(qs)):!t&&n&&(o.blur(),o.removeAttribute(Ys),o.classList.remove(qs))},[t,e]),ee(e,"focus",()=>{r&&r(!0)}),ee(e,"blur",()=>{r&&r(!1)})}var ng={preloader:{withMods:e=>__getCssClass("x12792__preloader",e)},spin:"x12792__spin"};function gn(e,{size:t="medium",color:r="accent"}){return e`
<svg
	class=${ng.preloader.withMods({size:t,color:r})}
	viewBox="0 0 32 32"
	xmlns="http://www.w3.org/2000/svg"
>
	<path
		d="M30 16C30 23.732 23.732 30 16 30C8.26801 30 2 23.732 2 16C2 8.26801 8.26801 2 16 2"
		stroke="currentColor"
		stroke-width="2.5"
		stroke-linecap="round"
		fill="none"
	/>
</svg>
`}var Vr={button:{withMods:e=>__getCssClass("xcc0a8__button",e)},icon:"xcc0a8__icon",text:"xcc0a8__text",preloader:"xcc0a8__preloader"},sg={button:{withMods:e=>__getCssClass("xeba1a__button",e)},icon:"xeba1a__icon",text:"xeba1a__text",preloader:"xeba1a__preloader"},ig={button:{withMods:e=>__getCssClass("x3e989__button",e)},icon:"x3e989__icon",text:"x3e989__text",preloader:"x3e989__preloader"},ag={button:{withMods:e=>__getCssClass("x1ebbb__button",e)},text:"x1ebbb__text",icon:"x1ebbb__icon",preloader:"x1ebbb__preloader"},cg={button:{withMods:e=>__getCssClass("xb6cd3__button",e)},icon:"xb6cd3__icon",text:"xb6cd3__text",preloader:"xb6cd3__preloader"},lg={button:{withMods:e=>__getCssClass("xa084d__button",e)},icon:"xa084d__icon",text:"xa084d__text",preloader:"xa084d__preloader"},ug={button:{withMods:e=>__getCssClass("x133d5__button",e)},text:"x133d5__text",icon:"x133d5__icon",preloader:"x133d5__preloader"},mg={button:{withMods:e=>__getCssClass("x959fd__button",e)},text:"x959fd__text",icon:"x959fd__icon",preloader:"x959fd__preloader"},fg={button:{withMods:e=>__getCssClass("x9131e__button",e)},text:"x9131e__text",icon:"x9131e__icon",preloader:"x9131e__preloader"},dg={button:{withMods:e=>__getCssClass("x08261__button",e)},text:"x08261__text",icon:"x08261__icon",preloader:"x08261__preloader"},pg={button:{withMods:e=>__getCssClass("xc515f__button",e)},text:"xc515f__text",icon:"xc515f__icon",preloader:"xc515f__preloader"},hg={button:{withMods:e=>__getCssClass("xea2c3__button",e)},text:"xea2c3__text",icon:"xea2c3__icon",preloader:"xea2c3__preloader"},gg={button:{withMods:e=>__getCssClass("x2278a__button",e)},text:"x2278a__text",icon:"x2278a__icon",preloader:"x2278a__preloader"};function He(e,t){let r=ie(),{size:o="medium",state:n="default",minWidth:s=!0,autotestData:i,tooltip:a}=t,{iconLeft:c,text:l,iconRight:u}=xg(t),f=Cg(t),g=n=="loading",x=g||n=="disabled";function R(h){!x&&!h.defaultPrevented&&(h.preventDefault(),t.onClick&&t.onClick())}let T=Me(t.style,{primary:sg,secondary:ig,destructive:cg,warning:lg,ghost:ug,ghostInversed:mg,link:fg,linkInversed:dg,linkSecondary:pg,linkSecondaryAlpha:hg,complementary:gg,secondaryInversed:ag}),w=xe(Vr.button.withMods({size:o,spacing:t.structure=="icon"&&f=="default"?"icon":f,"min-width":t.structure!="icon"&&s,loading:g}),T.button.withMods({pressed:n=="pressed"}));return Je({html:e,elementRef:r,show:!!a,text:typeof a=="string"?a:typeof a=="object"?a.text:"",size:typeof a=="object"?a.size:void 0,side:typeof a=="object"?a.side:void 0,align:typeof a=="object"?a.align:void 0,offset:typeof a=="object"?a.offset:void 0}),mu(r,t),e`
<button
	class=${w}
	disabled=${x}
	onclick=${R}
	save-ref=${r}
	data-at=${J(i)}
>
	${e.renderIf(fu,()=>!!c&&{className:xe(Vr.icon,T.icon),tooltip:a,icon:c})}
	${e.renderIf(yg,()=>!!l&&{className:xe(Vr.text,T.text),text:l,disableTooltip:!!a})}
	${e.renderIf(fu,()=>!!u&&{className:xe(Vr.icon,T.icon),icon:u})}
	${e.renderIf(_g,()=>g&&{className:xe(Vr.preloader,T.preloader),color:Sg(t.style)})}
</button>
`}function fu(e,{className:t,icon:r}){return e`
<div class=${t}>
	${e(r)}
</div>
`}function yg(e,{className:t,text:r,disableTooltip:o}){return e`
<div class=${t}>
	${e(uu,{text:r,disableTooltip:o})}
</div>
`}function _g(e,{className:t,color:r}){return e`
<div class=${t}>
	${e(gn,{size:"small",color:r})}
</div>
`}function Cg(e){switch(e.style){case"link":case"linkInversed":case"linkSecondary":case"linkSecondaryAlpha":return e.spacing||"default";case"primary":case"secondary":case"secondaryInversed":case"destructive":case"warning":case"ghost":case"ghostInversed":case"complementary":return"default";default:throw A(e),new Error}}function xg(e){switch(e.structure){case"icon":return{iconLeft:e.icon,text:null,iconRight:null};case"text":return{iconLeft:null,text:e.text,iconRight:null};case"iconAndText":return{iconLeft:e.icon,text:e.text,iconRight:null};case"textAndIcon":return{iconLeft:null,text:e.text,iconRight:e.icon};case"iconAndTextAndIcon":return e;default:throw A(e),new Error}}function Sg(e){return Me(e,{primary:"onColor",secondary:"subdued",destructive:"onColor",warning:"onColor",ghost:"subdued",ghostInversed:"onColor",link:"subdued",linkInversed:"onColor",linkSecondary:"subdued",linkSecondaryAlpha:"subdued",complementary:"subdued",secondaryInversed:"onColor"})}function du(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m8 15 5-5-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}var ye=class{constructor(t,r=null){this._block=t,this._element=r}className(){return this._element?`${this._block}__${this._element}`:this._block}getModifierClassName(t){return`${this.className()}_${t}`}getModifierWithValueClassName(t,r){return`${this.getModifierClassName(t)}_${r}`}createChildElementBemInfo(t){return m(!this._element),new ye(this._block,t)}};function V(e,t={}){let r=e.map(n=>n instanceof ye?n:new ye(n)),o=r.map(n=>n.className());for(let n of Object.keys(t)){let s=t[n];for(let i of r)s==null?o.push(i.getModifierClassName(n)):o.push(i.getModifierWithValueClassName(n,s))}return o.join(" ")}!1&&(window.top.__HYPER_HTML_MODE__="development");var Xs="_ismeta";function js(e){let t=window.top.__ON_UPDATE_ELEMENT__;t&&t(e)}function Zs(){let e=window.top.__UPDATE_ELEMENTS__;e&&e()}function yn(e,t){!1&&!e[Xs]&&(e[Xs]={...e[Xs],...t})}function Js(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}var kg=[O.CLICK],yr=new Map,ei=new Map,gr=!1,hu=!1,wg=()=>null;function gu(){Eg(),Ie(gu)}Ie(gu);function Eg(){if(yr.size&&!hu){gr=!0;for(let e of yr.keys())e._redraw();gr=!1,yr.clear()}}function bg(e){yr.set(e,!0)}function pu(e){yr.delete(e)}function vg(e){return yr.has(e)}var M=class extends We{constructor({bemInfo:t,blockName:r,block:o=r,relatedData:n}){super(),this._bemInfoArray=[],(t||o)&&this._addBemInfo(m(t||o)),this._childElements=null,this._childElementsRef=null,this._relatedData=n||this,this._modifiers={},this._browserEventSignals=null,this._domElement=null,this._onDidRedraw=null,this._onDomElementReCreatedCallback=null,this._childContext=new Map}_setContext(t,r){an(this._childContext,t,r)}static renderInProgress(){return gr}static suspend(t){hu=t}domElement(){if(vg(this)){let t=gr;gr=!0,this._redraw(),gr=t}return this._domElement?this._domElement:(this._redraw(),this.domElement())}onDidRedraw(){return this._onDidRedraw||(this._onDidRedraw=this._createSignal()),this._onDidRedraw}updateModifier(t,r){r?typeof r=="string"?this._modifiers[t]=r:r&&(this._modifiers[t]=null):delete this._modifiers[t],this._sheduleRender()}hasModifier(t){return Object.keys(this._modifiers).includes(t)}handleEvent(t){if(t.defaultPrevented&&kg.includes(t.type))return;let r=this._getBrowserEventSignalIfExists(t.type);r&&r.dispatch(t)}createChildBemInfo(t){return m(this._bemInfoArray[0]).createChildElementBemInfo(t)}addBemInfo(t,r){this._addBemInfo(t,r),this._sheduleRender()}setOnDomElementReCreatedCallback(t){this._onDomElementReCreatedCallback=t}clearCache(){this._relatedData={},this._sheduleRender()}_sheduleRender(){bg(this)}_redraw(){pu(this);let t=this._render();if(t!=this._domElement){let r=this._domElement;this._domElement=t,r&&(this._onDomElementReCreatedCallback?this._onDomElementReCreatedCallback():d.error(`[${this.constructor.name}] component element was changed`))}!1&&(t.component=this),this._onDidRedraw&&document.body.contains(this._domElement)&&this._onDidRedraw.dispatch()}_getBrowserEventSignalIfExists(t){return this._browserEventSignals&&this._browserEventSignals[t]||null}_getBrowserEventSignal(t){return this._browserEventSignals||(this._browserEventSignals={}),this._browserEventSignals[t]||(this._browserEventSignals[t]=this._createSignal(),this._sheduleRender()),this._browserEventSignals[t]}_activeListenerExists(t){let r=this._getBrowserEventSignalIfExists(t);return!!r&&r.handlersCount()>0}_getHandler(t){return this._activeListenerExists(t)?this:null}_addBemInfo(t,r){t instanceof ye||(t=new ye(t,r)),this._bemInfoArray.push(t)}_getCssClasses(){return this._bemInfoArray?V(this._bemInfoArray,this._modifiers):""}_wasRendered(){return!!this._domElement}_html(t,...r){return this._generateElement("",t,...r)}_renderFunctionEx(t){return this._childElementsRef||(this._childElementsRef={}),this._childElementsRef[t]||(this._childElementsRef[t]={}),ut(this._relatedData,t,this._childContext,this._childElementsRef[t])}_childHtml(t){ei.has(this)||ei.set(this,{});let r=ei.get(this);return r[t]||(r[t]=(o,...n)=>typeof o=="string"?this._childHtml(t+o):this._generateElement(t,o,...n),r[t].optional=(o,n)=>n?r[t](o):wg,!1&&(r[t].__hyperId=t)),r[t]}_getChildClass(t){return this.createChildBemInfo(t).className()}_getChildElement(t){if(this._childElementsRef&&this._childElementsRef[t])return m(this._childElementsRef[t].current);this.domElement();let r=this._childElements;return r&&r[t]||null}_generateElement(t,r,...o){let n=a=>a.map((c,l)=>{if(c instanceof ye)c=c.className();else if(c instanceof Ce)c=c.dispatch.bind(c);else if(typeof c=="function")c=c.bind(this);else{if(c==this)return c.handleEvent.bind(this);if(c&&c!=this&&typeof c.domElement=="function")return typeof c.setOnDomElementReCreatedCallback=="function"&&c.setOnDomElementReCreatedCallback(()=>this._redraw()),this._addDisposable(c),c.domElement();if(Array.isArray(c))return n(c)}if(r[l]&&r[l].endsWith("passive-events="))for(let u of Object.keys(c))typeof c[u]=="function"&&(c[u]=c[u].bind(this));return c});o=n(o);let s=t&&`:${t}`,i=F(this._relatedData,s)(r,...o);if(t){if(this._childElements=this._childElements||{},!1){let a=this._childElements[t];a?(m(a==i,`[${this.constructor.name}] component child('${t}') element was changed`),js(a)):(yn(i,{id:Js(),renderer:`${this.constructor.name}: ${t}`}),Zs())}this._childElements[t]=i}else!1&&(this._domElement?js(this._domElement):(yn(i,{id:Js(),renderer:this.constructor.name}),Zs()));return!1&&yn(i,{renderArgs:[r,...o]}),i}_render(){}_destruct(){pu(this),super._destruct()}};var yu="li 0";function _u(e){let t=$(cr.getFirstBlock(e));return t&&t.viewType==="subheader"?t.key:""}var Cu="#E73018",xu="#FF8400";var Su="#3CB46E";var ku="#7C46B9";var wu="noColor";var Pe={NBSP:String.fromCharCode(160),ZERO_WIDTH_SPACE:String.fromCharCode(8203),ELLIPSIS:"\u2026",NDASH:"\u2013",GREATER_THAN_OR_EQUAL_TO:String.fromCharCode(8805),LESS_THAN:String.fromCharCode(60),PERCENT:String.fromCharCode(37)};var _r=class{constructor(){this._ids={}}generate(t){return re(this._ids[t])?`${t}_${++this._ids[t]}`:(this._ids[t]=0,t)}};var et=class{constructor({paragraph:t,subtitleKey:r="",bemInfo:o,blockBeforeType:n,idPrefix:s="",placeholder:i="",prompt:a="",paragraphIndex:c}){this._paragraph=t,this._subtitleKey=r,this.paragraphIndex=c,this._isPrompt=!!a,this._className=this._getClassName({bemInfo:o,blockBeforeType:n});let l=["subtitle"];this.ignoreInlineStyles=l.includes(this.type());let u=["header","subheader"];this.invertBold=u.includes(this.type());let f=["blockquote","pullquote"];this.invertItalic=f.includes(this.type()),this.renderId=s+t.key,this.placeholder=a||i}_getClassName({bemInfo:t,blockBeforeType:r}){let o=t||new ye("paragraph-block"),n=`${o.className()}`;if(n+=` ${o.getModifierWithValueClassName("type",this.type())}`,n+=` ${o.getModifierWithValueClassName("align",this.textAlign())}`,r&&(n+=` ${o.getModifierWithValueClassName("after",r)}`),this._paragraph.characters.length==0){let s=this._isPrompt?"prompt":"empty";n+=` ${o.getModifierClassName(s)}`}return n}paragraph(){return this._paragraph}type(){return this._paragraph.key===this._subtitleKey?"subtitle":this._paragraph.viewType}textAlign(){return this._paragraph.textAlign}className(){return this._className}getLineHeightForFontSize(t){let r=Xe();return t<=15?"1.5":t<=18?r?"2":"1.9":t<=21&&r?"1.7":t<=23&&!r?"1.75":"normal"}};var _n={};function Tg(e){return _n[e]||(_n[e]={}),_n[e]}function Rg(e){delete _n[e]}function Bg(e,t,r,o){if(!e)return null;let n=e.style,s="",i=[],a="",c=1;if(n.forEach(l=>{switch(l.name){case"bold":s+=`font-weight: ${r?"normal":"bold"};`;break;case"italic":s+=`font-style: ${t?"normal":"italic"};`;break;case"underline":i.push("underline");break;case"strikethrough":i.push("line-through");break;case"fontSize":{s+=`font-size: ${l.size}px;`,s+=`line-height: ${o(l.size)};`;break}case"fontColor":s+=`color: ${l.color};`;break;case"textHighlightColor":{a=l.color;break}case"textHighlightOpacity":c=l.opacity;break;default:A(l)}}),i.length&&(s+=`text-decoration: ${i.join(" ")};`),a&&a!==wu){let[l,u,f]=$e(a);s+=`background-color: rgba(${l}, ${u}, ${f}, ${c});`}return s}function Eu({styles:e,ignoreInlineStyles:t}){return t?K.create({url:e.url}):e}function Dg({characters:e,ignoreInlineStyles:t}){if(e.length==0)return[];let r=[{text:e[0].text,styles:Eu({styles:e[0].meta,ignoreInlineStyles:t})}];for(let o=1;o<e.length;++o){let n=e[o],s=Eu({styles:n.meta,ignoreInlineStyles:t}),i=r.length-1,a=r[i].styles;K.compare(s,a)?r[i].text+=n.text:r.push({text:n.text,styles:s})}return r}function bu(e,t,r,o){return F(e,`:${t}`)`
		<span style=${r}>${o}</span>`}function Ag(e,t,r,o,n,s){return F(e,`:${t}`)`
		<a href=${n} target=_blank onmouseover=${s}><span style=${r}>${o}</span></a>`}function vt(e,t,r=!1,o=!1){let n=e.paragraph(),s=Dg({characters:n.characters,ignoreInlineStyles:e.ignoreInlineStyles}),i=[],a=new _r,c=!1,l=Tg(e.renderId);if(s.forEach((y,S)=>{let I=Bg(y.styles,e.invertItalic,e.invertBold,e.getLineHeightForFontSize),U=a.generate(`${e.renderId}_${y.text}_${I}`),X=y.text;S==s.length-1&&X.endsWith(`
`)&&(X+=Pe.ZERO_WIDTH_SPACE);let ve=y.styles.url,_e=ve?Ag(l,U,I,X,ve,t):bu(l,U,I,X);ve&&(c=!0),i.push(_e)}),i.length)c&&Rg(e.renderId);else{let y=a.generate(`${e.renderId}_empty`),S=bu(l,y,null,Pe.ZERO_WIDTH_SPACE);i.push(S)}let u=`enter-blockquote-field-${e.paragraphIndex}`,f=`enter-list-item-field-${e.paragraphIndex}`,g=`enter-paragraph-field-${e.paragraphIndex}`,x=F(l,`:${e.renderId}`),R=o?" lock-block":"",T=r?" read-only-block":"",w=e.className()+R+T,h=!o&&!r;switch(n.viewType){case"header":return x`<h3 class=${w} data-key=${n.key} contenteditable=${h}>${i}</h3>`;case"subheader":return x`<h4 class=${w} data-key=${n.key} contenteditable=${h}>${i}</h4>`;case"blockquote":case"pullquote":return x`<blockquote class=${w} data-key=${n.key} data-at=${J(u)} contenteditable=${h}>${i}</blockquote>`;case"ol":case"ul":return x`<li class=${w} data-key=${n.key} data-at=${J(f)} contenteditable=${h}>${i}</li>`}return x`
		<p
			class=${w}
			data-key=${n.key}
			data-placeholder=${o||T?null:e.placeholder}
			data-at=${J(g)}
			contenteditable=${h}
		>${i}</p>`}var Cn=class extends M{constructor(){super({blockName:"insert-indicator"})}_render(){return this._html`
			<div class=${this._getCssClasses()}></div>`}};var xn=class{constructor(t,r){this.type=t,this.items=[],this.isNewList=r}},Sn=class extends M{constructor(){super({blockName:"rich-text-editor"}),this._renderers={},this._allowSubtitle=!1,this._readonlyMode=!1,this._prevBlockType=null,this._prevFloatedElementRenderer=null,this.onHyperlinkOver=this._createSignal()}getLockedBlocks(){return[]}setReadonlyMode(t){this._readonlyMode!==t&&(this._readonlyMode=t,this._sheduleRender())}setAllowSubtitle(t){t!==this._allowSubtitle&&(this._allowSubtitle=t,this._sheduleRender())}registerRenderer(t,r){this._renderers[t]=r}_getReadonlyMode(){return this._readonlyMode}_getBlockMap(){}_getParagraphPlaceholder(t){return""}_getParagraphPrompt(t){return""}_getListRelatedData(){return{}}_getListId(t){return t.items.filter(r=>!(r instanceof Cn)).reduce((r,o)=>`${r}-${o.key}`,"")}isLock(t){return!1}_renderBlock(t,r){let o=$(t);if(o){let g=this._getParagraphPlaceholder(o),x=this._getParagraphPrompt(o),R=new et({subtitleKey:this._allowSubtitle?_u(this._getBlockMap()):"",paragraph:o,blockBeforeType:this._prevBlockType,placeholder:g,prompt:x,paragraphIndex:r});return this._prevBlockType=R.type(),this._prevFloatedElementRenderer&&(this._prevFloatedElementRenderer.updateModifier("before",R.type()),this._prevFloatedElementRenderer=null),vt(R,this.onHyperlinkOver.toFn(),this._readonlyMode,this.isLock(t))}let s=this._renderers[t.type](t,this._prevBlockType,this.onHyperlinkOver.toFn(),this._readonlyMode,this.isLock(t)),i=Nr.toAbstractMediaBlock(t);i&&(i.alignment==="float-left"?this._prevFloatedElementRenderer=s:this._prevBlockType=Nr.getBlockType(i));let a=it.toExerciseBlock(t);a&&(this._prevBlockType=it.getBlockType(a));let c=$t.toAttachmentBlock(t);c&&(this._prevBlockType=$t.getBlockType(c));let l=pe.toCollageBlock(t);l&&(this._prevBlockType=pe.getBlockType(l));let u=st.toNoteBlock(t);u&&(this._prevBlockType=st.getBlockType(u));let f=W.toTableBlock(t);return f&&(this._prevBlockType=W.getBlockType(f)),s.domElement()}_processBlock({blocks:t,block:r}){t.push(r)}_getBlockGroups(){let t=[],r=null,o=this._getBlockMap();return cr.forEach(o,n=>{if(D.isList(n)){let s=m($(n));r&&r.type!==s.viewType&&(t.push(r),r=null);let i=s.viewType==="ol"&&!!s.isOrderedListFirstItem;(!r||i)&&(r&&t.push(r),r=new xn(s.viewType,i)),this._processBlock({blocks:r.items,block:n});return}r&&(t.push(r),r=null),this._processBlock({blocks:t,block:n})}),r&&t.push(r),t}_renderBlockGroup(t,r){let o=`enter-paragraph-field-${r}`;if(t instanceof xn){let n=t.items.map((a,c)=>this._renderBlock(a,c)),s=F(this._getListRelatedData(),this._getListId(t));if(t.type==="ul")return s`<ul class='list-block' data-at=${J(o)}>${n}</ul>`;let i=t.isNewList?{"counter-reset":yu}:null;return s`<ol class='list-block' style=${i}>${n}</ol>`}return this._renderBlock(t,r)}_renderBlocks(){return this._prevBlockType="none",this._getBlockGroups().map((t,r)=>this._renderBlockGroup(t,r))}};var kn=class extends Sn{constructor(t){super(),this._state=t}updateState(t){this._state!=t&&(this._state=t,this._sheduleRender())}_getBlockMap(){return this._state.blockMap}isLock(t){return!0}_render(){return this._html`
			<div class=${this._getCssClasses()}>
				${this._renderBlocks()}
			</div>`}};var vu=null,Tu=null;function Cr(e){if(!e.length||e.startsWith("data:")||e.startsWith("blob:"))return e;let t=e;return vu&&(t=`${vu}${e}`),Tu&&(t=Tu(t)),t}var ti=0,Ru=1024,Bu=Ru*1024,Ig=Bu*1024;function Du(e){return Math.round(e*10)/10}function Og(e){return Math.max(ti,Math.round(e/Ru))}function Mg(e){return Math.max(ti,Du(e/Bu))}function Pg(e){return Math.max(ti,Du(e/Ig))}function Au(e){let t=Pg(e);if(t>1)return E("Common.FileSize.ToGb",{volume:t});let r=Mg(e);return r>1?E("Common.FileSize.ToMb",{volume:r}):E("Common.FileSize.ToKb",{volume:Og(e)})}function xr(e,{component:t,tooltipText:r,size:o,stayOnHover:n,show:s,side:i,align:a,isPreventDefaultClick:c}){let l=b();return Je({html:e,elementRef:l,text:r,size:o,stayOnHover:n,show:s,side:i,align:a,isPreventDefaultClick:c}),pr(e,t,l)}var Ng={container:"x6e61f__container"};function Iu(e,t){return e`
<div class=${Ng.container}>
	${e(gn,t)}
</div>`}function Ou(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M30.841 31.182V19.068h1.803c.61 0 1.106.495 1.106 1.106v9.902c0 .61-.495 1.106-1.106 1.106H30.84zM14.25 17.68v15.166L28.773 34.5V15.75L14.25 17.68z" fill="#4169B4"/><path d="m23.61 27.043 1.118-6.117h1.705l-1.842 8.597H22.87l-1.352-5.751-1.351 5.75h-1.723l-1.842-8.596h1.705l1.124 6.105 1.369-6.105h1.448l1.363 6.117z" fill="#fff"/></svg>
`}function Mu(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M14.658 26.355v2.895h-2.056v-8.531h3.404c.652 0 1.228.12 1.728.363.504.238.893.58 1.166 1.025.278.442.416.944.416 1.506 0 .832-.299 1.498-.896 1.998-.594.496-1.41.744-2.45.744h-1.312zm0-1.587h1.348c.398 0 .701-.1.908-.3.21-.198.316-.48.316-.843 0-.398-.107-.717-.322-.955-.215-.238-.508-.36-.879-.363h-1.37v2.46zM21.018 29.25v-8.531h2.748c.754 0 1.432.172 2.033.515a3.56 3.56 0 0 1 1.406 1.448c.34.62.512 1.318.516 2.091v.393c0 .781-.166 1.482-.498 2.104a3.619 3.619 0 0 1-1.395 1.453 3.956 3.956 0 0 1-2.003.527h-2.807zm2.056-6.943v5.361h.715c.59 0 1.043-.209 1.36-.627.316-.422.474-1.047.474-1.875v-.37c0-.823-.158-1.444-.474-1.862-.317-.418-.778-.627-1.383-.627h-.691zM34.749 25.852h-3.317v3.398h-2.056v-8.531h5.707v1.588h-3.65v1.963h3.316v1.582z" fill="#E05D36"/></svg>
`}function Pu(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M30.5 31.25V19h1.75a1.5 1.5 0 0 1 1.5 1.5v9.25a1.5 1.5 0 0 1-1.5 1.5H30.5zM14.25 17.68v15.166L28.875 34.5V15.75L14.25 17.68z" fill="#D1684D"/><path d="M20.49 26.523v3.102h-1.746V20.82h3.305c.636 0 1.194.12 1.675.363a2.6 2.6 0 0 1 1.118 1.034c.26.443.39.95.39 1.518 0 .862-.286 1.544-.856 2.044-.566.496-1.352.744-2.357.744h-1.53zm0-1.47h1.559c.461 0 .812-.113 1.053-.339.244-.226.366-.548.366-.967 0-.432-.122-.78-.366-1.046-.245-.267-.582-.404-1.013-.412h-1.6v2.764z" fill="#fff"/></svg>
`}function Nu(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/></svg>
`}function Fu(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M30.5 31.25V19h1.75a1.5 1.5 0 0 1 1.5 1.5v9.25a1.5 1.5 0 0 1-1.5 1.5H30.5zM14.25 17.68v15.166L28.875 34.5V15.75L14.25 17.68z" fill="#468B5B"/><path d="m21.563 23.855 1.588-3.035h2.007l-2.467 4.366 2.531 4.439h-2.03l-1.63-3.084-1.629 3.084h-2.03l2.53-4.439-2.466-4.366h2.007l1.588 3.035z" fill="#fff"/></svg>
`}function $u(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="m6.293 10.707 3 3a1 1 0 0 0 1.414 0l3-3a1 1 0 0 0-1.414-1.414L11 10.586V3a1 1 0 1 0-2 0v7.586L7.707 9.293a1 1 0 0 0-1.414 1.414zM5 15a1 1 0 1 0-2 0v1a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-1a1 1 0 1 0-2 0v1H5v-1z" fill="currentColor"/></svg>
`}function Lu(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.654 5.02a6 6 0 0 1 8.6 2.08l-.432-.173a1 1 0 0 0-.744 1.857l2.625 1.052a1 1 0 0 0 1.3-.556l1.052-2.626A1 1 0 0 0 17.2 5.91l-.134.335a8 8 0 0 0-14.533.889 1 1 0 1 0 1.867.716 6 6 0 0 1 2.255-2.83zm6.693 10.07a6 6 0 0 1-8.583-2.05l.335.162a1 1 0 0 0 .873-1.8l-2.545-1.235a1 1 0 0 0-1.336.463L.856 13.175a1 1 0 1 0 1.8.873l.181-.375a8 8 0 0 0 14.632-.696 1 1 0 1 0-1.868-.717 6 6 0 0 1-2.255 2.83z" fill="currentColor"/></svg>
`}var mt={attachmentFigure:{withMods:e=>__getCssClass("x99dbb__attachment-figure",e)},attachmentSubblock:{withMods:e=>__getCssClass("x99dbb__attachment-subblock",e)},attachmentBlock:{withMods:e=>__getCssClass("x99dbb__attachment-block",e)},dndIcon:"x99dbb__dnd-icon",attachmentIcon:"x99dbb__attachment-icon",attachmentInfo:"x99dbb__attachment-info",attachmentName:"x99dbb__attachment-name",attachmentSize:"x99dbb__attachment-size",attachmentButtons:"x99dbb__attachment-buttons",placeholder:"x99dbb__placeholder"};function Fg(e,{disabled:t,onReplace:r,onDownload:o}){return e`
<div class=${mt.attachmentButtons}>
	${e.renderIf(xr,()=>r&&{component:C(He,{state:t?"disabled":"default",style:"linkSecondary",structure:"icon",icon:C(Lu),size:"small",onClick:r}),tooltipText:E("Roll.Editor.AttachmentBlock.UpdateButtonTooltip")})}
	${e(xr,{component:C(He,{state:t?"disabled":"default",style:"linkSecondary",structure:"icon",icon:C($u),size:"small",onClick:o}),tooltipText:E("Roll.Editor.AttachmentBlock.DownloadButtonTooltip")})}
</div>`}function $g(e,{extension:t}){return e`
<div class=${mt.attachmentIcon}>
	${e.switch(()=>{switch(t){case"doc":case"docx":return C(Ou,{});case"ppt":case"pptx":return C(Pu,{});case"xls":case"xlsx":return C(Fu,{});case"pdf":return C(Mu,{});default:return C(Nu,{})}})}
</div>`}function Lg(e){return e`
<img class=${mt.placeholder} aria-hidden=true src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" />`}function Ku(e,{fileName:t,fileSize:r,fileExtension:o,isLoading:n,isPlayer:s,disabled:i,onReplace:a,onDownload:c}){let l=b();return ee(l,"click",()=>{s&&c()}),e`
<div
	class=${mt.attachmentBlock.withMods({clickable:s,lock:!!i})}
	save-ref=${l}
	draggable=true
>
	${e.switch(()=>n?C(Iu,{size:"medium"},mt.attachmentIcon):C($g,{extension:o}))}
	<div class=${mt.attachmentSubblock.withMods({uploading:n})}>
		<div class=${mt.attachmentInfo}>
			<div class=${mt.attachmentName}>
				${t}
			</div>
			<div class=${mt.attachmentSize}>${Au(r)}</div>
		</div>
		${e(Fg,{disabled:!!i,onReplace:a,onDownload:s?()=>{}:c})}
		${e.renderIf(Lg,()=>!s&&!n)}
	</div>
</div>`}var Kg={attachmentFigure:{withMods:e=>__getCssClass("x99dbb__attachment-figure",e)},attachmentSubblock:{withMods:e=>__getCssClass("x99dbb__attachment-subblock",e)},attachmentBlock:{withMods:e=>__getCssClass("x99dbb__attachment-block",e)},dndIcon:"x99dbb__dnd-icon",attachmentIcon:"x99dbb__attachment-icon",attachmentInfo:"x99dbb__attachment-info",attachmentName:"x99dbb__attachment-name",attachmentSize:"x99dbb__attachment-size",attachmentButtons:"x99dbb__attachment-buttons",placeholder:"x99dbb__placeholder"},Hg="attachment-block",ri={},Vg={},oi=class extends M{constructor({block:t}){super({blockName:Hg}),this._block=t,this._attachmentElement=null}setBlock(t){this._block!==t&&(this._attachmentElement=null,this._block=t,this._sheduleRender())}_render(){let{key:t,src:r,fileName:o}=this._block,n=ut(Vg,`:attachment-block-${t}`),s=!0;return n`
<figure class=${xe(this._getCssClasses(),Kg.attachmentFigure.withMods({playerView:s}))}>
	${n(Ku,{...this._block,isPlayer:s,onDownload:()=>{let i=document.createElement("a");i.setAttribute("href",Cr(m(r))),i.setAttribute("download",o),i.click()}})}
</figure>`}};function Hu(e,t){let r;return ri[e.key]?(r=ri[e.key],r.setBlock(e)):(r=new oi({block:e}),ri[e.key]=r),r.updateModifier("after",t),r}var Ug={top:0,right:0,bottom:0,left:0};function ni(){return{...Ug}}function Ee({width:e,height:t,crop:r,src:o}){return{src:o,crop:r||ni(),width:r?e-r.left-r.right:e,height:r?t-r.top-r.bottom:t}}function Vu(e){let{width:t,height:r}=e,o=Ee(e),n=t-o.width,s=r-o.height,i=n===0?0:o.crop.left/t*(t/n)*100,a=s===0?0:o.crop.top/r*(r/s)*100;return{width:t/o.width*100,height:r/o.height*100,positionX:i,positionY:a}}var si={create(e){return{key:"",...Go.create(e),parentCollageKey:e.parentCollageKey}},toCollagedImageBlock(e){return e&&e.type===p.IMAGE&&e.parentCollageKey?e:null}};var Tt=class extends M{constructor({bemInfo:t,blockName:r,block:o,relatedData:n}){super({bemInfo:t,blockName:r,block:o,relatedData:n}),this._hidden=!1,this._x=null,this._y=null,this._width=null,this._height=null,this._text=""}onDisconnected(){return this._getBrowserEventSignal(O.CUSTOM_DISCONNECTED)}setText(t){this._text=t,this._sheduleRender()}show(){this._hidden&&(this._hidden=!1,this._sheduleRender())}hide(){this._hidden||(this._hidden=!0,this._sheduleRender())}visible(){return!this._hidden}x(){return this._x}y(){return this._y}move(t,r){(t!=this._x||r!=this._y)&&(this._x=t,this._y=r,this._sheduleRender())}setWidth(t){t!=this._width&&(this._width=t,this._sheduleRender())}setHeight(t){t!=this._height&&(this._height=t,this._sheduleRender())}_getText(){return this._text}_getBaseStyles(){let t={display:this._hidden?"none":""};return this._x!=null&&(t.left=this._x),this._y!=null&&(t.top=this._y),this._width!=null&&(t.width=this._width),this._height!=null&&(t.height=this._height),t}_render(){return this._html`
<div
	class=${this._getCssClasses()}
	style=${this._getBaseStyles()}
	ondisconnected=${this}
>
	${this._text}
</div>`}};function Uu(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 6a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1zm0 4a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1zm1 3a1 1 0 1 0 0 2h14a1 1 0 1 0 0-2H3z" fill="currentColor"/></svg>
`}var Wg={dndIcon:"x5813d__dnd-icon"};function Wu(e,{className:t}){return e`
<div class=${xe(Wg.dndIcon,t)} draggable="true">
	${e(C(Uu))}
</div>`}var wn="media-block",zg="wrapper",Gg="content",Qg="placeholder",Yg=740,En=class extends M{constructor({block:t,contentRendererFn:r}){super({blockName:wn}),this._block=t,this._contentRendererFn=r,this._wrapperClassName=new ye(wn,zg).className(),this._contentClassName=new ye(wn,Gg).className(),this._placeholderClassName=new ye(wn,Qg).className(),this.fixedRatio=0,this.setBlock(t)}getBlock(){return this._block}setBlock(t){this._block=t,this.updateModifier("align",this._block.alignment)}_getWrapperInlineStyles(){}_onContentSizeChange(t){this.fixedRatio=t,this._sheduleRender()}_getInlineStyles(){return document.body.clientWidth<=Yg||this._block.alignment!=="float-left"||this._block.type===p.EMBED?null:{width:`${this._block.width}px`}}_getPlaceholderStyles(){return this._block.width?{"padding-bottom":`${(this.fixedRatio?this.fixedRatio:this._block.height/this._block.width)*100}%`}:{width:"100%",height:`${this._block.height}px`}}};function zu(e,t,r){let[o,n]=H(1),s=Oe(()=>Ee(e),[e]);return N(()=>{if(t.current){let i=t.current,a=r?r.width:i.clientWidth,c=r?r.height:i.clientHeight,l=s.width/a,u=s.height/c;l>1||u>1?n(Math.max(l,u)):n(1)}},[t,s,r]),o}var ii={imageSelection:"x9c461__image-selection",imageContainer:{withMods:e=>__getCssClass("x9c461__image-container",e)},image:{withMods:e=>__getCssClass("x9c461__image",e)}};function qg(e){return e`
<img
	class=${ii.imageSelection}
	src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="
	tabIndex="-1"
	aria-hidden=true
	draggable=false
/>
`}function Xg(e,{image:t,withImageSelection:r,width:o,height:n,onClick:s,withZoom:i}){let a=Vu(t),c=o&&n?`width: ${o}px; height: ${n}px;`:"";return e`
<div
	class=${ii.image.withMods({withZoom:!!i})}
	style=${`
	    ${c}
		background: url(${Cr(t.src)}) no-repeat;
		background-size: ${a.width}% ${a.height}%;
		background-position: ${a.positionX}% ${a.positionY}%;`}
	onclick=${s}
>
	${e.renderIf(qg,()=>r)}
</div>
`}function jg(e,{image:t,withSize:r,withImageSelection:o,withZoom:n,containerRef:s,containerLimit:i,className:a="",onClick:c}){let l=ie(),u=Oe(()=>Ee(t),[t]),f=zu(t,s||l,i);return e`
<div
	class=${a+" "+ii.imageContainer.withMods({fill:!r,origin:!!r})}
	save-ref=${l}
>
	${e(Xg,{image:t,withZoom:n,withImageSelection:o,width:r?u.width/f:void 0,height:r?u.height/f:void 0,onClick:c})}
</div>
`}function Sr(e,{image:t,...r}){let o=Oe(()=>({...t,crop:t.crop?t.crop:ni()}),[t]);return pr(e,C(jg,{...r,image:o}))}var Zg={layer:{withMods:e=>__getCssClass("xd16ae__layer",e)}};function Gu(e,{type:t,onClick:r}){return e`
<div
	class=${Zg.layer.withMods({type:t})}
	onclick=${r}
>
</div>`}function ai(e,t){let r=ce(t);Z(()=>{let o=e instanceof Element?e:e&&e.current;if(!o)return;let n=new ResizeObserver(([s])=>{r.current&&r.current(s.contentRect)});return n.observe(o),()=>{n.disconnect()}},[e,r])}function bn(){let[,e]=H(!0);return q(()=>e(t=>!t),[])}function Jg(){let e=!1;try{e=!!window.Animation}catch(t){}return e}function ci({element:e,createKeyframes:t,abortSignal:r}){if(!Jg())return Promise.resolve();let o=new Animation(t(e));return new Promise(n=>{let s=e.style.pointerEvents;e.style.pointerEvents="none";function i(){c(),n()}function a(){c(),n("aborted")}function c(){e.style.pointerEvents=s,r&&r.removeEventListener("abort",a),o.removeEventListener("cancel",a),o.removeEventListener("finish",i)}r&&r.addEventListener("abort",a),o.addEventListener("cancel",a),o.addEventListener("finish",i),o.play()})}function vn({element:e,getAppearKeyframes:t,getHideKeyframes:r,onAppeared:o,onHidden:n}){let[s,i]=H(!1),a=bn(),c=b(new AbortController),l=b(e),u=b(null);e!==l.current&&(u.current=l.current),l.current=e;let f=ce({getAppearKeyframes:t,getHideKeyframes:r,onAppeared:o||(()=>{}),onHidden:n||(()=>{})});return Z(()=>{if(!e)return;c.current.abort(),c.current=new AbortController;let g=c.current.signal,x=f.current.getAppearKeyframes,R=f.current.getHideKeyframes;return x?(i(!0),ci({element:e,createKeyframes:x,abortSignal:g}).then(()=>{i(!1),f.current.onAppeared()})):f.current.onAppeared(),()=>{if(!R||g.aborted){u.current=null,a(),f.current.onHidden();return}i(!0),ci({element:e,createKeyframes:R,abortSignal:g}).then(()=>{u.current=null,i(!1),f.current.onHidden()})}},[f,e,a]),{animating:s,element:u.current||e}}function Tn({layer:e,element:t,onAppend:r,beforeAppend:o,beforeUnmount:n}){let s=b(null),i=tr(e),a=ce(n),c=q(()=>{let l=s.current;l&&(m(l.parentElement==i,`useExternalLayer(): layer "${e}" doesn't contain element`),a.current&&a.current(),i.removeChild(l),s.current=null)},[i,e,a]);Z(()=>c,[c]),t!=s.current&&(c(),t&&(o&&o(t),t.style.position="absolute",i.appendChild(t),r&&r(t)),s.current=t)}var Ur=220,Yt="cubic-bezier(.24,.84,.26,.99)",ey=40,Yu=480;function li(e){return e<=Yu?360:440}function ui(e){return e<=Yu?280:320}function qu(e,t){return Me(e,{center:{appearDuration:Ur,hideDuration:Ur,hideTranslate:[0,ey],appearTranslate:[0,0],fade:!0,easing:Yt},right:{appearDuration:li(t.getBoundingClientRect().width),hideDuration:ui(t.getBoundingClientRect().width),hideTranslate:[t.getBoundingClientRect().width,0],appearTranslate:[0,0],fade:!1,easing:Yt},bottom:{appearDuration:li(t.getBoundingClientRect().height),hideDuration:ui(t.getBoundingClientRect().height),hideTranslate:[0,t.getBoundingClientRect().height],appearTranslate:[0,0],fade:!1,easing:Yt},left:{appearDuration:li(t.getBoundingClientRect().height),hideDuration:ui(t.getBoundingClientRect().height),hideTranslate:[-t.getBoundingClientRect().width,0],appearTranslate:[0,0],fade:!1,easing:Yt}})}function Qu([e,t]){return`translate(${e}px, ${t}px)`}function Xu({element:e,transformStart:t,transformEnd:r,opacity:o,duration:n,easing:s}){return new KeyframeEffect(e,[{transform:Qu(t),...o?{opacity:o[0]}:{}},{transform:Qu(r),...o?{opacity:o[1]}:{}}],{duration:n,easing:s,fill:"forwards"})}function ju(e,t){let{hideTranslate:r,appearTranslate:o,fade:n,appearDuration:s,easing:i}=qu(e,t);return Xu({element:t,duration:s,transformStart:r,transformEnd:o,opacity:n?[0,1]:void 0,easing:i})}function Zu(e,t,r){let{hideTranslate:o,fade:n,appearTranslate:s,easing:i,hideDuration:a}=qu(e,t);return Xu({element:t,easing:i,duration:a,transformStart:s,transformEnd:o,opacity:n?[1,0]:void 0})}var ty=e=>new KeyframeEffect(e,[{opacity:0},{opacity:1}],{duration:Ur,easing:Yt,fill:"forwards"}),ry=e=>new KeyframeEffect(e,[{opacity:1},{opacity:0}],{duration:Ur,easing:Yt,fill:"forwards"});function Ju({html:e,layer:t,props:r}){let o=e.renderIf(Gu,()=>r),{element:n}=vn({element:o,getAppearKeyframes:ty,getHideKeyframes:ry});Tn({layer:t,element:n}),Z(()=>{if(!o)return;let s=tr(t),i=s.style.pointerEvents;return s.style.pointerEvents="auto",()=>{s.style.pointerEvents=i}},[o,t])}function oy(e,t){switch(e){case"center":return{left:Math.round((window.innerWidth-t.clientWidth)*.5),top:Math.round((window.innerHeight-t.clientHeight)*.5)};case"right":return{top:0,bottom:0,right:0};case"bottom":return{bottom:0,left:0,right:0};case"left":return{top:0,bottom:0,left:0};default:throw A(e),new Error}}function Rn(e,t){let{left:r,top:o,bottom:n,right:s}=oy(e,t),i=a=>re(a)?`${a}px`:"";t.style.top=i(o),t.style.right=i(s),t.style.bottom=i(n),t.style.left=i(r)}var mi=new Map;function em({type:e,element:t,onModalOverlayClick:r}){let o=b(null),n=bn(),s=ce(r),i=Oe(()=>(mi.has(e)||mi.set(e,[]),m(mi.get(e))),[e]);t&&o.current===null&&(o.current=i.push({idRef:o,redraw:n,onModalOverlayClick:()=>s.current&&s.current()})-1,o.current&&o.current>=1&&i[o.current-1].redraw()),!t&&o.current===i.length-1&&(o.current&&o.current>=1&&i[o.current-1].redraw(),i.pop(),o.current=null),Z(()=>()=>{o.current!==null&&(i.splice(o.current),o.current=null)},[i]);let a=q(()=>{if(i.length){let c=i[i.length-1];c.onModalOverlayClick&&c.onModalOverlayClick()}},[i]);return{isFirst:o.current===0,activeElement:o.current===i.length-1?t:null,onModalOverlayClick:a}}function tm(e){N(()=>{if(e){let t=window.document.body,r=t.style.overflow;return t.style.overflow="hidden",()=>{t.style.overflow=r}}},[e])}function rm({html:e,side:t,createModal:r,close:o,beforeUnmount:n,modalOverlayType:s="default"}){let i=e(r()),{isFirst:a,activeElement:c,onModalOverlayClick:l}=em({type:t=="center"?"popup":"sidePanel",element:i,onModalOverlayClick:o});tm(a),Ju({html:e,layer:"popup",props:a?{type:s,onClick:l}:null});let{element:u}=vn({element:c,getAppearKeyframes:f=>ju(t,f),getHideKeyframes:f=>Zu(t,f)});Tn({layer:"popup",element:u,onAppend:f=>Rn(t,f),beforeUnmount:n}),ai(document.body,()=>i&&Rn(t,i)),ai(i,()=>i&&Rn(t,i))}function om({html:e,side:t,component:r,closeOnOverlayClick:o,modalOverlayType:n}){let[s,i]=H(null);return rm({html:e,side:t,createModal:()=>s&&C(r,s),close:o?()=>i(null):void 0,modalOverlayType:n}),Oe(()=>({open:i,close:()=>i(null)}),[])}function Wr(){return"ontouchstart"in document.documentElement}function nm(e,t,r,o=300){let n=b(0),s=b(0);function i(){n.current=0,clearTimeout(s.current)}ee(e,"click",c=>{c.preventDefault(),n.current+=1,n.current===1&&(s.current=setTimeout(()=>{r&&r(),i()},o)),n.current===2&&(t(),i())})}var sm={button:{withMods:e=>__getCssClass("x0df61__button",e)},icon:"x0df61__icon"};function im(e,{style:t,onClick:r,autotestData:o}){return e`
<button
	class=${sm.button.withMods({style:t})}
	onclick=${r}
	data-at=${J(o)}
>
	${e(hr,{},sm.icon)}
</button>
`}function am(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.293 2.293a1 1 0 1 1 1.414 1.414L14.414 7H16a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1V4a1 1 0 1 1 2 0v1.586l3.293-3.293zm-14 14a1 1 0 1 0 1.414 1.414L7 14.414V16a1 1 0 1 0 2 0v-4a1 1 0 0 0-1-1H4a1 1 0 1 0 0 2h1.586l-3.293 3.293zM18 17v-4a1 1 0 1 0-2 0v3h-3a1 1 0 1 0 0 2h4a1 1 0 0 0 1-1zM3 2a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0V4h3a1 1 0 0 0 0-2H3z" fill="currentColor"/></svg>
`}function cm(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 10h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function lm(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 3a1 1 0 1 0-2 0v6H3a1 1 0 0 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3z" fill="currentColor"/></svg>
`}function fi(e,t,r,o){let n=Math.abs(r.width-window.innerWidth)/2/o,s=-n,i=Math.abs(r.height-window.innerHeight)/2/o,a=-i,c=ot(e,s,n),l=ot(t,a,i);return{fittedX:c,fittedY:l}}function Bn(e,t,r,o,n){let s=r.x+(e.x-t.x)/n,i=r.y+(e.y-t.y)/n,{fittedX:a,fittedY:c}=fi(s,i,o,n);return{x:a,y:c}}function Dn(e,t){let r=e.current.offsetWidth*t,o=e.current.offsetHeight*t;return{horizontalOverflow:r>window.innerWidth,verticalOverflow:o>window.innerHeight}}function An(e,t){let r=b({horizontalOverflow:!1,verticalOverflow:!1});return N(()=>{r.current=Dn(e,t)},[e,r,t]),r}var ny=1;function um(e){return e.buttons===ny}function qt(e){ro(e,(t,r)=>{Ue(t),delete e[r]})}var tt=(e,t,r)=>Fe(e,t,o=>{try{r(o)===!0&&o.preventDefault(),Bl()||Ks()}catch(n){d.error(n)}});var Rt={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255};function kr(e,t,r,o,n=!1){let s=o||{};ee(e,"keydown",n?null:i=>{i.defaultPrevented||i.keyCode===t&&(s.ctrl===void 0||i.ctrlKey===s.ctrl)&&(s.shift===void 0||i.shiftKey===s.shift)&&(s.metaKey===void 0||i.metaKey===s.metaKey)&&(i.preventDefault(),r(i))})}function mm(e,t,r,o){let n=b(window),s=co(),i=s?Rt.FF_DASH:Rt.DASH,a=s?Rt.FF_EQUALS:Rt.EQUALS;kr(n,i,t,o),kr(n,a,e,o),kr(n,Rt.NUM_MINUS,t,o),kr(n,Rt.NUM_PLUS,e,o),kr(n,Rt.ESC,r,o)}function fm(e,t){N(()=>{function r(o){o.deltaY>0?t():e()}return window.addEventListener("wheel",r),()=>{window.removeEventListener("wheel",r)}},[t,e])}function sy(e,t,r,o,n){let s=b({x:0,y:0}),i=b(o),a=ce(o),c=b({width:0,height:0}),l=ce(n),u=An(t,r);N(()=>{let f=null,g=null,x=null,R=()=>{qt([g,x])},T=h=>{let y=h,S=l.current,I=a.current,U={x:y.clientX,y:y.clientY};um(h)?(h.preventDefault(),I=Bn(U,s.current,i.current,c.current,r)):R(),S({x:u.current.horizontalOverflow?I.x:a.current.x,y:u.current.verticalOverflow?I.y:a.current.y})},w=h=>{let y=h,S=t.current.getBoundingClientRect();c.current={width:S.width,height:S.height},i.current=a.current,s.current={x:y.clientX,y:y.clientY},h.preventDefault(),x=tt(window,"mouseup",R),g=tt(window,"mousemove",T)};return(u.current.horizontalOverflow||u.current.verticalOverflow)&&(f=tt(t.current,"mousedown",w)),()=>{qt([f,g,x])}},[r,a,t,l,u])}function dm(e,t,r,o,n,s,i,a){fm(s,i),mm(s,i,a),sy(e,t,r,o,n)}function iy(e){let t={x:e[0].pageX,y:e[0].pageY},r={x:e[1].pageX,y:e[1].pageY};return[t,r]}function di(e){if(e.length===2){let[t,r]=iy(e);return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))}return 0}function pm(e,t,r,o,n){let s=b({startTouchPointsDist:0,startZoomScale:1,startDragPosition:{x:0,y:0},gesture:"none"}),i=An(e,t),a=b(o),c=ce(o),l=b(),u=ce(n),f=q(y=>{s.current.gesture="pinch",s.current.startZoomScale=t,s.current.startTouchPointsDist=di(y.touches)},[t]),g=q(y=>{let I=di(y.touches)/s.current.startTouchPointsDist,U=t*I;r(U)},[t,r]),x=q(y=>{let S=e.current.getBoundingClientRect(),I=y.touches[0];l.current={width:S.width,height:S.height},s.current.startDragPosition={x:I.clientX,y:I.clientY},a.current=c.current,s.current.gesture="drag"},[c,e]),R=q(y=>{let S=u.current,I=c.current,U=y.touches[0],X={x:U.clientX,y:U.clientY};y.touches&&y.touches.length===1&&(I=Bn(X,s.current.startDragPosition,a.current,l.current,t)),S({x:i.current.horizontalOverflow?I.x:c.current.x,y:i.current.verticalOverflow?I.y:c.current.y})},[c,t,u,i]),T=q(y=>{y.cancelable&&y.preventDefault();let S=y;S.touches&&(S.touches.length===2&&s.current.gesture==="pinch"?g(S):S.touches.length===1&&s.current.gesture==="drag"&&(i.current.horizontalOverflow||i.current.verticalOverflow)&&R(S))},[R,g,i]),w=q(()=>{s.current.gesture="none",window.removeEventListener("touchmove",T),window.removeEventListener("touchend",w)},[T]),h=q(y=>{let S=y;S.touches&&(S.touches.length===2?f(S):S.touches.length===1&&x(S),window.addEventListener("touchmove",T,{passive:!1}),window.addEventListener("touchend",w))},[x,f,w,T]);N(()=>(window.addEventListener("touchstart",h),()=>{window.removeEventListener("touchstart",h)}),[h])}var wr={preview:"x2385b__preview",imageContainer:{withMods:e=>__getCssClass("x2385b__image-container",e)},image:{withMods:e=>__getCssClass("x2385b__image",e)},zoomToolbar:{withMods:e=>__getCssClass("x2385b__zoom-toolbar",e)},centerButton:"x2385b__center-button",closeCross:"x2385b__close-cross"},hi=.5,jt=6,Xt=1;function ay(){let[e,t]=H(1);return{imageScale:e,setScale:i=>{i>=jt?t(jt):i<=Xt?t(Xt):t(i)},increaseScale:()=>{let i=e+hi;i<=jt?t(i):t(jt)},decreaseScale:()=>{let i=e-hi;i>=Xt?t(i):t(Xt)},resetScale:()=>{t(Xt)}}}function cy(e,t){let[r,o]=H(!0);return N(()=>{r?(e.current.style.bottom=gs("--tool-bar-bottom"),t.current.style.top=gs("--close-button-top")):(e.current.style.bottom=`-${e.current.offsetHeight}px`,t.current.style.top=`-${t.current.offsetHeight}px`)},[r,o,e,t]),{isToolsVisible:r,setUiVisibility:o}}function ly(e,{style:t,onClose:r}){return xr(e,{component:C(im,{style:t==="dark"?"dark":"default",onClick:r},wr.closeCross),tooltipText:E("Common.Close"),side:"bottom",align:"start"})}function uy(e,{style:t,icon:r,onClick:o,disabled:n}){return He(e,{style:Me(t,{light:"ghost",dark:"ghostInversed"}),size:"small",onClick:o,structure:"icon",icon:r,state:n?"disabled":"default"})}function pi(e,t){return xr(e,{component:C(uy,t),tooltipText:t.tooltipText,show:!Wr()})}function my(e,{style:t,increaseScale:r,decreaseScale:o,resetScale:n,scale:s,ref:i}){return ee(i,"click",a=>a.preventDefault()),e`
<div
	save-ref=${i}
	class=${wr.zoomToolbar.withMods({style:t})}
>
	${e(pi,{style:t,icon:C(cm),tooltipText:E("Common.ImageZoom.Tooltip.Decrease"),onClick:o,disabled:s==Xt})}
	${e(pi,{style:t,icon:C(am),tooltipText:E("Common.ImageZoom.Tooltip.ResetScale"),onClick:n,disabled:s==Xt},wr.centerButton)}
	${e(pi,{style:t,icon:C(lm),tooltipText:E("Common.ImageZoom.Tooltip.Increase"),onClick:r,disabled:s==jt})}
</div>
`}function fy(e,{src:t,hasImageTransition:r,isTouchscreenDevice:o}){return e`
		<img
			class=${wr.image.withMods({transition:r,touchscreen:o})}
			src=${t}
			alt=''
		/>`}function hm(e,{style:t,imageSrc:r,imageCrop:o,closeZoomFn:n}){let[s,i]=H(()=>({x:0,y:0})),[a,c]=H(!1),l=ay(),u=ie(),f=ie(),g=ie(),x=ie(),R=Wr(),{isToolsVisible:T,setUiVisibility:w}=cy(g,f),h=Y=>{let er=Dn(x,Y),{fittedX:Br,fittedY:Dr}=fi(s.x,s.y,{width:x.current.offsetWidth*Y,height:x.current.offsetHeight*Y},Y);i({x:er.horizontalOverflow?Br:0,y:er.verticalOverflow?Dr:0})};function y(Y){c(!1),l.setScale(Y),h(Y)}function S(){c(!0),l.increaseScale()}function I(){c(!0),l.decreaseScale(),h(l.imageScale-hi)}function U(){c(!0),l.resetScale(),i({x:0,y:0})}function X(Y){c(!1),i(Y)}function ve(){R&&w(!T)}function _e(){!R||(T&&w(!1),l.imageScale>=jt/2?U():(c(!0),l.setScale(jt/2)))}ee(g,"click",Y=>Y.preventDefault()),ee(u,"click",Y=>{Y.defaultPrevented||(Y.preventDefault(),n())}),nm(x,_e,ve),pm(x,l.imageScale,y,s,X),dm(u,x,l.imageScale,s,X,S,I,n),N(()=>{let Y=Dn(x,l.imageScale),er=Y.horizontalOverflow||Y.verticalOverflow,Br=x.current.offsetWidth/2,Dr=x.current.offsetHeight/2;x.current.style.cursor=er?"move":"default",x.current.style.transformOrigin=`${Br-s.x}px ${Dr-s.y}px`,x.current.style.transform=`translate(${s.x}px, ${s.y}px) scale(${l.imageScale})`},[x,l.imageScale,s,i]),Z(()=>{u.current.style.height=`${window.innerHeight}px`});let Rr={ref:x};return e`
<div
	class=${wr.preview}
	save-ref=${u}
>
	<div class=${wr.imageContainer.withMods({touchscreen:R})}
	>
		${e.renderIf(fy,()=>!o&&{src:r,hasImageTransition:a,isTouchscreenDevice:R},Rr)}
		${e.renderIf(Sr,()=>o&&{image:o,withSize:!0,containerRef:u},Rr)}
	</div>
	${e(my,{style:t,increaseScale:S,decreaseScale:I,resetScale:U,scale:l.imageScale,ref:g})}
	${e(ly,{style:t,onClose:n},{ref:f})}
</div>`}function gm(e,{style:t}){let r=om({html:e,side:"center",component:hm,closeOnOverlayClick:!0,modalOverlayType:t});return q((o,n=void 0)=>r.open({imageSrc:o,imageCrop:n&&n.crop?{...n,crop:n.crop}:void 0,closeZoomFn:r.close,style:t}),[r,t])}var gi={},dy={},zr=class extends En{constructor({block:t,contentRendererFn:r}){super({block:t,contentRendererFn:r}),this.updateModifier("hide-caption",!t.characters.length)}_renderCaption(t){let r=D.create({key:t.key,characters:t.characters});return vt(new et({paragraph:r,bemInfo:this.createChildBemInfo("caption"),blockBeforeType:null,idPrefix:"caption"}),()=>{},!0)}_getWrapperInlineStyles(){let t=this.getBlock();return t.type===p.IMAGE&&t.alignment==="inner"?{"max-width":`${t.width}px`,"max-height":`${t.height}px`}:null}_render(){let t=this.getBlock();return F(dy,`:media-block-${t.key}`)`
<figure
	class=${this._getCssClasses()}
	style=${this._getInlineStyles()}
>
	<div class=${this._wrapperClassName} style=${this._getWrapperInlineStyles()}>
		${this._contentRendererFn(t,this._contentClassName,this._onContentSizeChange.bind(this))}
		<div class=${this._placeholderClassName} style=${this._getPlaceholderStyles()}></div>
	</div>
	<figcaption class="caption-wrapper">
		${this._renderCaption(t)}
	</figcaption>
</figure>`}};function ym(e,t,r){let o;return gi[t.key]?(o=gi[t.key],o.setBlock(t)):(o=new zr({block:t,contentRendererFn:e}),gi[t.key]=o),o.updateModifier("after",r),o}var yi={},py={};function hy(e,{imageBlock:t,className:r}){let o=gm(e,{style:"light"});return pr(e,C(Sr,{image:t,withImageSelection:!0,className:r,onClick:()=>o(Cr(t.src),t)}))}function gy(e,t){let r=m(si.toCollagedImageBlock(e));return F(py,`:collaged-image-${r.key}`)`
			${we(hy)({imageBlock:r,className:t+" image-block"})}
		`}var _i=class extends zr{constructor({block:t,contentRendererFn:r}){super({block:t,contentRendererFn:r}),this.updateModifier("hide-caption",!t.characters.length),this._grow=null,this._preventCollaging=!1}setGrow(t){this._grow=t}setPreventCollaging(t){this._preventCollaging=t,this.updateModifier("prevent-collaging",this._preventCollaging)}getGrow(){return this._grow}setBlock(t){super.setBlock(t);let r=si.toCollagedImageBlock(t);r&&(this.updateModifier("align",!1),this.updateModifier("blob",r.isBlob),this.updateModifier("collaged",!!r.parentCollageKey),this.updateModifier("prevent-collaging",this._preventCollaging))}_getInlineStyles(){return this._grow?{flex:`${this._grow} 0 0`}:null}_getPlaceholderStyles(){let t=this.getBlock();if(!t.width)return{width:"100%",height:`${t.height}px`};let{width:r,height:o}=Ee(t);return{"padding-bottom":`${(this.fixedRatio?this.fixedRatio:o/r)*100}%`}}_getWrapperInlineStyles(){let t=this.getBlock();if(this._preventCollaging){let{width:r}=Ee(t);return{"max-width":`${r}px`}}return null}};function _m(e){let t;return yi[e.key]?(t=yi[e.key],t.setBlock(e)):(t=new _i({block:e,contentRendererFn:gy}),yi[e.key]=t),t}function Cm(e,t){let r=e.map(n=>{let s=Ee(n);return s.crop?s.width/s.height:n.width/n.height}),o=Math.min(...r);return t.forEach((n,s)=>{n.setGrow(r[s]/o)}),o}var yy=740,Ci={},_y={},Cy="collage-block",xi=class extends M{constructor({block:t}){super({blockName:Cy}),this._block=t,this.updateModifier("align",this._block.alignment)}setBlock(t){this._block!==t&&(this._block=t,this.updateModifier("align",this._block.alignment),this._sheduleRender())}getBlock(){return this._block}_getInlineStyles(){if(this._block.images.length===1&&(document.body.clientWidth<=yy||this._block.alignment==="float-left")){let{width:t}=Ee(this._block.images[0]);return{display:"block",width:`${t}px`}}return null}_renderImagesBlocks(t){let r=t.map(o=>{let n=_m(o);return n.setPreventCollaging(t.length===1&&this._block.alignment!=="float-left"),n});return Cm(t,r),r.map(o=>o._render())}_render(){let t=this.getBlock();return F(_y,`:collage-block-${t.key}`)`
<figure
	class=${this._getCssClasses()}
	style=${this._getInlineStyles()}
>
	${this._renderImagesBlocks(t.images)}
</figure>`}};function xm(e,t){let r;return Ci[e.key]?(r=Ci[e.key],r.setBlock(e)):(r=new xi({block:e}),Ci[e.key]=r),r.updateModifier("after",t),r}var xy={};function Sm(e,t,r){let o=t+" embed-block",n=m(zo.toEmbedBlock(e));function s(i){let a=i.target;try{let c=m(a.contentWindow),l=new ResizeObserver(()=>{l.unobserve(c.document.body),r(c.document.body.clientHeight/c.document.body.clientWidth)});l.observe(c.document.body)}catch(c){}}return F(xy,`:embed-${n.key}`)`
<iframe onload=${s} class=${o} src=${n.src} allowfullscreen loading="lazy">
</iframe>`}function km(e,t){return ym(Sm,e,t)}var Gr="gotoNextQuestion";function wm(e){e.on(Gr,(t,r)=>{let o=r.selectedQuestionIndex;if(o==r.questionsState.length-1){d.error("Goto next operation isn't  available for last question");return}r.selectedQuestionIndex=o+1})}var Si="gotoPreviousQuestion";function Em(e){e.on(Si,(t,r)=>{let o=r.selectedQuestionIndex;if(o==0){d.error("Goto previous operation isn't  available for first question");return}r.selectedQuestionIndex=o-1})}var ki="restartExercise";function bm(e){e.on(ki,(t,r)=>{let o=r.exercise.settings.shuffleAnswers;r.questionsState=r.questionsState.map(n=>jo.create(n.question,o)),r.selectedQuestionIndex=0})}var wi="setTypeInAnswer";function vm(e){e.on(wi,(t,r)=>{let o=m(ge.selectedQuestionState(r)),n=Ae(o);if(!n){d.error(`For question with type: ${o.question.type} not available 'Set type in answer' action`);return}n.contentState.answer=t})}var Ei="submit";function Tm(e){e.on(Ei,(t,r)=>{let o=m(ge.selectedQuestionState(r));o.answered=!0})}var Qr="setChoiceCorrect";function Rm(e){e.on(Qr,(t,r)=>{let o=m(ge.selectedQuestionState(r)),n=o.question.type,s=je(o);if(!s){d.error(`For question with type: ${n} not available 'Set choice correct' action`);return}s.contentState.choicesState.forEach(a=>{n=="mc"?a.selected=a.choice.key==t:a.choice.key==t&&(a.selected=!a.selected)})})}function Sy(e,t){t.forEach(r=>r(e))}function Bm(e){let t=(n,s="")=>{let i=r.get(n);i?e(a=>i(s,a)):d.warn(`Unknown action: ${n}`)},r=new Map;return Sy({on:(n,s)=>{r.set(n,s)}},[Em,wm,Tm,vm,Rm,bm]),{dispatch:t}}var{getCssClass:ky}=ne`/src/roll/components/richtext/renderer/exercise/NavigationButton.css`;function bi(e,t){let r={hidden:!t.visible};return e`
<div
	class=${ky("button",r,t.className)}
	onclick=${t.onClick}
></div>`}function Dm(e,{text:t}){return e`<div>${t}</div>`}function Am(e){let[t,r]=H(!1);return N(()=>{let o=e.current,n=null,s=tt(o,"mousedown",()=>{n=tt(window,"mouseup",()=>{r(!1),Ue(n)}),r(!0)});return()=>qt([n,s])},[e]),t}function Im(e){let[t,r]=H(!1);return N(()=>{let o=e.current,n=[tt(o,"mouseover",()=>r(!0)),tt(o,"mouseout",()=>r(!1))];return()=>qt(n)},[e]),t}function Om(e,t){let r=b(),o=Im(r),n=Am(r);function s(l){t.onclick&&(l.preventDefault(),t.onclick())}let{getCssClass:i}=t,a={...t.mods,over:o,down:n},c=t.focusable===!1?-1:void 0;return e`
<button
	save-ref=${r}
	disabled=${t.disabled}
	class=${`${i("button",a,t.className)}`}
	onmouseover=${t.onmouseover}
	onmouseout=${t.onmouseout}
	tabindex=${c}
	onclick=${s}
	onkeydown=${t.onkeydown}
	onmousedown=${t.onmousedown}
	data-at=${J(t.autotestData)}
>
	${t.text||""}
</button>`}function Er(e){let t=or(e);if(!t)throw new Error("OrderedMap is empty");let r=$(t);if(!r)throw new Error("First block is not paragraph");return r}function wy(e){let t=(i,a)=>(a?i:i.toLowerCase()).trim(),r=e.contentState,o=r.typeIn,n=o.caseSensitive,s=t(r.answer,n);for(let i of o.answers)if(s==t(i.text,n))return!0;return!1}function Ey(e){for(let t of e.contentState.choicesState)if(t.selected!=t.choice.correct)return!1;return!0}function Mm(e){let t=Ae(e);if(t)return wy(t);let r=je(e);return r?Ey(r):(d.error(`Unknown question type: ${e.question.type}`),!1)}function Pm(e){return e.type=="mc"?e:null}function Nm(e){return Pm(e.question)?e:null}function Fm(e){return e.type=="mr"?e:null}function $m(e){return Fm(e.question)?e:null}function Lm(e){let t=je(e);if(t)return!!t.contentState.choicesState.find(n=>n.selected);let r=Ae(e);return r?!!r.contentState.answer:(d.error(`Unknown question type: ${e.question.type}`),!1)}var{getCssClass:vi}=ne`/src/roll/components/richtext/renderer/exercise/question/AttachmentRenderer.css`;function by(e){switch(e.type){case"i":return C(vy,e);case"e":return C(Ty,e);default:throw A(e.type),new Error("Unknown attachment type")}}function vy(e,t){let r=Oe(()=>Ee(t),[t]),o=r.height/r.width;return e`
<div class=${vi("image")} style=${`max-width: ${r.width}px`}>
	<div style=${`padding-bottom: ${o*100}%`}>
		${e(Sr,{image:t})}
	</div>
</div>
`}function Ty(e,t){return e`
<iframe
	class=${vi("embed-attachment")}
	src=${t.src}
></iframe>`}function Km(e,t){let r=t.attachment;return e`
<div
	class=${vi("attachment")}
>
	${e.switch(()=>by(r))}
</div>`}var br={SPAN:"SPAN",DIV:"DIV",SVG:"SVG",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",UL:"UL",OL:"OL",LI:"LI",P:"P",BR:"BR",B:"B",STRONG:"STRONG",I:"I",EM:"EM",A:"A",U:"U",S:"S",STRIKE:"STRIKE",IMG:"IMG",IFRAME:"IFRAME",BLOCKQUOTE:"BLOCKQUOTE",FIGURE:"FIGURE",FIGCAPTION:"FIGCAPTION",LINK:"LINK",CANVAS:"CANVAS",INPUT:"INPUT",BUTTON:"BUTTON",TABLE:"TABLE",TD:"TD"};var Ry={tooltipLink:"x1059a__tooltip-link"};function By(e){let t={},r=[];return K.hasStyle(e,"bold")&&(t["font-weight"]="bold"),K.hasStyle(e,"italic")&&(t["font-style"]="italic"),K.hasStyle(e,"underline")&&r.push("underline"),K.hasStyle(e,"strikethrough")&&r.push("line-through"),r.length&&(t["text-decoration"]=r.join(" ")),t}function Dy(e,{style:t,text:r}){return e`<span style=${t}>${r}</span>`}function Ay(e,{style:t,text:r,url:o,urlTooltipEnabled:n}){let s=ie();return Je({html:e,elementRef:s,text:{html:`<a href=${o} class=${Ry.tooltipLink} target="_blank">${o}</a>`},size:"small",show:n,side:"bottom",stayOnHover:!0}),e`<a href='${o}' save-ref=${s} target=_blank><span style=${t}>${r}</span></a>`}function Iy(e,t,r){let o=By(e.styles),n=e.styles.url,s=e.text;e.isLast&&s.endsWith(`
`)&&(s+=Pe.ZERO_WIDTH_SPACE);let i=t.generate(`chunk_${e.text}${n?"_url":"_text"}`);return n?Gt(i,Ay,{style:o,text:s,url:n,urlTooltipEnabled:r}):Gt(i,Dy,{style:o,text:s})}function Oy(e,t,r){t.length||t.push({text:Pe.ZERO_WIDTH_SPACE,styles:K.create(),isLast:!0});let o=new _r;return e.renderAll(t,n=>Iy(n,o,r))}function Hm(e,{paragraph:t,placeholder:r="",className:o,autotestData:n,urlTooltipEnabled:s}){let i=D.getTextRuns(t),a=i.length?"":r,c=o&&a?o.split(" ").map(l=>`${l} ${l}_empty`).join(" "):o;return e`<p
	class=${c}
	data-key=${t.key}
	data-placeholder=${a}
	data-at=${J(n)}
>${Oy(e,i,s)}</p>`}var Bt={content:"x91b27__content",header:"x91b27__header",subheader:"x91b27__subheader",text:"x91b27__text",defaultParagraph:"x91b27__default-paragraph",exerciseParagraph:"x91b27__exercise-paragraph"};var DP={content:Bt.content,header:Bt.header,subheader:Bt.subheader,text:Bt.text,ul:Bt.text,ol:Bt.text},AP=Bt.defaultParagraph,Vm=Bt.exerciseParagraph;function Dt(e,t){return Hm(e,{...t,className:xe(Vm,t.className),urlTooltipEnabled:!1})}var Ne={NONE:"none",SELECTED:"selected",CORRECT:"correct",INCORRECT:"incorrect"};function In(e,t,r){let o=e.selected,n=e.choice;return t&&r?n.correct?Ne.CORRECT:Ne.INCORRECT:o?Ne.SELECTED:Ne.NONE}function Um(e,t){return e`
<svg
	class=${t.className}
	viewBox="0 0 6 6" 
	xmlns="http://www.w3.org/2000/svg"
>
	<circle cx="828" cy="556" r="3" transform="translate(-825 -553)" fill="none"/>
</svg>`}function Wm(e,t){return e`
<svg
	class=${t.className} 
	viewBox="0 0 12 10" 
	xmlns="http://www.w3.org/2000/svg"
>
	<path d="M10.135.32a1.09 1.09 0 0 1 1.548 1.538L4.405 9.182.317 5.072a1.09 1.09 0 0 1 1.547-1.538l2.54 2.553L10.135.32z" fill="none"/>
</svg>`}function At(e,t){return e`
<svg
	class=${t.className}  
	viewBox="0 0 12 10" 
	xmlns="http://www.w3.org/2000/svg"
>
	<path d="M10.135.32a1.09 1.09 0 0 1 1.548 1.538L4.405 9.182.317 5.072a1.09 1.09 0 0 1 1.547-1.538l2.54 2.553L10.135.32z" fill="none"/>
</svg>`}function It(e,t){return e`
<svg
	class=${t.className} 
	viewBox="0 0 10 10" 
	xmlns="http://www.w3.org/2000/svg"
>
	<path d="M5 3.571L7.857.714a1.01 1.01 0 0 1 1.429 1.429L6.429 5l2.857 2.857a1.01 1.01 0 0 1-1.429 1.428L5 6.428 2.143 9.285A1.01 1.01 0 0 1 .714 7.857L3.571 5 .714 2.142A1.01 1.01 0 0 1 2.143.714L5 3.57z" fill="#42484E"/>
</svg>
`}var{getCssClass:Zt}=ne`/src/roll/components/richtext/renderer/exercise/question/content/multiplechoice/MultipleChoicesRenderer.css`;function My(e){switch(e){case Ne.SELECTED:return C(Um,{className:Zt("radio")});case Ne.CORRECT:return C(At,{className:Zt("correct")});case Ne.INCORRECT:return C(It,{className:Zt("incorrect")});default:return null}}function Py(e,t){return e`
<input type="radio" name="radio"/>
<span class=${Zt("control",{},t.getCssClass("control"))}>
	${e.switch(()=>My(t.status))}
</span>`}function Ny(e,t){let r=Ze(ft),o=t.answered,n=t.state.selected,s=In(t.state,o,t.showCorrectAnswers),i={selected:n,status:s},a=Er(t.state.choice.content.blockMap);function c(l){let u=l.target,f=m(u.parentElement);if(u.tagName!=br.A&&f.tagName!=br.A){l.preventDefault();let g=t.state.choice.key;r(Qr,g)}}return e`
<label
	class=${Zt("choice",i,t.getCssClass("choice"))}
	onclick=${!o&&c}
	disabled=${o?!0:null}
>
	${e(Py,{status:s,getCssClass:t.getCssClass})}
	${e(Dt,{className:Zt("text"),paragraph:a})}
</label>`}function zm(e,t){let r={answered:t.answered};return e`
<div
	class=${Zt("choices",r)}
>
	${e.renderAll(t.state.choicesState,o=>Gt(o.choice.key,Ny,{getCssClass:t.getCssClass,state:o,answered:t.answered,showCorrectAnswers:t.showCorrectAnswers}))}
</div>`}var{getCssClass:Jt}=ne`/src/roll/components/richtext/renderer/exercise/question/content/multipleresponse/MultipleResponsesRenderer.css`;function Fy(e){switch(e){case Ne.SELECTED:return C(Wm,{className:Jt("checkbox")});case Ne.CORRECT:return C(At,{className:Jt("correct")});case Ne.INCORRECT:return C(It,{className:Jt("incorrect")});default:return null}}function $y(e,t){return e`
<input type="checkbox" />
<span class=${Jt("control",{},t.getCssClass("control"))}>
	${e.switch(()=>Fy(t.status))}
</span>`}function Ly(e,t){let r=Ze(ft),o=t.answered,n=t.state.selected,s=In(t.state,o,t.showCorrectAnswers),i={selected:n,status:s},a=Er(t.state.choice.content.blockMap);function c(l){let u=l.target,f=m(u.parentElement);if(u.tagName!=br.A&&f.tagName!=br.A){l.preventDefault();let g=t.state.choice.key;r(Qr,g)}}return e`
<label
	class=${Jt("choice",i,t.getCssClass("choice"))}
	onclick=${!o&&c}
	disabled=${o?!0:null}
>
	${e($y,{getCssClass:t.getCssClass,status:s})}
	${e(Dt,{className:Jt("text"),paragraph:a})}
</label>`}function Gm(e,t){let r={answered:t.answered};return e`
<div
	class=${Jt("choices",r)}
>
	${e.renderAll(t.state.choicesState,o=>Gt(o.choice.key,Ly,{getCssClass:t.getCssClass,state:o,answered:t.answered,showCorrectAnswers:t.showCorrectAnswers}))}
</div>`}var{getCssClass:Yr}=ne`/src/roll/components/richtext/renderer/exercise/question/content/typein/TypeInRenderer.css`;function Ky(e,t){let r=t.answers.map(o=>o.text);return e`
<p class=${Yr("responses")}>
	${E("Roll.Exercise.Player.Content.TypeIn.AcceptableResponses")}: ${r.join(", ")}
</p>`}function Qm(e,t){let r=Ze(ft),o=t.answered,n=t.state,s=n.typeIn,i=s.caseSensitive,a=n.answer;function c(g){return i?g.text==a:g.text.toUpperCase()==a.toUpperCase()}let l=!!s.answers.find(c),u={correct:o&&l,incorrect:o&&!l};function f(g){let x=g.target;r(wi,x.value)}return e`
<div
	class=${Yr("type-in",u,t.getCssClass("type-in"))}
>
	${e.renderIf(At,()=>o&&l&&{className:Yr("correct")})}
	${e.renderIf(It,()=>o&&!l&&{className:Yr("incorrect")})}
	<input
		class=${Yr("answer")}
		value=${n.answer}
		placeholder=${E("Roll.Exercise.Player.Content.TypeIn.Placeholder")}
		oninput=${f}
		readonly=${o?"":void 0}
	/>
	${e.renderIf(Ky,()=>o&&t.showCorrectAnswers&&{answers:s.answers})}
</div>`}var{getCssClass:On}=ne`/src/roll/components/richtext/renderer/exercise/question/FeedbackRenderer.css`;function Hy(e){return e?C(At,{className:""}):C(It,{className:""})}function Ym(e,t){let r=t.correctAnswered,o=xt.getFeedbackText(t.feedback,r),n=!D.isEmptyParagraph(o),s={"with-text":n},i={correct:r,incorrect:!r},a=r?E("Roll.Exercise.Player.Status.Correct"):E("Roll.Exercise.Player.Status.Incorrect");return e`
<div class=${On("feedback-container",s,t.getCssClass("feedback-container"))}>
	<div class=${On("status-icon",i,t.getCssClass("status-icon"))}>
		${e.switch(()=>Hy(r))}
	</div>
	<div class=${On("status-label",{},t.getCssClass("status-label"))}>
		${a}
	</div>
	${e.renderIf(Dt,()=>n&&{className:xe(On("text"),t.getCssClass("feedback-text")),paragraph:o})}
</div>
`}var{getCssClass:Ve}=ne`/src/roll/components/richtext/renderer/exercise/question/QuestionRenderer.css`;function Vy({questionState:e,showCorrectAnswers:t}){let r=Nm(e);if(r)return C(zm,{getCssClass:Ve,state:r.contentState,answered:e.answered,showCorrectAnswers:t});let o=$m(e);if(o)return C(Gm,{getCssClass:Ve,state:o.contentState,answered:e.answered,showCorrectAnswers:t});let n=Ae(e);return n?C(Qm,{getCssClass:Ve,state:n.contentState,answered:e.answered,showCorrectAnswers:t}):(d.error(`Unknown question type: ${e.question.type}`),null)}function qm(e,t){let{questionNumber:r,showCorrectAnswers:o,animationEnabled:n}=t,s=m(t.questionState),i=s.question,a=i.feedback,c=Er(i.description.blockMap),l=Ze(ft),u=Ze(Ti),f=Ze(Ri),g=s.answered,x=Mm(s),R={questionState:s,showCorrectAnswers:o},T;if(g&&n){T={"with-animations":!0},o&&(T["show-correct-answers"]=!0);let h=xt.getFeedbackText(a,x);D.isEmptyParagraph(h)||(T["with-feedback"]=!0)}let w="xLarge";return e`
<div class=${Ve("question",T)}>
	${e.renderIf(Dm,()=>!!r&&{text:r},Ve("question-number"))}
	${e(Dt,{className:Ve("description"),paragraph:c})}
	${e.renderIf(Km,()=>i.attachment&&{attachment:i.attachment})}
	${e.switch(()=>Vy(R))}
	${e.renderIf(He,()=>!g&&{style:"primary",structure:"text",text:E("Roll.Exercise.Player.Button.Submit"),state:Lm(s)?"default":"disabled",onClick:()=>{u(!0),f("bottom"),l(Ei)},size:w},Ve("submit-button"))}
	${e.renderIf(Ym,()=>g&&{getCssClass:Ve,correctAnswered:x,feedback:a})}
	${e.renderIf(He,()=>g&&t.nextQuestionAvailable&&{style:"primary",structure:"text",text:E("Roll.Exercise.Player.Button.Next"),onClick:()=>{u(!1),f("top"),l(Gr)},size:w},Ve("next-button"))}
	${e.renderIf(Om,()=>t.restartAvailable&&{getCssClass:Ve,className:Ve("restart-button"),text:E("Roll.Exercise.Player.Button.RestartExercise"),onclick:()=>{u(!1),f("top"),l(ki)}})}
</div>`}var{getCssClass:Bi}=ne`/src/roll/components/richtext/renderer/exercise/ExerciseBlockRenderer.css`,ft=sn(()=>{}),Ti=sn(()=>{}),Ri=sn(()=>{});function Xm(e,t){let r=t.state,o=t.dispatch,n=t.scrollToElementFn,[s,i]=H(!1),[a,c]=H("none"),l=r.selectedQuestionIndex,u=r.questionsState.length,f=l+1!=u,g=!!r.questionsState.find(h=>!h.answered),x;if(u>1){let h=String((l==null?-1:l)+1).padStart(2,"0"),y=String(u).padStart(2,"0");x=`${h}/${y}`}let R=ge.selectedQuestionState(r),T={[t.mode]:!0},w=b();return N(()=>{a!="none"&&(n(w.current,a),c("none"))},[a,n]),e.setContext(ft,o).setContext(Ti,i).setContext(Ri,c)`
<div
	class=${Bi("exercise",T)}
	contenteditable="false"
	save-ref=${w}
>
	${e(bi,{className:Bi("prev-button"),visible:ge.previousQuestionAvailable(r),onClick:()=>{i(!1),c("top"),o(Si)}})}
	${e.renderIf(qm,()=>!!R&&{questionNumber:x,questionState:R,showCorrectAnswers:r.exercise.settings.showCorrectAnswers,nextQuestionAvailable:f,restartAvailable:!g&&!f,animationEnabled:s})}
	${e(bi,{className:Bi("next-button"),visible:ge.nextQuestionAvailable(r),onClick:()=>{i(!1),c("top"),o(Gr)}})}
</div>`}var Uy="exercise-block",Wy="wrapper",Di={},zy={},Ai=class extends M{constructor(t,r,o){super({blockName:Uy}),this._relatedObject={},this._state=t;let{dispatch:n}=Bm(r);this._dispatch=n,this._scrollToElementFn=o,this._exerciseElement=null}setState(t){this._state!=t&&(this._exerciseElement=null,this._state=t,this._sheduleRender())}_render(){this._exerciseElement||Pl(Xm,n=>{this._exerciseElement=n},this._relatedObject)({state:this._state,dispatch:this._dispatch,mode:"player",scrollToElementFn:this._scrollToElementFn});let t=V([this.createChildBemInfo(Wy)]);return ut(zy,`:exercise-block-${this._state.exercise.key}`)`
<figure class=${this._getCssClasses()}>
	<div class=${t}>
		${this._exerciseElement}
	</div>
</figure>`}};function jm({state:e,updateStateFn:t,blockBeforeType:r,scrollToElementFn:o}){let n=e.exercise.key,s;return Di[n]?(s=Di[n],s.setState(e)):(s=new Ai(e,t,o),Di[n]=s),s.updateModifier("after",r),s}function Zm(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zm-9.68-4.98a1.62 1.62 0 1 1-3.24 0 1.62 1.62 0 0 1 3.24 0zM9.5 10.8a1 1 0 0 1 1-1h1.8a1 1 0 0 1 1 1v5h1.2v2h-4.4v-2h1.2v-4h-.8a1 1 0 0 1-1-1z" fill="currentColor"/></svg>
`}function Jm(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zM7 11a1 1 0 1 0 0 2h10a1 1 0 1 0 0-2H7z" fill="currentColor"/></svg>
`}function ef(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zM13 7a1 1 0 1 0-2 0v4H7a1 1 0 1 0 0 2h4v4a1 1 0 1 0 2 0v-4h4a1 1 0 1 0 0-2h-4V7z" fill="currentColor"/></svg>
`}function tf(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zM9.998 8.834v-.009a1 1 0 0 1-2-.007c0-.351.117-.726.266-1.048.158-.343.394-.714.713-1.057.649-.7 1.654-1.295 3.021-1.295 2.64 0 4 1.876 4 3.4V9.563a3.24 3.24 0 0 1-2.604 3.176.493.493 0 0 0-.396.483v.576a1 1 0 1 1-2 0v-.576c0-1.188.839-2.211 2.004-2.444a1.24 1.24 0 0 0 .996-1.215V8.818c0-.392-.437-1.4-2-1.4-.734 0-1.23.304-1.555.655a2.104 2.104 0 0 0-.364.537c-.055.119-.073.193-.079.216a.033.033 0 0 1-.002.008zM12 16.02a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5z" fill="currentColor"/></svg>
`}function rf(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zm-5.74-2.35a1 1 0 0 0-1.52-1.3l-5.296 6.18-2.737-2.737a1 1 0 0 0-1.414 1.414l3.5 3.5a1 1 0 0 0 1.466-.056l6-7z" fill="currentColor" opacity=".9"/></svg>
`}function of(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 5.32A2.4 2.4 0 0 0 1 7.425v9.151a2.4 2.4 0 0 0 1.25 2.107l8.6 4.69a2.4 2.4 0 0 0 2.299 0l8.6-4.69a2.4 2.4 0 0 0 1.25-2.107v-9.15a2.4 2.4 0 0 0-1.25-2.108l-8.6-4.69a2.4 2.4 0 0 0-2.299 0l-8.6 4.69zm6.857 2.372a1 1 0 0 0-1.414 1.414L10.586 12l-2.893 2.893a1 1 0 1 0 1.414 1.414L12 13.413l2.893 2.893a1 1 0 0 0 1.414-1.414L13.414 12l2.893-2.893a1 1 0 1 0-1.414-1.414L12 10.585 9.107 7.692z" fill="currentColor"/></svg>
`}function nf(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.612 4.62c-1.149-2.031-4.075-2.031-5.224 0L1.53 18.525C.4 20.524 1.844 23 4.142 23h15.716c2.297 0 3.742-2.476 2.612-4.476L14.612 4.62zM12 8.5a1 1 0 0 1 1 1v5a1 1 0 0 1-2 0v-5a1 1 0 0 1 1-1zm1.5 9.8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z" fill="currentColor"/></svg>
`}function Ii(e){switch(e){case"incorrect":case"minus":return Cu;case"correct":case"plus":return Su;case"info":return"var(--roll-player-accent-color)";case"question":return ku;case"warning":return xu;default:throw A(e,`Unknown note type: ${e}`),new Error(`Unknown note type: ${e}`)}}var Gy="note-block",Qy={};function Yy(e){switch(e){case"correct":return C(rf);case"incorrect":return C(of);case"info":return C(Zm);case"minus":return C(Jm);case"plus":return C(ef);case"question":return C(tf);case"warning":return C(nf);default:A(e,`Unknown note type: ${e}`)}}function qy(e,{className:t,noteType:r}){let o=Yy(r),n=Ii(r);return e`
<div
	class=${t}
	style=${{color:n}}
>
	${e(o)}
</div>`}var Mn=class extends M{constructor({block:t,onHyperlinkOverFn:r,readonlyMode:o,isLock:n}){super({blockName:Gy}),this._block=t,this._readonlyMode=o,this._isLock=n,this._onHyperlinkOverFn=r}setBlock(t){this._block=t,this._sheduleRender()}setReadonlyMode(t){this._readonlyMode=t}setLockMode(t){this._isLock!==t&&(this._isLock=t,this._invalidateModifiers())}_invalidateModifiers(){this.updateModifier("lock",this._isLock)}_getNoteBackgroundColor(){return Ii(this._block.noteType)}_getBackgroundInlineStyles(){return{background:this._getNoteBackgroundColor()}}_renderParagraph(t){let r=D.create({key:t.key,characters:t.characters}),o=vt(new et({paragraph:r,blockBeforeType:null,idPrefix:"note-text",placeholder:E("Roll.Note.Placeholder")}),this._onHyperlinkOverFn,this._readonlyMode,this._isLock);return o.classList.add("note-text"),o}_renderDndIcon(t){return this._readonlyMode?null:we(Wu)({className:"dnd-icon"},this._renderFunctionEx(`dnd-icon-${t.key}`))}_render(){let t=this._block;return F(Qy,`:note-block-${this._block.key}`)`
<figure
	class=${this._getCssClasses()}
	contenteditable="false"
	data-key="${t.key}"
	tabindex="-1"
>
	<div
		draggable=${!this._readonlyMode&&!this._isLock}
		class="note-background"
		style=${this._getBackgroundInlineStyles()}
	></div>
	<div class="note-block-content">
		${this._renderDndIcon(t)}
		${we(qy)({className:"note-icon",noteType:t.noteType},this._renderFunctionEx(`note-icon-${t.key}`))}
		<div
			 class="note-text-wrapper"
			 contenteditable="false"
		>
			<div contenteditable=${!this._readonlyMode&&!this._isLock}>
				${this._renderParagraph(t)}
			</div>
		</div>
	</div>
</figure>`}};var Oi={};function sf(e,t,r){let o;return Oi[e.key]?o=Oi[e.key]:(o=new Mn({block:e,onHyperlinkOverFn:r,readonlyMode:!0,isLock:!1}),Oi[e.key]=o),o.updateModifier("after",t),o}var Pn=class extends et{getLineHeightForFontSize(t){return t<=27?"1.5":t<=31?"1.35":t<=56?"1.25":"normal"}};var Xy="table",Mi={},Nn=class extends M{constructor({block:t,isLock:r,onHyperlinkOverFn:o,readonlyMode:n}){super({blockName:Xy}),this._block=t,this._readonlyMode=n,this._isLock=r,this._onHyperlinkOverFn=o,this._onCellFocusSignal=this._createSignal(),this._onCellBlurSignal=this._createSignal(),this._onCellMouseOver=this._createSignal(),this._onCellMouseOut=this._createSignal()}onCellKeyDown(){return this._getBrowserEventSignal(O.KEY_DOWN)}onCellBlurSignal(){return this._onCellBlurSignal}onCellFocusSignal(){return this._onCellFocusSignal}onCellMouseOver(){return this._onCellMouseOver}onCellMouseOut(){return this._onCellMouseOut}setBlock(t){this._block!==t&&(this._block=t,this._sheduleRender())}setLockMode(t){this._isLock!==t&&(this._isLock=t,this._sheduleRender())}getCellElement(t){return this.domElement().querySelector(`[data-cell-key='${t}']`)}getFirstCellFromRow(t){let r=this._block.colsOrder[0];return m(W.getCell(this._block,t,r)).key}getFirstCellFromColumn(t){let r=this._block.rowsOrder[0];return m(W.getCell(this._block,r,t)).key}_renderParagraph(t){let r=$(t);if(!r)throw new Error;let o=vt(new Pn({paragraph:r,idPrefix:"cell-paragraph",blockBeforeType:null}),this._onHyperlinkOverFn,this._readonlyMode,this._isLock);return o.classList.add("cell-paragraph"),o}_getCellStyles(t){let r="",o="",n=1;if(t.forEach(s=>{switch(s.name){case"backgroundColor":o=s.color;break;case"backgroundOpacity":n=s.opacity;break;default:throw A(s),new Error(`unknown meta ${s}`)}}),o){let[s,i,a]=$e(o);r+=`background-color: rgba(${s}, ${i}, ${a}, ${n});`}return r}_renderCell(t,r){let o=this._block.rowsMap[t].colsMap[r],n=()=>{this._onCellFocusSignal.dispatch(o.key)},s=()=>{this._onCellBlurSignal.dispatch(o.key)},i=()=>{this._onCellMouseOver.dispatch({cellKey:o.key,rowKey:t,colKey:r})},a=()=>{this._onCellMouseOut.dispatch({cellKey:o.key,rowKey:t,colKey:r})},c=this._getCellStyles(o.meta);return F(Mi,`:cell-${this._block.key}-${t}-${r}-${o.key}`)`
<td
	style=${c}
	data-table-key=${this._block.key}
	data-cell-key=${o.key}
	data-row-key=${t}
	data-col-key=${r}
	contenteditable=${!this._readonlyMode&&!this._isLock}
	class="table-cell"
	onmouseover=${i}
	onmouseout=${a}
	onfocus=${n}
	onblur=${s}
	onkeydown=${this}
>
	<div
		contenteditable=${!this._readonlyMode&&!this._isLock}
		class="table-cell-content"
	>
		${this._renderParagraph(o.content)}
	</div>
</td>`}_renderRow(t){return F(Mi,`:row-${this._block.key}-${t}`)`
<tr
	contenteditable="false"
	class='table-row'
	data-row-key=${t}
>
	${this._block.colsOrder.map(r=>this._renderCell(t,r))}
</tr>`}_render(){return F(Mi,`:table-block-${this._block.key}`)`
<table
	contenteditable="false"
	class="${this._getCssClasses()}"
>
	${this._block.rowsOrder.map(t=>this._renderRow(t))}
</table>`}};var Fn=class extends M{constructor({tableBlock:t,tableRenderer:r}){super({blockName:"table-scroll-container"}),this._tableBlock=t,this._tableRenderer=r,this._scrollSignal=this._createSignal()}scrollSignal(){return this._scrollSignal}scrollLeft(){return this.domElement().scrollLeft}calculateCellBounds(t){if(!this._wasRendered())return null;let r=this._tableRenderer.getCellElement(t);if(!r)return null;let o=r.getBoundingClientRect(),n=this.domElement(),s=n.getBoundingClientRect();return{width:o.width,height:o.height,left:o.left-s.left+n.scrollLeft,top:o.top-s.top}}_onTableScroll(){this._scrollSignal.dispatch()}};var jy="table-shadow-container",Zy={},$n=class extends M{constructor({tableBlock:t,tableRenderer:r,tableScrollContainer:o}){super({blockName:jy}),this._tableBlock=t,this._tableScrollContainer=o,new ResizeObserver(()=>this._invalidateModifiers()).observe(r.domElement()),new ResizeObserver(()=>this._invalidateModifiers()).observe(this._tableScrollContainer.domElement()),this._addSignal(this._tableScrollContainer.scrollSignal(),()=>this._invalidateModifiers())}_invalidateModifiers(){let t=this._tableScrollContainer.domElement(),r=Math.ceil(t.scrollLeft),o=Math.ceil(t.scrollWidth-t.clientWidth);this.updateModifier("left-shadow",r>0),this.updateModifier("right-shadow",r<o)}_render(){return F(Zy,`:table-block-shadow-${this._tableBlock.key}`)`
			<div class=${this._getCssClasses()}></div>
		`}};var Pi={},Jy="table-block",af={},Ni=class extends Fn{constructor({tableBlock:t,tableRenderer:r}){super({tableBlock:t,tableRenderer:r})}_render(){let t=this._tableBlock;return F(af,`:table-block-scroll-container-${t.key}`)`
		<div
			class="${this._getCssClasses()}"
			contenteditable="false"
			onscroll=${()=>this._onTableScroll()}
		>
			${this._tableRenderer.domElement()}
		</div>`}},Fi=class extends M{constructor({block:t,onHyperlinkOverFn:r}){super({blockName:Jy}),this._block=t,this._tableRenderer=new Nn({block:t,onHyperlinkOverFn:r,readonlyMode:!0,isLock:!1}),this._tableScrollContainer=new Ni({tableRenderer:this._tableRenderer,tableBlock:this._block}),this._tableShadowContainer=new $n({tableBlock:this._block,tableRenderer:this._tableRenderer,tableScrollContainer:this._tableScrollContainer}),this._invalidateModifiers()}setBlock(t){this._block!==t&&(this._block=t,this._invalidateModifiers(),this._tableRenderer.setBlock(t),this._sheduleRender())}_invalidateModifiers(){this.updateModifier("align",this._block.alignment)}_render(){let t=this._block;return F(af,`:table-block-${this._block.key}`)`
			<figure
				class=${this._getCssClasses()}
				contenteditable="false"
				draggable="false"
				data-key=${t.key}
				tabindex="-1"
			>
				${this._tableScrollContainer.domElement()}
				${this._tableShadowContainer.domElement()}
			</figure>`}};function cf(e,t,r){let o;return Pi[e.key]?(o=Pi[e.key],o.setBlock(e)):(o=new Fi({block:e,onHyperlinkOverFn:r}),Pi[e.key]=o),o.updateModifier("after",t),o}function uf({getState:e,updateStateFn:t,scrollToElementFn:r}){let o=j.selectedSection(e()).contentState,n=new kn(o);return n.registerRenderer(p.COLLAGE,xm),n.registerRenderer(p.EMBED,km),n.registerRenderer(p.EXERCISE,(s,i)=>jm({state:m(lf(e(),s.key)),updateStateFn:a=>t(c=>{let l=m(lf(c,s.key));a(l)}),blockBeforeType:i,scrollToElementFn:r})),n.registerRenderer(p.ATTACHMENT,Hu),n.registerRenderer(p.NOTE,sf),n.registerRenderer(p.TABLE,cf),n}function lf(e,t){let n=j.selectedSection(e).contentState.blocksState.find(s=>t===s.key);return n&&n.type===p.EXERCISE?n:null}function mf(e,t,r){let o=r.getBoundingClientRect(),n=t.getBoundingClientRect(),s=Math.round(o.left-n.left+(o.width-e.clientWidth)*.5);ua(e,"left",`${s}px`)}var Ln=class extends Tt{constructor(t,r){super({block:"tooltip-with-tail"}),r&&this.addBemInfo(r),this._relatedElement=t,this._addSignal(this.onDidRedraw(),()=>this._reCalcTailPosition()),this.showBelow()}showAbove(){this.updateModifier("show","above")}showBelow(){this.updateModifier("show","below")}_reCalcTailPosition(){mf(m(this._getChildElement("tail")),this.domElement(),this._relatedElement)}_renderContent(){return this._childHtml("content")`
<div></div>`}_render(){let t=V([this.createChildBemInfo("tail")]);return this._html`
<div class=${this._getCssClasses()} style=${this._getBaseStyles()} onconnected=${()=>this._reCalcTailPosition()}>
	${this._childHtml("tail")`<div class=${t}></div>`}
	${this._renderContent()}
</div>`}};var Kn=class extends M{constructor(){super({blockName:"top-layer"}),this._component=null,this._componentStrategy=null,this._hideSignalKey=null,this._addSignal(this.onDidRedraw(),()=>{this._componentStrategy&&this._componentStrategy.invalidateComponentPosition()})}hide(){this._componentStrategy&&this._componentStrategy.hide()}_showImpl({component:t,componentStrategy:r}){this._component=t,this._componentStrategy=r,this._cleanListeners(),this._hideSignalKey=this._addSignal(this._componentStrategy.hideSignal(),()=>this._hideImpl()),this._componentStrategy.beforeShow(),this._sheduleRender()}_hideImpl(){this._cleanListeners(),this._component=null,this._componentStrategy=null,this._sheduleRender()}_cleanListeners(){this._hideSignalKey&&this._removeSignalByKey(this._hideSignalKey),this._hideSignalKey=null}_render(){return this._html`
<div class=${this._getCssClasses()}>
	${this._component}
</div>`}};var vr=class extends We{constructor(t){super(),this._component=t,this._hideSignal=this._createSignal()}hide(){let t=this._beforeHide();t?t.addCallOnce(()=>this._hideSignal.dispatch()):this._hideSignal.dispatch()}invalidateComponentPosition(){}beforeShow(){}_beforeHide(){}hideSignal(){return this._hideSignal}};var e_=20,t_=10,Ot=class extends vr{constructor({component:t,relatedElement:r,offsetX:o=e_,offsetY:n=t_}){super(t),this._relatedElement=r,this._offsetX=o,this._offsetY=n}invalidateComponentPosition(){let t=this._relatedElement.getBoundingClientRect();(!t.width||!t.height||!this._relatedElement.parentNode)&&d.warn(`incorrect bounding box (${this._relatedElement.parentNode==null})`),this._component.move(t.left-this._offsetX,t.bottom+this._offsetY);let r=this._component.x()||0;r<0&&(r=this._offsetX),r+this._component.domElement().clientWidth>window.innerWidth&&(r=window.innerWidth-this._offsetX-this._component.domElement().clientWidth);let o=this._component.y()||0;o<0&&(o=this._offsetY),o+this._component.domElement().clientHeight>window.innerHeight&&(o=t.top-this._offsetY-this._component.domElement().clientHeight),this._component.move(r,o)}};var ff=150,r_=5,o_=10,Hn=class extends Ot{constructor({tooltip:t,relatedElement:r,offsetX:o=r_,offsetY:n=o_,showBelow:s}){super({component:t,relatedElement:r,offsetX:o,offsetY:n}),this._showBelow=s,this._onMouseOutKey=null,this._onComponentMouseOutKey=null,this._onTouchStartKey=null}beforeShow(){this._onMouseOutKey=this._listen(this._relatedElement,O.MOUSEOUT,o=>this._checkForHide(o)),this._onComponentMouseOutKey=this._listen(this._component.domElement(),O.MOUSEOUT,o=>this._checkForHide(o)),this._onTouchStartKey=this._listen(document.body,O.TOUCHSTART,o=>this._checkForHide(o));let t=this._component.domElement(),r=zt(t);ct({reducer:r,timingFn:on(Et),duration:ff})}_beforeHide(){return this._onMouseOutKey&&this._unlistenByKey(this._onMouseOutKey),this._onComponentMouseOutKey&&this._unlistenByKey(this._onComponentMouseOutKey),this._onTouchStartKey&&this._unlistenByKey(this._onTouchStartKey),this._playHideAnimation()}invalidateComponentPosition(){let t=this._showBelow,r=this._getTooltip(),o=this._relatedElement.getBoundingClientRect();(!o.width||!o.height||!this._relatedElement.parentNode)&&d.warn(`incorrect bounding box (${this._relatedElement.parentNode==null})`);let n=r.domElement().getBoundingClientRect(),s=o.left+o.width*.5-n.width*.5,i=this._showBelow?o.bottom+this._offsetY:o.top-this._offsetY-n.height;r.move(s,i);let a=r.x()||0;a<0&&(a=this._offsetX),a+n.width>window.innerWidth&&(a=window.innerWidth-this._offsetX-n.width);let c=r.y()||0;c<0&&(c=o.bottom+this._offsetY,t=!0),this._component.move(a,c),t?r.showBelow():r.showAbove()}_checkForHide(t){let r=t.relatedTarget;r instanceof Node&&!this._relatedElement.contains(r)&&!this._component.domElement().contains(r)&&this.hide()}_getTooltip(){return this._component}_playHideAnimation(){let t=this._component.domElement(),r=zt(t);return ct({reducer:r,timingFn:Et,duration:ff,afterAnimation:()=>{this._component.hide()}})}};var Vn=class extends vr{constructor(t){super(t),this._onMouseDownKey=null}invalidateComponentPosition(){}beforeShow(){this._onMouseDownKey=this._listen(document.body,O.MOUSEDOWN,t=>this._onMouseDown(t))}_beforeHide(){return this._onMouseDownKey&&this._unlistenByKey(this._onMouseDownKey),null}_onMouseDown(t){let r=t.target;r instanceof Node&&!this._component.domElement().contains(r)&&this.hide()}};var Un=class extends Ot{constructor(t){super(t),this._onMouseDownKey=null}beforeShow(){this._onMouseDownKey=this._listen(document.body,O.MOUSEDOWN,t=>this._onMouseDown(t))}_beforeHide(){return this._onMouseDownKey&&this._unlistenByKey(this._onMouseDownKey),null}_onMouseDown(t){let r=t.target;r instanceof Node&&!this._relatedElement.contains(r)&&!this._component.domElement().contains(r)&&this.hide()}};var n_=5,s_=10,Wn=class extends Ot{constructor({tooltip:t,relatedElement:r,offsetX:o=n_,offsetY:n=s_,showBelow:s}){super({component:t,relatedElement:r,offsetX:o,offsetY:n}),this._showBelow=s,this._onMouseOutKey=null,this._onTouchStartKey=null}beforeShow(){this._onMouseOutKey=this._listen(this._relatedElement,O.MOUSEOUT,()=>this.hide()),this._onTouchStartKey=this._listen(document.body,O.TOUCHSTART,t=>this._checkForHide(t))}_beforeHide(){return this._onMouseOutKey&&this._unlistenByKey(this._onMouseOutKey),this._onTouchStartKey&&this._unlistenByKey(this._onTouchStartKey),null}invalidateComponentPosition(){let t=this._showBelow,r=this._getTooltip(),o=this._relatedElement.getBoundingClientRect();(!o.width||!o.height||!this._relatedElement.parentNode)&&d.warn(`incorrect bounding box (${this._relatedElement.parentNode==null})`);let n=r.domElement().getBoundingClientRect(),s=o.left+o.width*.5-n.width*.5,i=this._showBelow?o.bottom+this._offsetY:o.top-this._offsetY-n.height;r.move(s,i);let a=r.x()||0;a<0&&(a=this._offsetX),a+n.width>window.innerWidth&&(a=window.innerWidth-this._offsetX-n.width);let c=r.y()||0;c<0&&(c=o.bottom+this._offsetY,t=!0),this._component.move(a,c),t?r.showBelow():r.showAbove()}_checkForHide(t){let r=t.target;r instanceof Node&&!this._relatedElement.contains(r)&&!this._component.domElement().contains(r)&&this.hide()}_getTooltip(){return this._component}};var zn=class extends Kn{showPopup(t){this._showImpl({component:t.component,componentStrategy:new Un(t)})}showTooltip({tooltip:t,relatedElement:r,offsetX:o,offsetY:n,showBelow:s=!0,enableAnimation:i=!1}){let a=i?new Hn({tooltip:t,relatedElement:r,offsetX:o,offsetY:n,showBelow:s}):new Wn({tooltip:t,relatedElement:r,offsetX:o,offsetY:n,showBelow:s});this._showImpl({component:t,componentStrategy:a})}showFreePositioningPopup(t){this._showImpl({component:t,componentStrategy:new Vn(t)})}};function df(e,t){return{animate:r=>{e.style.transform=`${t} scaleX(${r})`},complete:()=>{e.style.transform=t||""},changedProperties:["transform"]}}var Gn=class extends Ln{constructor(t,r){super(r),this._tooltipText=t}_renderContent(){let t=V([this.createChildBemInfo("text")]);return this._childHtml("content")`
<div class=${t}>
	${this._tooltipText}
</div>`}};function pf(e,t){let[,r]=dn(e,t);return r}function hf(e,{articleTitle:t,articleTitleClass:r}){let o=ie(),n=pf(o);return Je({html:e,elementRef:o,text:t,show:n}),e`
<div class=${r} save-ref=${o}>${t}</div>`}function gf(e){return e?e.replace(/^\s|\s$/,Pe.NBSP):Pe.ZERO_WIDTH_SPACE}var{getCssClass:Tr}=ne`/src/roll/player/renderer/navigation/NavigationItemRenderer.css`;function i_(e,{progress:t}){let r=t==0?Tr("not-started"):Tr("complete");return e`
<div class=${r}></div>`}function a_(e,{progress:t}){let o=Math.PI*18,n=(100-t*100)/100*o;return e`
<div class=${Tr("progress-bar")}>
	<svg width="22" height="22" viewPort="0 0 11 11" version="1.1" xmlns="http://www.w3.org/2000/svg">
		<circle r="${9}" cx="11" cy="11" fill="transparent" stroke-dasharray="56.5" stroke-dashoffset="0"></circle>
		<circle class=${Tr("bar")} r="${9}" cx="11" cy="11" fill="transparent" stroke-dasharray="56.5" stroke-dashoffset="${n}"></circle>
	</svg>
</div>`}function yf(e,t){let r={selected:t.selected,intro:t.isIntro},o=t.progress,n=Wr(),s=t.disabled,i=s?t.onHoverDisabledState:null,a=n?null:i,c=n?i:null,l=s?null:t.onClick;return e`
<div
	class=${Tr("navigation-item",r)}
	disabled=${s?!0:null}
	onclick=${l}
	onmouseover=${a}
	passive-events=${{ontouchstart:c}}
>
	${e.switch(()=>o==0||o==1?C(i_,{progress:o}):C(a_,{progress:o}))}
	<div class=${Tr("label")}>${gf(t.label)}</div>
</div>`}var Qn=class extends M{constructor(){super({blockName:"total-progress"}),this._progress=0}setProgress(t){this._progress=t,this._sheduleRender()}_render(){let t=Math.floor(this._progress*100)+"%";return this._html`
<div class=${this._getCssClasses()}>
	<div class=${this._getChildClass("numeric")}>${t}</div>
	<div class=${this._getChildClass("indicator-container")}>
		<div class=${this._getChildClass("indicator-progress")} style=${`width: ${t}`}></div>
	</div>
</div>`}};var Yn=class extends M{constructor(t,r,o){super({blockName:"navigation-panel"}),this._state=t,this._settings=r,this._topLayer=o,this._totalProgress=new Qn,this._totalProgress.addBemInfo(this.createChildBemInfo("progress")),this._sections=this._createSections(t),this.onSectionClick=this._createSignal(),this._ignoreNextAnimation=!1,this._articleTitle=this._state.intro.header.title||E("Roll.Common.IntroDefaultTitle")}setState(t){this._state=t,this._updateRenderers()}ignoreNextShowPanelAnimation(){this._ignoreNextAnimation=!0}onTransitionEnd(){return this._getBrowserEventSignal(O.TRANSITIONEND)}redrawOverlay(){this._updateRenderers()}_updateRenderers(){this.updateModifier("showed",this._state.navigationPanelShowed),this.updateModifier("in-overlay",wt()||Xe()),this._totalProgress.setProgress(j.progress(this._state)),this._sections=this._createSections(this._state),this._ignoreNextAnimation?(this._ignoreNextAnimation=!1,this.updateModifier("ignore-transition",!0)):this.hasModifier("ignore-transition")&&this.updateModifier("ignore-transition",!1),this._sheduleRender()}_createSections(t){let r=[],o=-1,n=this._settings.navigationType=="sequence",s=E("Roll.Common.ChapterDefaultTitle");return j.sections(t).forEach((i,a)=>{let c=i==t.intro?E("Roll.Common.NavigationPanel.IntroTitle"):i.header.title||s,l=i.progress,u=i==j.selectedSection(t);u&&(o=l<1?a:a+1);let f=n&&o!=-1&&a>o&&l==0,g=()=>{let R=new Gn(E("Roll.Player.LockedNavigationItemTooltipText"),x);this._topLayer.showTooltip({tooltip:R,relatedElement:x,showBelow:!1,enableAnimation:!0})},x=we(yf)({label:c,progress:i.progress,selected:u,isIntro:i==t.intro,disabled:f,onClick:()=>this.onSectionClick.dispatch(i),onHoverDisabledState:g},this._renderFunctionEx(i.key));r.push(x)}),r}_renderArticleTitle(){let t=V([this.createChildBemInfo("article-title")]);return we(hf)({articleTitle:this._articleTitle,articleTitleClass:t},this._renderFunctionEx("article-title"))}_renderMainPanel(){return this._childHtml("main-panel")`
<div class='main-panel'>
	${this._renderArticleTitle()}
	${this._totalProgress}
	${this._sections}
</div>`}_render(){return this._html`
<div
	class=${this._getCssClasses()}
	ontransitionend=${this}
	onscroll=${()=>this._topLayer.hide()}
>
	${this._renderMainPanel()}
</div>`}};var qr=new Map,_f=!1;function c_(e){qr.delete(e)}function l_(e,t,r){qr.has(t)||(qr.set(t,{}),t.addDestructHandler(()=>{c_(t)}));let o=m(qr.get(t));m(!o[e]),o[e]=r}function u_(e){qr.forEach(t=>{t.hasOwnProperty(e)&&t[e]()})}function m_(e,t){return function(){let r=typeof t=="function"?t():t;return E(e,r)}}function f_({id:e,renderer:t,updateFn:r,parameters:o}){!_f&&ys&&(ys.add(u_),_f=!0);let n=o?m_(e,o):()=>E(e),s=null;if(r){let i=r.bind(t);s=()=>i(n()),s()}else s=()=>t._sheduleRender();return l_(e.toString(),t,s),{getMessageFn:n,forceUpdateFn:s}}function Cf(e,t,r){let{getMessageFn:o}=f_({id:e,renderer:t,parameters:r});return o}var qn=class extends M{constructor({header:t,chapterIndex:r,chaptersCount:o,numberingEnabled:n,defaultTitle:s,marginTop:i,paddingTop:a}){super({blockName:"chapter-header",relatedData:t}),this._header=t,this._defaultTitle=s,this._marginTop=i,this._paddingTop=a,this._labelMessageFn=Cf(pa("Roll.Common.CurrentChapterFromTotal"),this,{current:r+1,total:o}),this._numberingEnabled=n}title(){return m(this._getChildElement("chapter-title"))}_render(){let t=V(["text-chapter-number",this.createChildBemInfo("chapter-number")]),r=V(["text-title",this.createChildBemInfo("title")]),o=this._header.title||this._defaultTitle||E("Roll.Common.ChapterDefaultTitle");return this._html`
<div
	class=${this._getCssClasses()}
	style=${{"margin-top":this._marginTop,"padding-top":this._paddingTop}}
>
	${this._numberingEnabled?this._childHtml("numbering")`<p class=${t}>${this._labelMessageFn()}</p>`:null}
	${this._childHtml("chapter-title")`
		<p class=${r}>${o}</p>
	`}
</div>`}};var Xn=class extends M{constructor(t){super({blockName:"intro-header",relatedData:t}),this._header=t,this.updateModifier("with-cover",!!this._header.coverInfo),this.updateModifier("without-kicker",this._header.kicker=="")}kickerElement(){return this._getChildElement("kicker")}titleElement(){return m(this._getChildElement("intro-title"))}stripElement(){return this._getChildElement("strip")}_coverImage(){let t=this._header.coverInfo;if(!t)return null;let r={"background-image":`url(${t.src})`},o=$e(t.color),n=t.opacity,s={"background-color":`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${n})`},i=V(["intro-cover",this.createChildBemInfo("cover")]),a=V(["intro-cover-overlay",this.createChildBemInfo("cover-overlay")]);return this._childHtml("cover")`
<div style=${r} class=${i}>
	<div style=${s} class="${a}">
</div>`}_render(){let t=V(["intro-container"]),r=V(["text-kicker",this.createChildBemInfo("kicker")]),o=V(["text-title",this.createChildBemInfo("title")]),n=V([this.createChildBemInfo("strip")]),s=this._header.coverInfo?null:this._childHtml("strip")`
				<div class=${n}></div>`;return this._html`
<div class=${this._getCssClasses()}>
	${this._coverImage()}
	<div class=${t}>
		${this._header.kicker?this._childHtml("kicker")`<p class=${r}>${this._header.kicker.trim()||Pe.ZERO_WIDTH_SPACE}</p>`:null}
		${this._childHtml("intro-title")`
			<p class=${o}>${this._header.title?this._header.title.trim()||Pe.ZERO_WIDTH_SPACE:E("Roll.Common.IntroDefaultTitle")}</p>
		`}
		${s}
	</div>
</div>`}};var jn=class extends Tt{constructor({bemInfo:t,blockName:r,autotestData:o}){super({bemInfo:t,blockName:r}),this._pressed=!1,this._disabled=!1,this._autotestData=o}onClick(){return this._getBrowserEventSignal(O.CLICK)}onMouseDown(){return this._getBrowserEventSignal(O.MOUSEDOWN)}onMouseOver(){return this._getBrowserEventSignal(O.MOUSEOVER)}onMouseOut(){return this._getBrowserEventSignal(O.MOUSEOUT)}setDisabled(t){this._disabled=t,this._sheduleRender()}pressed(){return this._pressed}setPressed(t){this._pressed=t,this.updateModifier("pressed",this._pressed)}_render(){return this._html`
			<button class=${this._getCssClasses()}
					disabled=${this._disabled}
					style=${this._getBaseStyles()}
					onclick=${this._getHandler(O.CLICK)}
					data-at=${J(this._autotestData)}
					onmousedown=${this._getHandler(O.MOUSEDOWN)}
					onmouseover=${this._getHandler(O.MOUSEOVER)}
					onmouseout=${this._getHandler(O.MOUSEOUT)}>
				${this._getText()}
			</button>`}};var Zn=class extends Tt{constructor({previewMode:t,subscriptionProduct:r,removeWatermarkUrl:o}){super({blockName:"top-panel"}),this._previewMode=t,this.onClosePlayerRequest=this._createSignal(),this._showNavigationButton=new jn({bemInfo:this.createChildBemInfo("show-navigation")}),this._progress=0,this._animationRunning=!1,this._ignoreProgressTransition=!1,this._addSignal(this.onDidRedraw(),()=>{this._ignoreProgressTransition=!1}),this._subscriptionProduct=r,this._removeWatermarkUrl=o,this._watermarkBemInfo=this.createChildBemInfo("watermark"),this._watermarkLogoBemInfo=this.createChildBemInfo("watermark-logo")}onShowNavigationButtonClick(){return this._showNavigationButton.onClick()}setState(t){this._showNavigationButton.setPressed(t.navigationPanelShowed);let r=j.selectedSection(t);this._progress=r.progress,this._ignoreProgressTransition=r.progress<this._progress,this.updateModifier("floating",wt()||Xe()),this._sheduleRender()}setAnimationRunning(t){this._animationRunning=t}getProgressElement(){return m(this._getChildElement("progress"))}_getWatermarkText(){let t=m(this._subscriptionProduct);switch(t){case"isstudio":return E("TrialWatermark.Text.Page");case"isspace":return E("TrialWatermark.Text.Space");case"islearn":return E("TrialWatermark.Text.Learn");default:A(t)}return""}_isWatermarkRemovalAllowed(){return this._subscriptionProduct==="isstudio"||this._subscriptionProduct==="isspace"}_renderCrossIcon(){if(this._previewMode)return null;let t=we(hr)({}),r=this._getChildClass("close");if(lo()){let o=t.getAttribute("class")||"";o=o.split(" ").includes(r)?o:`${t.className} ${r}`,t.setAttribute("class",o)}else t.classList.add(r);return Fe(t,"click",()=>this.onClosePlayerRequest.dispatch()),t}_render(){let t=V(["top-panel-progress"]),r={width:`calc(100% * ${this._progress})`,transition:this._ignoreProgressTransition?"none":""},o=this._watermarkLogoBemInfo.className();this._subscriptionProduct&&(o+=" "+this._watermarkLogoBemInfo.getModifierWithValueClassName("product",this._subscriptionProduct));let n=this._watermarkBemInfo.className(),s="#";return this._isWatermarkRemovalAllowed()&&(n+=" "+this._watermarkBemInfo.getModifierClassName("removable"),s=this._removeWatermarkUrl||"#"),this._html`
<div class=${this._getCssClasses()} style=${this._getBaseStyles()}>
	${this._showNavigationButton}
	${this._childHtml("progress")`<div class=${t} style=${r}></div>`}
	${this._renderCrossIcon()}
	${!1?this._childHtml("watermark")`
		<a href=${s} target="_blank" class=${n}>
			<div class="${o}"></div>
			<span>${this._getWatermarkText()}</span>
		</a>`:null}
</div>`}};var d_=500,xf=56,$i=53,p_=600,h_=on(Os(Et,.14)),g_=Os(Et,.64),y_=850,Jn=class extends M{constructor({state:t,settings:r,previewMode:o,updateStateFn:n,subscriptionProduct:s,removeWatermarkUrl:i}){super({blockName:"roll-player"}),this._topLayer=new zn,this._topWindow=window;try{window.top.location.href&&(this._topWindow=window.top)}catch(a){}this._state=t,this._settings=r,this._isOnePageLongread=r.longreadType==="onePage",this._topPanel=new Zn({previewMode:o,subscriptionProduct:s,removeWatermarkUrl:i}),this._navigationPanel=new Yn(t,r,this._topLayer),this._navigationPanel.addBemInfo(this.createChildBemInfo("navigation")),this._labelText="",this._iconMeta={},this._introHeaderRenderer=null,this._chapterHeaderRenderer=null,this._richTextRenderer=uf({getState:()=>this._state,updateStateFn:n,scrollToElementFn:(a,c)=>{let u={top:xf+15,bottom:m(this._topWindow).innerHeight-15};pl({element:a,container:this._content(),duration:d_,scrollDirection:c,bounds:u})}}),this._watermarkClassName=this.createChildBemInfo("watermark").className(),this._contentBlockClassName=this.createChildBemInfo("content").className(),this._gotoNextClassName=this.createChildBemInfo("next").className(),this._mainBlockClassName=this.createChildBemInfo("main").className(),this._state=t,this._invalidateRenderer(),this.onToggleNavigationButtonClick=this._createSignal(this._topPanel.onShowNavigationButtonClick()),this.onSectionClick=this._createSignal(),this._addSignal(this._navigationPanel.onSectionClick,a=>{let c=j.selectedSection(this._state);a==c?this._hideNavigationPanel(!1):(this._navigationPanel.ignoreNextShowPanelAnimation(),this._hideNavigationPanel(!0)),this.onSectionClick.dispatch(a)}),this.onGotoNextChapter=this._createSignal(),this.onSelectedSectionProgress=this._createSignal(),this.onClosePlayerRequest=this._createSignal(this._topPanel.onClosePlayerRequest),this._selectedChapterIndex=this._state.selectedSectionIndex,this._navigationPanelHideTransitionFinished=!0,this._prevScrollTop=0,this._abortContentAnimationSignal=new Ce,this._abortProgressAnimationSignal=new Ce,this._abortNextButtonIconSignal=new Ce,this._nextButtonIconAnimationCompleted=!0,hs()&&(this._listen(m(this._topWindow),O.RESIZE,()=>{this._invalidateHeight()}),this._listen(m(this._topWindow),O.SCROLL,()=>{this._invalidateHeight()}),this._listen(m(this._topWindow),O.ORIENTATIONCHANGE,()=>{setTimeout(()=>m(this._topWindow).scrollTo(0,0),500)})),this._listen(m(this._topWindow),O.ORIENTATIONCHANGE,()=>{this._topLayer.hide()}),this._resizeObserver=new ResizeObserver(()=>{this._onResize()})}redrawNavigation(){this._sheduleRender(),this._navigationPanel.redrawOverlay()}state(){return this._state}updateState(t){this._state=t;let r=this._state.selectedSectionIndex,o=this._selectedChapterIndex!=r;if(this._invalidateRenderer(),o){this._selectedChapterIndex=r;let n=this._content();n.scrollTop=0}this._invalidateContentProgress(),o&&(this._runContentAnimation(),this._runProgressAnimation())}ignoreNextShowPanelAnimation(){this._navigationPanel.ignoreNextShowPanelAnimation()}_onResize(){this._topPanel.updateModifier("without-transition",!0),this._topPanel.move(null,0),this._prevScrollTop=0,this._invalidateRenderer()}_runContentAnimation(){let t=this._content();this.updateModifier("hide-content-scroll",t.scrollHeight==t.clientHeight);let r=[];if(this._introHeaderRenderer){let s=this._introHeaderRenderer.domElement();r.push(zt(s))}if(this._chapterHeaderRenderer){let s=this._chapterHeaderRenderer.domElement();r.push(zt(s))}let o=this._richTextRenderer.domElement();r.push(zt(o));let n=nn(r);this._abortContentAnimationSignal.dispatch(),ct({reducer:n,timingFn:h_,duration:p_,abortSignal:this._abortContentAnimationSignal}).addCallOnce(()=>{this.updateModifier("hide-content-scroll",!1)})}_runProgressAnimation(){this._abortProgressAnimationSignal&&this._abortProgressAnimationSignal.dispatch();let t=this._topPanel.getProgressElement(),r=df(t);this._abortProgressAnimationSignal.dispatch(),this._topPanel.setAnimationRunning(!0),ct({reducer:r,timingFn:g_,duration:y_,abortSignal:this._abortProgressAnimationSignal,beforeAnimation:()=>{t.style.transformOrigin="0 50%"},afterAnimation:()=>{t.style.transformOrigin=""}}).addCallOnce(()=>{this._topPanel.setAnimationRunning(!1)})}_getSelectedContent(){return j.selectedSection(this._state).contentState}_getIntroHeader(){let t=this._state;return t.selectedSectionIndex==-1?t.intro.header:null}_getChapterHeader(){return this._state.selectedSectionIndex==-1?null:j.selectedSection(this._state).header}_getSelectedSectionIndex(){return this._state.selectedSectionIndex}_getChaptersCount(){return this._state.chapters.length}_invalidateRenderer(){this._topPanel.setState(this._state),this._navigationPanel.setState(this._state);let t=(wt()||Xe())&&!this._isOnePageLongread;this.updateModifier("with-floating-top-panel",t);let r=this._getIntroHeader();this._introHeaderRenderer=r?new Xn(r):null;let o=this._getChapterHeader();this._removeDisposable(this._chapterHeaderRenderer),this._chapterHeaderRenderer=null,o&&(this._chapterHeaderRenderer=new qn({header:o,chapterIndex:this._getSelectedSectionIndex(),chaptersCount:this._getChaptersCount(),numberingEnabled:this._settings.numberingEnabled}));let n=this._getSelectedContent();this._richTextRenderer.setAllowSubtitle(this._state.selectedSectionIndex>-1),this._richTextRenderer.updateState(n);let s=this._getNextSection();s?this._labelText=this._getNextSectionLabel(s):this._labelText="",this._sheduleRender()}_content(){return m(this.domElement().querySelector(`.${this._contentBlockClassName}`))}_invalidateContentProgress(){let t=this._content(),r=this._getChildElement("next"),o=r?r.clientHeight:0,n=ot(Math.ceil(t.scrollTop+t.clientHeight)/(t.scrollHeight-o),0,1);this.onSelectedSectionProgress.dispatch(n)}_invalidateHeight(){let t=m(this._topWindow).innerHeight;this.domElement().style.height=`${t}px`,this._navigationPanel.domElement().style.height=`${t}px`}_onScroll(t){if(this._invalidateContentProgress(),wt()||Xe()){t.preventDefault(),this._topPanel.updateModifier("without-transition",!1);let r=Math.max(t.target.scrollTop,0);if(r>=this._prevScrollTop){if(r>$i){let o=-Math.min(r,$i);this._topPanel.move(null,o),this._prevScrollTop=r}}else if(r<this._prevScrollTop){if(r<=$i){this._topPanel.updateModifier("without-transition",!0);let o=Math.abs(parseFloat(m(this._topPanel.domElement().style.top)))||0,n=-Math.min(r,o);this._topPanel.move(null,n),this._prevScrollTop=r}this._prevScrollTop-r>xf&&(this._topPanel.move(null,0),this._prevScrollTop=r)}}}_onConnected(){if(this._resizeObserver.observe(this.domElement()),hs()&&this._invalidateHeight(),this._invalidateContentProgress(),co()){let t=()=>{Ie(()=>{this._invalidateContentProgress(),t()})};t()}}_hideNavigationPanel(t=!1){Yo()||!this._navigationPanelHideTransitionFinished||(this._navigationPanelHideTransitionFinished=t,this._addSignal(this._navigationPanel.onTransitionEnd(),()=>{this._navigationPanelHideTransitionFinished=!0,this._sheduleRender()}),this.onToggleNavigationButtonClick.dispatch())}_animateNextButtonIcon(t){let r=this._iconMeta.current;if(r){this._abortNextButtonIconSignal.dispatch();let{y:o}=mo(r),n=t?"":"translateY(4px)",s=this._nextButtonIconAnimationCompleted?t?4:0:Math.abs(o),a=hl({element:r,initialTransform:n,from:s,to:t?0:4});ct({reducer:a,timingFn:dl,duration:150,abortSignal:this._abortNextButtonIconSignal,afterAnimation:()=>{this._nextButtonIconAnimationCompleted=!0}}),this._nextButtonIconAnimationCompleted=!1}}_getNextSection(){return this._settings.nextButtonEnabled?j.nextSection(this._state):null}_getNextSectionLabel(t){return E("Roll.Player.GotoNextChapterLink",{title:t.header.title||E("Roll.Common.ChapterDefaultTitle")})}_renderNextButton(){let r=this._getNextSection()?we(He)({style:"primary",structure:"textAndIcon",text:E("Roll.Player.Continue"),icon:C(du),onClick:()=>this.onGotoNextChapter.dispatch(),size:"xLarge"}):we(He)({style:"primary",structure:"text",text:E("Roll.Player.Complete"),onClick:()=>this.onClosePlayerRequest.dispatch(),size:"xLarge"});return r.classList.add(this._gotoNextClassName),r}_render(){let t=V(["overlay"]),r=V(["next-section-content-container"]),o=V(["next-section-label"]),n=V(["copying-disabled"]),s=this._settings.copyingEnabled?this._getCssClasses():`${this._getCssClasses()} ${n}`;return this._html`
<div data-root="${nt}" class=${s} onconnected=${this._onConnected}>
	${this._isOnePageLongread?null:this._navigationPanel}
	<div class=${this._mainBlockClassName}>
		${this._isOnePageLongread?null:this._topPanel}
		<div class=${this._contentBlockClassName} onscroll=${this._onScroll}>
			${this._introHeaderRenderer}
			${this._chapterHeaderRenderer}
			${this._richTextRenderer}
			${this._settings.nextButtonEnabled?this._childHtml("next")`
					<div class=${r}>
						<div class=${o}>
							${this._labelText}
						</div>
						${this._renderNextButton()}
					</div>`:null}
		</div>
	</div>
	${(wt()||Xe())&&this._state.navigationPanelShowed||!this._navigationPanelHideTransitionFinished?this._childHtml("overlay")`<div class=${t} passive-events=${{ontouchstart:this._hideNavigationPanel}} onmousedown=${this._hideNavigationPanel}></div>`:null}
	${this._topLayer}
</div>`}};var es=class extends We{constructor({playerData:t,previewMode:r=!1,resumeState:o,subscriptionProduct:n,removeWatermarkUrl:s}){super(),this._state=cl(t,o);let i=new rn(t.settings);this.onSelectedSectionChange=this._createSignal(),this.onSectionProgressChange=this._createSignal(),this._renderer=this._addDisposable(new Jn({state:this._state,updateStateFn:c=>this._updateState(c),previewMode:r,settings:i,subscriptionProduct:n,removeWatermarkUrl:s})),this.onClosePlayerRequest=this._createSignal(this._renderer.onClosePlayerRequest),this._addSignal(this._renderer.onToggleNavigationButtonClick,()=>this._toggleNavigationPanel()),this._addSignal(this._renderer.onSectionClick,c=>this._selectSection(c)),this._addSignal(this._renderer.onGotoNextChapter,()=>this._gotoNextChapter()),this._addSignal(this._renderer.onSelectedSectionProgress,c=>{this._setSelectedSectionProgress(c),this.onSectionProgressChange.dispatch()});let a=Lc(()=>this.setInitialNavigationToggleState(),100);this._lastWindowWidth=0,this._listen(window,O.RESIZE,a.call),this.setInitialNavigationToggleState()}getTitle(){return this._state.intro.header.title||E("Roll.Common.IntroDefaultTitle")}getChaptersCount(){return this._state.chapters.length}getCurrentSectionIndex(){return this._state.selectedSectionIndex}getCurrentSectionProgress(){return j.selectedSection(this._state).progress}getCurrentSectionsStateProgress(){return this._state.chapters.map(t=>t.progress===1)}getSuspendData(){return zc(1,ml(this._renderer.state()),tn)}getArticle(){let t=this._state.chapters.map(r=>({key:r.key,title:r.header.title}));return{intro:{key:this._state.intro.key,title:this._state.intro.header.title},chapters:t}}setInitialNavigationToggleState(t=!0){let r=window.innerWidth;if(this._lastWindowWidth>Wt.FULL&&Yo())return;this._lastWindowWidth=r;let o=r>Wt.FULL;this._updateState(n=>{if(o==n.navigationPanelShowed){o&&this._renderer.redrawNavigation();return}t||this._renderer.ignoreNextShowPanelAnimation(),n.navigationPanelShowed!=o&&(n.navigationPanelShowed=o)})}_updateState(t){let r=Qo(this._state,o=>{t(o)});this._state!=r&&(this._state=r,this._renderer.updateState(r),this.onSelectedSectionChange.dispatch())}_selectSection(t){this._updateState(r=>{r.selectedSectionIndex=t.key==r.intro.key?-1:r.chapters.findIndex(o=>o.key==t.key)})}_gotoNextChapter(){this._updateState(t=>{let r=j.nextSection(t);r&&(t.selectedSectionIndex=r.key==t.intro.key?-1:t.chapters.findIndex(o=>o.key==r.key))})}_setSelectedSectionProgress(t){this._updateState(r=>{let o=j.selectedSection(r);isNaN(t)||o.progress>=t||(o.progress=t)})}_toggleNavigationPanel(){this._updateState(t=>{t.navigationPanelShowed=!t.navigationPanelShowed})}domElement(){return this._renderer.domElement()}};async function __(){let e=await us(Sc);return e||(e=await ta(xc),e)?e:null}function C_(e,t,r,o,n,s){Promise.all([us(e),__()]).then(([i,a])=>{if(!a)throw new Error;$c(a).then(c=>{if(!c)throw new Error;Ta({settings:c.settings,i18nData:i});let l=new es({playerData:c,resumeState:o,subscriptionProduct:n,removeWatermarkUrl:s});r(l),document.body.appendChild(l.domElement());let u=ds("popup");document.body.appendChild(u);let f=ds("tooltip");document.body.appendChild(f)})})}function x_(e,t,r,o,n){return new Promise((s,i)=>{C_(e,t,s,r,o,n)})}Xi("start",x_);})();
