(()=>{function j(s,e,t){return t?`${s}_${e}_${t}`:`${s}_${e}`}function ve(s,e={},t){let n=[s];t&&n.push(t);let r=n.slice();for(let i of Object.keys(e)){let o=e[i];for(let c of n)if(typeof o=="boolean")o&&r.push(j(c,i,null));else if(typeof o=="string")r.push(j(c,i,o));else throw new Error(`modifier '${i}' has invalid type`)}return r.join(" ")}window.__getCssClass=ve;var u=class{static log(e,...t){console.log(e,...t)}static warn(e,...t){console.warn(e,...t)}static error(e,...t){console.error(e,...t)}static assert(e,t){e||u.error("Assertion failed"+(t?": "+t:""))}};function l(s,e){return u.assert(s,e),s}function h(s){return s!==void 0}function ee(s){let e=typeof s;return e=="object"&&s!=null||e=="function"}function $(s){return typeof s=="function"}function W(s){return s===null}function te(s,e,t){return function(...n){t&&t(...n);let r=s(...n);return e(this,r,...n),r}}var Oe=0,C=class{constructor(e,t,n,r,i=null){this.listener=e,this.src=t,this.type=n,this.capture=!!r,this.handler=i,this.key=++Oe}};var L=class extends C{constructor(e,t,n,r,i,o){super(e,n,r,i,o),this.proxy=t,this.callOnce=!1,this.removed=!1}markAsRemoved(){this.removed=!0,this.listener=null,this.proxy=null,this.src=null,this.handler=null}};function se(s,e,t){for(let n in s)if(e.call(t,s[n],n,s))return!0;return!1}function ne(s,e,t){if(s){for(let n in s)if(e.call(t,s[n],n,s))return n}}function re(s,e){for(let t in s)if(!(t in e)||s[t]!==e[t])return!1;for(let t in e)if(!(t in s))return!1;return!0}function ie(s,e,t){let n={};if(s)for(let r in s)e.call(t,s[r],r,s)&&(n[r]=s[r]);return n}var O=class{constructor(e){this.src=e,this.listeners={},this._typeCount=0}getTypeCount(){return this._typeCount}getListenerCount(){let e=0;for(let t of Object.keys(this.listeners))e+=this.listeners[t].length;return e}add(e,t,n,r,i){let o=e.toString(),c=this.listeners[o];c||(c=this.listeners[o]=[],this._typeCount++);let a,f=this._findListenerIndex(c,t,r,i);return f>-1?(a=c[f],n||(a.callOnce=!1)):(a=new L(t,null,this.src,o,!!r,i),a.callOnce=n,c.push(a)),a}remove(e,t,n,r){let i=e.toString();if(!(i in this.listeners))return!1;let o=this.listeners[i],c=this._findListenerIndex(o,t,n,r);return c>-1?(o[c].markAsRemoved(),o.splice(c,1),o.length==0&&(delete this.listeners[i],this._typeCount--),!0):!1}removeByKey(e){let t=e.type;if(!(t in this.listeners))return!1;let n=this.listeners[t],r=n.indexOf(e),i=r>=0;return i&&(n.splice(r,1),e.markAsRemoved(),this.listeners[t].length==0&&(delete this.listeners[t],--this._typeCount)),i}getListeners(e,t){let n=this.listeners[e.toString()],r=[];if(n)for(let i=0;i<n.length;++i){let o=n[i];o.capture==t&&r.push(o)}return r}getListener(e,t,n,r){let i=this.listeners[e.toString()],o=-1;return i&&(o=this._findListenerIndex(i,t,n,r)),o>-1?i[o]:null}hasListener(e="",t){let n=h(e),r=n?e.toString():"",i=h(t);return se(this.listeners,o=>{for(let c=0;c<o.length;++c)if((!n||o[c].type==r)&&(!i||o[c].capture==t))return!0;return!1})}_findListenerIndex(e,t,n,r){for(let i=0;i<e.length;++i){let o=e[i];if(!o.removed&&o.listener==t&&o.capture==!!n&&o.handler==r)return i}return-1}};var q="ispring_lm_"+(Math.random()*1e6|0),G;function Ie(){if(!_.addEventListener||!Object.defineProperty)return!1;let s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});return _.addEventListener("test",Function.prototype,e),_.removeEventListener("test",Function.prototype,e),s}function we(){return h(G)||(G=Ie()),G}function Y(s){let e=s[q];return e instanceof O?e:null}function g(s){let e=s;if(!e||e.removed)return!1;let t=e.src,n=e.type,r=e.proxy;t.removeEventListener&&t.removeEventListener(n,r,e.capture);let i=Y(t);return i?(i.removeByKey(e),i.getTypeCount()==0&&(t[q]=null)):e.markAsRemoved(),!0}function Te(s){let{listener:e,handler:t,callOnce:n}=s,r=t?e.bind(t):e;return n?(...i)=>{r(...i),g(s)}:r}function I(s,e,t,n,r=null){let i=ee(n)?l(n).capture:!!n,o=Y(s);o||(o=new O(s),s[q]=o);let c=!!(n&&n.once),a=o.add(e,t,c,i,r);if(a.proxy)return a;let f=Te(a);if(a.proxy=f,s.addEventListener){let F=we()?n:i;h(F)||(F=!1),s.addEventListener(e.toString(),f,F)}else throw new Error("addEventListener is unavailable.");return a}function oe(s,e,t,n,r){n=!!n;let i=Y(s);return i?i.getListener(e,t,n,r):null}var x=class{dispose(){}};var Ce=0,P=class extends x{constructor(){super(),this._listenersKeys=null,this._activeSignals=null,this._disposables=null,this._customDestructHandlers=null}addDestructHandler(e){this._customDestructHandlers=this._customDestructHandlers||[],this._customDestructHandlers.push(e)}dispose(){if(this._destruct(),this._customDestructHandlers)for(let e of this._customDestructHandlers)e();if(this._disposables)for(let e of this._disposables)J(e);if(this._listenersKeys){for(let e of this._listenersKeys)g(e);this._listenersKeys=null}if(this._activeSignals)for(let e of Object.keys(this._activeSignals))this._removeSignalByKey(e)}_listen(e,t,n,r){this._listenersKeys=this._listenersKeys||[];let i=I(this._getEventTarget(e),t,n,r,this);return this._listenersKeys.push(i),i}_unlisten(e,t,n){let r=oe(this._getEventTarget(e),t,n,!1);return!!r&&this._unlistenByKey(r)}_unlistenByKey(e){let t=l(this._listenersKeys),n=t.indexOf(e);return n>=0&&t.splice(n,1),g(e)}_addSignal(e,t,n){this._activeSignals=this._activeSignals||{},e.add(t,this,n);let r=++Ce;return this._activeSignals[r]={dispatcher:e,fn:t,priority:n},r}_addSignalCallOnce(e,t,n){let r=(...i)=>{t.apply(this,i),this._removeSignal(e,r,n)};this._addSignal(e,r,n)}_removeSignal(e,t,n){let r=ne(this._activeSignals,i=>re(i,{dispatcher:e,fn:t,priority:n}));r?this._removeSignalByKey(r):!1&&u.warn("unknown signal")}_removeSignalByKey(e){if(!(this._activeSignals&&this._activeSignals[e])){u.warn("unknown signal key");return}let{dispatcher:t,fn:n,priority:r}=this._activeSignals[e];t.remove(n,this,r),delete this._activeSignals[e]}_removeAllEvents(e){if(!!e){if(this._activeSignals){let t=ie(this._activeSignals,n=>n.dispatcher.eventOwner()==e);for(let n of Object.keys(t))this._removeSignalByKey(n)}if(this._listenersKeys){let t=this._getEventTarget(e),n=this._listenersKeys.filter(r=>r.src==t);for(let r of n)this._unlistenByKey(r)}}}_name(){let e=this,t=e.owner,n=`[${this.constructor.name}]`;return t&&(n+=` in [${t.constructor.name}].${e.ownerPropertyName()}`),n}_addDisposable(e){if(this._disposables=this._disposables||[],!e||this._disposables.includes(e))return e;if(!1){let t=e;l(this._disposables.indexOf(e)<0),l(!t.owner),t.owner=this,t.ownerPropertyName=()=>{let n=this;for(let r of Object.keys(n))if(n[r]==t)return r;return"unknown"}}return this._disposables.push(e),e}_removeDisposable(...e){if(!!this._disposables){for(let t of e)if(t){this._cleanItemDependencies(t);let n=this._disposables.indexOf(t);n>=0&&(this._disposables.splice(n,1),J(t))}}}_cleanItemDependencies(e){this._removeAllEvents(e)}_cleanDependencies(...e){for(let t of e)t&&this._cleanItemDependencies(t)}_getEventTarget(e){return e}_destruct(){}};function Le(s,e){return s>e?1:s<e?-1:0}function ce(s,e){if(!s)return!1;let t=s.indexOf(e),n=t>=0;return n&&s.splice(t,1),n}function xe(s,e,t,n,r){let i=0,o=s.length,c;for(;i<o;){let a=i+o>>1,f;t?f=e.call(r,s[a],a,s):f=e(n,s[a]),f>0?i=a+1:(o=a,c=!f)}return c?i:~i}function Ve(s,e,t=Le){return xe(s,t,!1,e)}function ae(s,e,t){let n=Ve(s,e,t);return n<0?(s.splice(-(n+1),0,e),!0):!1}var A=class{constructor(){this._priorities=null,this._values=null,this._zeroPriorityValues=null}push(e,t){this._addPriority(t);let n=this._getPriorityValues(t);n?n.push(e):u.warn("Priority array values are zero")}remove(e,t){let n=this._getPriorityValues(t);n&&ce(n,e)}removeAt(e,t){let n=this._getPriorityValues(t);n&&n.splice(e,1)}getValuesWithPriority(e){if(e==0)return this._zeroPriorityValues||[];if(!this._values)return u.warn("Priority array values are zero"),[];if(!(e in this._values))return[];let t=this._getPriorityValues(e);return t||(u.warn("Priority array values are zero"),[])}getAllValues(){if(!this._values)return this._zeroPriorityValues?this._zeroPriorityValues.slice():[];let e=[],t=l(this._priorities);for(let n=0;n<t.length;++n){let r=t[n],i=this._getPriorityValues(r);i&&e.push(...i)}return e}_addPriority(e){if(e==0){this._zeroPriorityValues=this._zeroPriorityValues||[];return}this._priorities=this._priorities||[0],this._values=this._values||{},e in this._values||(this._values[e]=[],ae(this._priorities,e))}_getPriorityValues(e){return e==0?this._zeroPriorityValues:l(this._values)[e]}};var m=class extends P{constructor(e=null){super(),this._handlers=null,this._owner=e}eventOwner(){return this._owner}add(e,t,n=0){this._handlers=this._handlers||new A,this._handlers.push({fn:e,context:t},n)}addCallOnce(e,t,n=0){let r=i=>{e.call(t,i),this.remove(r,t,n)};this.add(r,t,n)}remove(e,t,n=0){if(!this._handlers){u.warn("Signal has no handlers!");return}let r=this._handlers.getValuesWithPriority(n),i=r.length;for(let o=0;o<i;++o){let c=r[o];if(c.fn==e&&c.context==t){this._handlers.removeAt(o,n);break}}}has(e,t,n=0){if(!this._handlers)return!1;let r=this._handlers.getValuesWithPriority(n),i=r.length;for(let o=0;o<i;++o){let c=r[o];if(c.fn==e&&c.context==t)return!0}return!1}dispatch(e){if(!this._handlers)return;let t=this._handlers.getAllValues(),n=t.length;for(let r=0;r<n;++r){let i=t[r];if(this._handlers.getAllValues().indexOf(i)!=-1)if(!1)i.fn.apply(i.context,[e]);else try{i.fn.apply(i.context,[e])}catch(o){X(o,!0)}}}toFn(){return e=>this.dispatch(e)}handlersCount(){return this._handlers?this._handlers.getAllValues().length:0}};var _=Function("return this")(),Pe=()=>!0;function D(s,e){if(!!Pe()){if(e){u.error(s);return}u.warn(s)}}function X(s,e){let t=s.stack||s.toString();String(t).indexOf(s.message)<0&&D(s.message,e),D(t,e)}var Ae=Object.getPrototypeOf({});function J(s){!s||(l(!s.disposed),!1&&setTimeout(()=>{let e=s.owner?s.owner.constructor.name:null,t=s.owner?s.ownerPropertyName():null;if(s.owner=null,s.ownerPropertyName=null,s instanceof m){let i=e?`[${e}].${t} have active signals`:void 0;l(s.handlersCount()==0,i)}let n=s,r=new Set;for(;(n=l(Object.getPrototypeOf(n)))!=Ae;)Object.getOwnPropertyNames(n).forEach(i=>{i!="constructor"&&r.add(i)});r.forEach(i=>{$(s[i])&&(s[i]=te(s[i].bind(s),()=>{D(`using method ${i} from disposed object ${s.constructor.name}`,!0)}))})},100),$(s.dispose)&&s.dispose(),s.disposed=!0)}function le(s,e){let t=s.split("."),n=_;!(t[0]in n)&&typeof n.execScript!="undefined"&&n.execScript("var "+t[0]);for(let r;t.length&&(r=t.shift());)!t.length&&h(e)?n[r]=e:n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}}!1||(_.onerror=function(...s){let[e,,,,t]=s;return t?X(t,!0):D(e,!0),!0});var Z={CLICK:"click",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",CHANGE:"change",SELECTION_CHANGE:"selectionchange",INPUT:"input",TEXT_INPUT:"textInput",KEY_DOWN:"keydown",KEY_PRESS:"keypress",PASTE:"paste",CUT:"cut",COPY:"copy",BLUR:"blur",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",LOAD:"load",LOAD_END:"loadend",UNLOAD:"unload",BEFOREUNLOAD:"beforeunload",ERROR:"error",DRAG_START:"dragstart",DRAG_OVER:"dragover",DRAG_END:"dragend",RESIZE:"resize",SCROLL:"scroll",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",ORIENTATIONCHANGE:"orientationchange",CUSTOM_CONNECTED:"connected",CUSTOM_DISCONNECTED:"disconnected",TRANSITIONEND:"transitionend",TOUCHSTART:"touchstart",VISIBILITYCHANGE:"visibilitychange"};function ue(s){let e=document.createElement("a");e.href="goodbye.html",s.location.replace(e.href)}function p(){try{window==window.top?(window.open("","_self",""),window.close()):ue(window)}catch(s){ue(l(window.top))}}function fe(){return{onSessionStart:new m,onSessionEnd:new m}}var R=class{constructor(e){this._options=e}usePassedStatus(e){return!!(this._options&(e?2:1))}};function he(s){let e=Math.floor(s/3600),t=Math.floor(s%3600/60),n=Math.floor(s%60),r=s-Math.floor(s);return{h:e,m:t,s:n,ms:r}}function Q(s){return s<10?"0"+s:s}function b(s){let e=he(s);return"PT"+e.h+"H"+e.m+"M"+e.s+"S"}function T(s){let e=he(s);return Q(e.h)+":"+Q(e.m)+":"+Q(e.s)}function w(s){return s<10?"0"+s:s}function pe(s){return typeof s=="number"&&(s=new Date(s)),s.getUTCFullYear()+"-"+w(s.getUTCMonth()+1)+"-"+w(s.getUTCDate())+"T"+w(s.getUTCHours())+":"+w(s.getUTCMinutes())+":"+w(s.getUTCSeconds())+".0Z"}var d=class{constructor(e,t){this._apiVersion=e,this._config=t,this._active=!1,this._playerApi=null,this._suspendEnabled=!0,this._startTime=0,this._lmsApi=null,this._closeEventKeys=[],this._progress=[],this._sessionStateNotifier=fe()}initializeLms(e){try{let t=new R(this._config.flags);this._lmsApi=this._createLmsApi(this._apiVersion,t,this._suspendEnabled)}catch(t){u.error(t),this._onLmsApiInitializationFailed(e)}this._lmsApi&&this._lmsApi.initialize(this._onLmsApiInitialized.bind(this,e),this._onLmsApiInitializationFailed.bind(this,e))}_createLmsApi(e,t,n){}_onLmsApiInitialized(e){let n=l(this._lmsApi).getSuspendData();e(n||void 0).then(i=>this._start(i)),this._closeEventKeys=[I(window,Z.UNLOAD,()=>this._closeLms()),I(window,Z.BEFOREUNLOAD,()=>this._closeLms())]}_onLmsApiInitializationFailed(e){u.error("Lms initialization failed"),e().then(()=>{})}_start(e){this._playerApi=e,this._active=!0,this._startTime=Date.now(),this._sessionStateNotifier.onSessionStart.dispatch(e.getTitle()),e.onClosePlayerRequest.add(()=>{this._closeLms(),p()}),this._progress=e.getCurrentSectionsStateProgress(),e.onSelectedSectionChange.add(()=>this._updatePersistedState()),e.onSectionProgressChange.add(()=>{let t=e.getCurrentSectionIndex();t>=0&&!this._progress[t]&&e.getCurrentSectionProgress()>=1&&(l(this._lmsApi).setItemViewed(t),this._progress[t]=!0,this._updateUserProgress())}),this._updateUserProgress()}_createIri(){return`ispring://roll/${encodeURIComponent(this._config.contentId)}`}_closeLms(){if(this._closeEventKeys)for(let t of this._closeEventKeys)g(t);this._active&&(this._active=!1,this._updateDuration(),this._updateUserProgressOnClose()),this._sessionStateNotifier.onSessionEnd.dispatch();let e=l(this._lmsApi);this._suspendEnabled?e.suspend():e.terminate()}_updateUserProgressOnClose(){}_updateUserProgress(){let e=this._progress.filter(n=>n).length,t=l(this._lmsApi);t.setProgress(e/this._progress.length),t.setStatus(null,e>=this._config.chaptersCount),t.commit()}_updateDuration(){let e=Date.now()-this._startTime;l(this._lmsApi).setLessonDuration(e)}_updatePersistedState(){this._suspendEnabled&&this._playerApi&&this._lmsApi&&this._lmsApi.setSuspendData(this._playerApi.getSuspendData())}};function me(s){return s.trim().replace(/[^\w-]/g,"_")}var De={id:"id",type:"type",score:"weighting",correctResponse:"correct_responses.%INDEX%.pattern",userResponse:"student_response",result:"result",duration:"latency",visitTime:"time"},Re={id:"id",type:"type",score:"weighting",correctResponse:"correct_responses.%INDEX%.pattern",userResponse:"learner_response",description:"description",result:"result",duration:"latency",visitTime:"timestamp"},be={};function de(s){return"cmi.interactions."+s+"."}function _e(s){return parseInt(s.getValue("cmi.interactions._count"),10)}function ge(s,e,t,n,r){if(r){let a=s.id+"_"+s.description,f=me(a.substr(0,255));t.setValue(e+n.id,f)}else t.setValue(e+n.id,s.id);t.setValue(e+n.type,s.type),t.setValue(e+n.score,s.score);let i=s.correctResponses||[];for(let a=0;a<i.length;++a){let f=n.correctResponse.replace("%INDEX%",String(a));t.setValue(e+f,i[a])}let o=s.userResponse;o!=null&&t.setValue(e+n.userResponse,o);function c(a){return r&&a=="incorrect"?"wrong":a}t.setValue(e+n.result,c(s.result))}function ye(s,e){let t=be,n=s.id,r=-1;if(s.id in t?r=t[n]:(r=_e(e),t[n]=r),r<0)return;let i=de(r),o=De;ge(s,i,e,o,!0);let c=s.duration;c!=null&&e.setValue(i+o.duration,T(c/1e3));let a=s.visitTime;if(a!=null){let f=a.getHours()*3600+a.getMinutes()*60+a.getSeconds();e.setValue(i+o.visitTime,T(f))}}function Se(s,e){let t=_e(e);if(t<0)return;let n=de(t),r=Re;ge(s,n,e,r,!1),e.setValue(n+r.description,s.description);let i=s.duration;i!=null&&e.setValue(n+r.duration,b(i/1e3));let o=s.visitTime;o!=null&&e.setValue(n+r.visitTime,pe(o))}var M={NORMAL:"normal",BROWSE:"browse",REVIEW:"review"};function N(s,e,t=!0){if(t)return parseFloat(s.toFixed(e))+"";let n=Math.pow(10,e);return Math.floor(s*n)/n+""}function Ee(s,e){try{for(let n=0;n<255;++n){if(s[e])return s[e];let r=s.parent;if(!r||s==r)break;s=r}}catch(t){}return null}function U(s,e){return Ee(s,e)||s.opener&&Ee(s.opener,e)}var y=class{constructor(e,t){this._api=e,this._passed=!1,this._commitsCount=0,this._suspendEnabled=t}static create(e){let t=U(window,"API");return t?new y(t,e):null}initialize(){try{return this._toBool(this._api.LMSInitialize(""))}catch(e){}return!1}terminate(e){this.setValue("cmi.core.exit",e?this._getSuspendState():""),this.commit();try{return this._toBool(this._api.LMSFinish(""))}catch(t){}return!1}_getSuspendState(){return this._passed?"":"suspend"}commit(){this._commitsCount==0&&this.setValue("cmi.core.exit",this._suspendEnabled?this._getSuspendState():"");try{let e=this._toBool(this._api.LMSCommit(""));return this._commitsCount+=1,e}catch(e){}return!1}setPassed(e){this._passed=e}getValue(e){try{return this._api.LMSGetValue(e)}catch(t){}return""}setValue(e,t){typeof t=="number"&&(t=N(Number(t),2)+"");try{return this._toBool(this._api.LMSSetValue(e,t))}catch(n){}return!1}_toBool(e){return e=="true"}};var z=class{constructor(e){this._base=y.create(e),this._initialized=!1}initialize(){return this._initialized?!0:(this._initialized=this._base?this._base.initialize():!1,this._initialized)}initializeAsync(e,t){if(this._initialized){e();return}this._base?(this._initialized=this._base.initialize(),this._initialized?e():t()):(this._initialized=!1,t())}terminate(e){return this._base?this._base.terminate(e):!1}commit(){return this._base?this._base.commit():!1}getValue(e){return this._base?this._base.getValue(e):""}setValue(e,t){return this._base?this._base.setValue(e,t):!1}setScore(e,t,n,r){this.setValue("cmi.core.score.raw",e),this.setValue("cmi.core.score.min",t),this.setValue("cmi.core.score.max",n)}setProgress(e){}setSessionTime(e){this.setValue("cmi.core.session_time",T(e/1e3))}getSuspendedData(){return this.getValue("cmi.suspend_data")}getLaunchMode(){return M.NORMAL}setSuspendedData(e){this.setValue("cmi.suspend_data",e)}setStatus(e,t){W(e)?W(t)?this.setValue("cmi.core.lesson_status","unknown"):this.setValue("cmi.core.lesson_status",t?"completed":"incomplete"):this.setValue("cmi.core.lesson_status",e?"passed":"failed")}setPassed(e){l(this._base).setPassed(e)}addInteraction(e){ye(e,this)}getUserInfo(){return{id:this.getValue("cmi.core.student_id"),name:this.getValue("cmi.core.student_name"),email:""}}};var S=class{constructor(){this._connector=null}createConnector(){}getLearnerPreferences(){return null}initialize(e,t){this._connector=this.createConnector(),this._connector?this._connector.initializeAsync(e,t):t()}commit(){this._getConnector().commit()}suspend(){this._getConnector().terminate(!0),p()}terminate(){this._getConnector().terminate(!1),p()}setSuspendData(e){this._getConnector().setSuspendedData(e)}getSuspendData(){return this._getConnector().getSuspendedData()}setStatus(e,t){this._getConnector().setStatus(e,t)}setScore(e,t,n,r){let i=n-t>0?e/(n-t):0;r!=null&&(e=i*r,n=r),this._getConnector().setScore(e,t,n,i)}setItemViewed(e){}setProgress(e){this._getConnector().setProgress(e)}setLessonDuration(e){this._getConnector().setSessionTime(e)}getUserInfo(){return this._getConnector().getUserInfo()}_getConnector(){if(!this._connector)throw new Error("Connector not created");return this._connector}};var k=class extends S{constructor(e,t){super(),this._reportOptions=e,this._suspendEnabled=t}createConnector(){return new z(this._suspendEnabled)}setStatus(e,t){this._getConnector().setStatus(null,t)}suspend(){super.suspend(),p()}terminate(){super.terminate(),p()}};var K={SECOND:"2",THIRD:"3",FOURTH:"4"};var E=class{constructor(e,t,n){this._api=e,this._edition=t,this._passed=!1,this._commitsCount=0,this._suspendEnabled=n}static create(e,t){let n=U(window,"API_1484_11");return n?new E(n,e,t):null}initialize(){try{return this._toBool(this._api.Initialize(""))}catch(e){}return!1}terminate(e){this.setValue("cmi.exit",e?this._getSuspendState():"normal"),this.setValue("adl.nav.request","exitAll"),this.commit();try{return this._toBool(this._api.Terminate(""))}catch(t){}return!1}_getSuspendState(){return this._passed?"":"suspend"}commit(){this._commitsCount==0&&this.setValue("cmi.exit",this._suspendEnabled?this._getSuspendState():"normal");try{let e=this._toBool(this._api.Commit(""));return this._commitsCount+=1,e}catch(e){}return!1}getValue(e){try{return this._api.GetValue(e)}catch(t){}return""}setValue(e,t){typeof t=="number"&&(t=N(t,7));try{return this._toBool(this._api.SetValue(e,t))}catch(n){}return!1}setPassed(e){this._passed=e}getSuspendDataLimit(){return this._edition==K.SECOND?4e3:64e3}_toBool(e){return e=="true"}};var B=class{constructor(e,t){this._base=E.create(e,t),this._initialized=!1}initialize(){return this._initialized?!0:(this._initialized=this._base?this._base.initialize():!1,this._initialized)}initializeAsync(e,t){if(this._initialized){e();return}this._base?(this._initialized=this._base.initialize(),this._initialized?e():t()):(this._initialized=!1,t())}terminate(e){return this._base?this._base.terminate(e):!1}commit(){return this._base?this._base.commit():!1}getValue(e){return this._base?this._base.getValue(e):""}setValue(e,t){return this._base?this._base.setValue(e,t):!1}setScore(e,t,n,r=0){this.setValue("cmi.score.raw",e),this.setValue("cmi.score.min",t),this.setValue("cmi.score.max",n),this.setValue("cmi.score.scaled",r)}setProgress(e){this.setValue("cmi.progress_measure",e)}setSessionTime(e){this.setValue("cmi.session_time",b(e/1e3))}getSuspendedData(){return this.getValue("cmi.suspend_data")}setSuspendedData(e){if(!this._base)throw new Error;let t=this._base.getSuspendDataLimit();e.length<=t&&this.setValue("cmi.suspend_data",e)}getLaunchMode(){return this._base?this._base.getValue("cmi.mode"):M.NORMAL}setStatus(e,t){let n=(r,i,o,c)=>r===null?i:r?o:c;this.setValue("cmi.success_status",n(e,"unknown","passed","failed")),this.setValue("cmi.completion_status",n(t,"unknown","completed","incomplete"))}setPassed(e){this._base&&this._base.setPassed(e)}addInteraction(e){Se(e,this)}getUserInfo(){return{id:this.getValue("cmi.learner_id"),name:this.getValue("cmi.learner_name"),email:""}}};var H=class extends S{constructor(e,t=K.SECOND){super(),this._edition=t,this._suspendEnabled=e}createConnector(){return new B(this._edition,this._suspendEnabled)}};function Me(s){return{apiVersion:s.apiVersion,flags:s.flags,contentId:s.contentId,chaptersCount:s.chaptersCount,edition:s.edition}}var v=class extends d{constructor(e){super(e.apiVersion,e),this._scormConfig=e}static create(e){return new v(Me(e))}_createLmsApi(e,t,n){switch(e){case"scorm12":return new k(t,n);case"scorm2004":return new H(n,this._scormConfig.edition)}throw new Error("unknown api version")}};le("iSpring.roll.LMS.create",v.create);d.prototype.initialize=d.prototype.initializeLms;})();
